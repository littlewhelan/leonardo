<<<<<<< HEAD
function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],o=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,o,n,i){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){t.company=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.company}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("insert corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr",function(t,e,a,o,n){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,console.log(t.emailList),n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){console.log(e),t.emailList=e,t.totalResults=e.length})}if("fam"==t.type){var o=a.makeDataCall("family","");o.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}if("corp"==t.type){var i=a.makeDataCall("company","");i.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],a.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,o){var n=e.defer();return console.log("this is in the make data call",a,o),t({method:"GET",url:"../createMailList",params:{type:a,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:a}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,o,n,i){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){t.family=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):n({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,a,o,n){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),n.user=a.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],o=[],n=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),c(e),s(e)})},l=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return e(t),console.log("this is getElement1",o),o},s=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},c=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return e(t),console.log("this is getElements3",n),n},r={getKids:c,getAdults:s,getCompanies:l,makeDataCall:i,results:e,companies:o,adults:a,kids:n};return r}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,o){a.user=t.getUser(),a.user&&a.user.username&&o.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,e){e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input),console.log("list #",t.listNum),e.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,e){var a="",o=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),e.post("/newContactList",{name:t}).then(function(t){console.log(t.data),a=t.data,console.log("Id? ",a)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:o,listNum:a},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),n(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,o){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var n=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),o.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("edit password:",t.form),e.put("/admin",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.service("validService",[function(){var t=function(t,e){var a,o=e?$("#"+e):!1;switch(console.log("object is ",o,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]+$/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":a=/^[a-zA-Z0-9\s:-]+$/;break;case"date":a=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":a=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":a=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}(o.attr("required")||o.val().trim().length>0)&&(a.test(o.val().trim())?(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",a)):(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",a)))};return{validateInput:t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJjb250YWN0IiwiZG9uYXRpb25zIiwibmV3RG9uYXRpb24iLCJhbmltYXRpb25zRW5hYmxlZCIsIm9wZW4iLCJzaXplIiwiaWQiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwiY29tcGFueSIsImRhdGEiLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsImluZm8iLCJ0b2dnbGVBbmltYXRpb24iLCJzYXZlIiwicmVzIiwibGVuZ3RoIiwiYWRkRG9uYXRpb24iLCJwdXNoIiwiQ29udGFjdExpc3REYXRhU2VydmljZSIsIm5ld0NvbnRhY3RMaXN0RGF0YSIsInRvYXN0ciIsInR5cGUiLCJhZ2UiLCJ6aXAiLCJlbWFpbHMiLCJpbmNsdWRlZEVtYWlscyIsInRvdGFsRGlzcGxheWVkIiwidG90YWxSZXN1bHRzIiwiZW1haWxMaXN0Iiwic2VhcmNoTGlzdEJ0biIsIm1ha2VEYXRhQ2FsbCIsInN1Y2Nlc3MiLCJlcnJvciIsImZhbSIsImNvbXAiLCJwb3B1bGF0ZUxpc3QiLCJwb3BMaXN0IiwibG9hZE1vcmUiLCJzaG93QWxsIiwiY2hlY2tBbGwiLCJldmVudCIsIiRidXR0b24iLCJlbGVtZW50IiwidGFyZ2V0IiwidmFsIiwiY29weSIsInBhc3NlZERhdGEiLCJkZWZlcnJlZCIsImRlZmVyIiwic2VhcmNoIiwicHJvbWlzZSIsImFkdWx0cyIsImtpZHMiLCJmYW1pbHkiLCJhZHVsdE9uZSIsImFkdWx0VHdvIiwiZW1lcmdlbmN5IiwiY2hpbGRyZW4iLCJuZXdDaGlsZCIsImFkZENoaWxkIiwiZWRpdGluZ0NoaWxkIiwiZWRpdENoaWxkIiwiaW5kZXgiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImNsZWFyQ2hpbGQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF0ZSIsInNjaG9vbCIsIm5vdGVzIiwiJHJvb3RTY29wZSIsInN1Ym1pdCIsInBvc3QiLCJmb3JtIiwidXNlciIsImZvcm1JbnB1dCIsInNlYXJjaEJ0biIsInJlc3VsdHMiLCJnZXRDb21wYW5pZXMiLCJnZXRLaWRzIiwiZ2V0QWR1bHRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MSIsImZvckVhY2giLCJnZXRFbGVtZW50MiIsImdldEVsZW1lbnQzIiwicHVibGljQXBpIiwiJG1vZGFsSW5zdGFuY2UiLCJvayIsImNsb3NlIiwiaXRlbSIsImNhbmNlbCIsImRpc21pc3MiLCJ1c2VybmFtZSIsImxpc3RuYW1lIiwiY3JlYXRlTGlzdCIsImlucHV0IiwicG9zdExpc3QiLCJsaXN0TnVtIiwiaW1wb3J0RGF0YUFycmF5IiwibmFtZSIsImxpc3QiLCJkYXRhT2JqZWN0IiwiZ2V0Q2hlY2tlZCIsImwiLCJvYmplY3QiLCJjb250YWN0T2JqZWN0IiwiZW1haWxfYWRkcmVzc2VzIiwiZW1haWwiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueV9uYW1lIiwiYWRkcmVzc2VzIiwiY2l0eSIsImxpc3ROYW1lIiwicHV0IiwicGF0dGVybiIsIiRvYmoiLCIkIiwiYXR0ciIsInRyaW0iLCJ0ZXN0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6IkFBS0EsUUFBQUEsYUFBQUMsR0FDQSxPQUNBQyxLQUFBQyxPQUFBRixHQUFBRyxPQUFBQyxVQUNBQyxPQUFBSCxPQUFBRixHQUFBRyxPQUFBRyxhQVJBLEdBQUFDLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLFlBQUEsZUFBQSxrQkFBQSxXQUVBSCxXQUFBLGNBQ0FGLFNBQUEsc0JB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QyxJQUFBLElBQ0F6RixRQUFBQyxJQUFBaUUsRUFBQSxlQUFBZ0csS0FTQSxRQUNBakksY0FBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbGVvJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnLCAnY2hlY2tsaXN0LW1vZGVsJywgJ3RvYXN0ciddKTtcblxudmFyIHByZXR0eURhdGUgPSBcIk1NL0REL1lZZ1lZXCI7XG52YXIgZnVsbERhdGUgPSBcIk1NL0REL1lZWVkgaDptbTpzcyBhXCI7XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVzIChkYXRlKSB7XG5cdHJldHVybiB7XG5cdFx0ZnVsbDogbW9tZW50KGRhdGUpLmZvcm1hdChmdWxsRGF0ZSksXG5cdFx0cHJldHR5OiBtb21lbnQoZGF0ZSkuZm9ybWF0KHByZXR0eURhdGUpXG5cdH07XG59XG5cbmFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgICAgICB3aGVuKCcvJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2xvZ2luLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9zZWFyY2gnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL3NlYXJjaC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvcmVnaXN0ZXInLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RMaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0TGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkZmFtaWx5Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9hZGRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0RmFtaWx5Q3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2FkZGNvcnAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0Q29ycEN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9jb250YWN0bGlzdCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvY29udGFjdGxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgb3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAnL3NlYXJjaCdcbiAgICAgICAgICAgIH0pO1xuICAgIH1dKTtcblxuXG5cblxuIiwiYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSkiLCJhcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdykge1xuXG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTsiLCIvL2VkaXQgY29ycG9yYXRpb24gbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0Q29ycEN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSkge1xuXG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBjb21wYW5pZXMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuY29tcGFuaWVzID0gUmVzdWx0U2VydmljZS5jb21wYW5pZXM7XG5cdCRzY29wZS5jb3JwID0ge1xuXHRcdGNvbnRhY3Q6IHt9LFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnY29ycCBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vY29ycG9yYXRpb24nLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5jb21wYW55ID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuY29tcGFueTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgY29ycFxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5jb3JwKTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmNvcnAuaWQpIHtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0aWYoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0fSk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gaW5zZXJ0IGNvcnAgLSBoYXMgbm8gaWRcblx0XHRcdGNvbnNvbGUubG9nKFwiaW5zZXJ0IGNvcnBcIiwgJHNjb3BlLmNvcnApO1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRkYXRhOiB7Y29ycDogJHNjb3BlLmNvcnB9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cblx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0aWYoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJhZGRlZCBkb25hdGlvblwiLCAkc2NvcGUubmV3RG9uYXRpb24sICRzY29wZS5jb3JwLmRvbmF0aW9ucyk7XG5cdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxufV0pOyIsImFwcC5jb250cm9sbGVyKCdjcmVhdGVMaXN0U2VhcmNoJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnQ29udGFjdExpc3REYXRhU2VydmljZScsICduZXdDb250YWN0TGlzdERhdGEnLCAndG9hc3RyJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsbmV3Q29udGFjdExpc3REYXRhLCB0b2FzdHIpIHtcbiAgICAkc2NvcGUudHlwZSA9e307XG4gICAgJHNjb3BlLmFnZT17fTtcbiAgICAkc2NvcGUuemlwPXt9O1xuXHQvLyBpbmNsdWRlIGxpc3QgbmVlZHMgdG8gYmUgd2l0aGluIGFuIG9iamVjdCBkdWUgdG8gdGhlIGNoZWNrYm94ZXMgYmVpbmcgaW4gYSB0YWJsZVxuXHQkc2NvcGUuZW1haWxzID0ge307XG4gICAgJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHQkc2NvcGUuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gNTA7XG5cdCRzY29wZS50b3RhbFJlc3VsdHMgPSAwO1xuXG4gICAgJHNjb3BlLmVtYWlsTGlzdCA9IFsgXTtcblxuICAgICRzY29wZS5zZWFyY2hMaXN0QnRuID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5lbWFpbExpc3QgPSBbXTtcblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAgLS0gd2lsbCBzZWFyY2ggYnkgemlwXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnemlwQ2snKSB7XG5cbiAgICAgICAgICAgIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCd6aXAnLCAkc2NvcGUuemlwLmRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTG9hZGVkICcrICRzY29wZS50b3RhbFJlc3VsdHMgKycgcmVzdWx0cycpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3VsdHMnKTtcblx0XHRcdFx0fSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtIHdpbGwgc2VhcmNoIGJ5IGFnZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2FnZUNrJykge1xuICAgICAgICAgICAgdmFyIGFnZSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdhZ2UnLCAkc2NvcGUuYWdlLmRhdGEpO1xuICAgICAgICAgICAgYWdlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL1RISVMgV09SS1MgLS1nZXQgYWxsIGZhbWlsaWVzIGlmIGZhbSBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnZmFtJykge1xuICAgICAgICAgICAgdmFyIGZhbSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdmYW1pbHknLCAnJyk7XG4gICAgICAgICAgICBmYW0udGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZ2V0IGFsbCBjb3JwIGlmIGNvcnAgaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2NvcnAnKSB7XG4gICAgICAgICAgICB2YXIgY29tcCA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdjb21wYW55JywgJycpO1xuICAgICAgICAgICAgY29tcC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9lbXB0eSB0aGUgc2VhcmNoIGJveFxuICAgICAgICRzY29wZS50eXBlPXt9O1xuICAgICAgICAkc2NvcGUuYWdlPXt9O1xuICAgICAgICAkc2NvcGUuemlwPXt9O1xuXG4gICAgfTtcbiAgICAkc2NvcGUucG9wdWxhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9hbGVydCgnd29ya2luZycpO1xuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzKTtcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvcExpc3QoJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgICAgICAvLy50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgJChcIi5zZWFyY2hcIikuaGlkZSgpO1xuICAgICAgICAgICAgLy8gICAgJChcIi5lbmRNZXNzYWdlXCIpLmFwcGVuZChcIjxoMj5zZW50PC9oMj5cIik7XG4gICAgICAgICAgICAvL30pO1xuICB9O1xuXG5cdCRzY29wZS5sb2FkTW9yZSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgKz0gNTA7XG5cdH07XG5cblx0JHNjb3BlLnNob3dBbGwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gJHNjb3BlLnRvdGFsUmVzdWx0cztcblx0fTtcblxuXHQkc2NvcGUuY2hlY2tBbGwgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciAkYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KGV2ZW50LnRhcmdldCk7XG5cdFx0aWYoJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscy5sZW5ndGggPT0gJHNjb3BlLnRvdGFsUmVzdWx0cykge1xuXHRcdFx0JHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHRcdFx0JGJ1dHRvbi52YWwoXCJDaGVjayBBbGxcIik7XG5cdFx0fWVsc2V7XG5cdFx0XHQvLyRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSAkc2NvcGUuZW1haWxMaXN0Lm1hcChmdW5jdGlvbihyZXN1bHQpIHtcblx0XHRcdC8vXHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0Ly99KTtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHQkYnV0dG9uLnZhbChcIlVuY2hlY2sgQWxsXCIpO1xuXHRcdH1cblx0fTtcbn1dKTtcblxuXG4iLCJhcHAuZmFjdG9yeSgnQ29udGFjdExpc3REYXRhU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlRGF0YUNhbGwodHlwZSwgcGFzc2VkRGF0YSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiB0aGUgbWFrZSBkYXRhIGNhbGwnLCB0eXBlLCBwYXNzZWREYXRhKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL2NyZWF0ZU1haWxMaXN0JyxcbiAgICAgICAgICAgIHBhcmFtczoge3R5cGU6IHR5cGUsIHNlYXJjaDogcGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbFxuICAgIH07XG5cblxufV0pOyIsIi8vZWRpdCBmYW1pbHkgbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0RmFtaWx5Q3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlKSB7XG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBhZHVsdHMgYW5kIGtpZHMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuYWR1bHRzID0gUmVzdWx0U2VydmljZS5hZHVsdHM7XG5cdCRzY29wZS5raWRzID0gUmVzdWx0U2VydmljZS5raWRzO1xuXHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdGFkdWx0T25lOiB7fSxcblx0XHRhZHVsdFR3bzoge30sXG5cdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRjaGlsZHJlbjogW10sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZmFtaWx5IGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9mYW1pbHknLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5mYW1pbHkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZhbWlseTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGZhbWlseVxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuZmFtaWx5LmlkKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHR9KTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBpbnNlcnQgZmFtaWx5IC0gaGFzIG5vIGlkXG5cdFx0XHRjb25zb2xlLmxvZyhcImluc2VydCBmYW1pbHlcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBmb3IgYXBwZW5kaW5nIGNoaWxkcmVuIHRvIG1vZGVsIGJlZm9yZSBzYXZpbmcgbmV3IGZhbWlseVxuXHQkc2NvcGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJjaGlsZCBhZGRlZFwiLCAkc2NvcGUubmV3Q2hpbGQsICRzY29wZS5mYW1pbHkuY2hpbGRyZW4pO1xuXHRcdC8vIGlmIHRydWUsIHRoZW4gdXBkYXRlIHRoYXQgaW5kZXhcblx0XHRpZigkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuWyRzY29wZS5lZGl0aW5nQ2hpbGRdID0gJHNjb3BlLm5ld0NoaWxkO1xuXHRcdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHRcdH1lbHNlIHtcblx0XHRcdC8vIGVsc2UgcHVzaCB0byBhcnJheVxuXHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5wdXNoKCRzY29wZS5uZXdDaGlsZCk7XG5cdFx0fVxuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHR9O1xuXG5cdC8vIGVkaXQgY2hpbGQgb24gdGhlIGFkZCBjaGlsZHJlbiB0YWIgb2YgYWRkIGZhbWlseVxuXHQkc2NvcGUuZWRpdENoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Ly8gc2F2ZSBpbmRleCBvZiBjaGlsZCBlZGl0aW5nXG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGluZGV4O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9ICRzY29wZS5mYW1pbHkuY2hpbGRyZW5baW5kZXhdO1xuXHR9O1xuXG5cdCRzY29wZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gcmVtb3ZlIGNoaWxkIGluZGV4XCIsIGluZGV4LCBcIiBlZGl0IFwiLCAkc2NvcGUuZWRpdGluZ0NoaWxkKTtcblx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XG5cdFx0aWYoaW5kZXggPT0gJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJlZGl0IG1hdGNoXCIpO1xuXHRcdFx0JHNjb3BlLmNsZWFyQ2hpbGQoKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIm5vIGVkaXQgbWF0Y2hcIik7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGNsZWFycyB0ZXh0IGJveGVzIGluIGFkZCBmYW1pbHktPmNoaWxkcmVuIHRhYlxuXHQkc2NvcGUuY2xlYXJDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIGNsZWFyIGNoaWxkXCIpO1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHtcblx0XHRcdGZpcnN0TmFtZTogJycsXG5cdFx0XHRsYXN0TmFtZTogJycsXG5cdFx0XHRiaXJ0aGRhdGU6ICcnLFxuXHRcdFx0c2Nob29sOiAnJyxcblx0XHRcdG5vdGVzOiAnJ1xuXHRcdH07XG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHR9O1xuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG5cdC8vLy8gcHJldmVudCBhY2NpZGVudGFsIGJhY2tzXG5cdC8vJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCBldmVudCwgb2xkVXJsICkge1xuXHQvL1x0Y29uc29sZS5sb2coXCJvbGQgdXJsOiBcIiwgb2xkVXJsKTtcblx0Ly9cdGlmKC8oYWRkZmFtaWx5KS8udGVzdChvbGRVcmwpKSB7XG5cdC8vXHRcdHZhciBhbnN3ZXIgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlIHRoaXMgcGFnZT9cIik7XG5cdC8vXHRcdGlmICghYW5zd2VyKSB7XG5cdC8vXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly9cdFx0fVxuXHQvL1x0fVxuXHQvL30pO1xuXG59XSk7IiwiLy9jb250cm9sbGVycyBmb3IgbG9naW5cbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvc2VhcmNoXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsIlxuLy9UaGlzIHNob3VsZCBnZXQgdGhlIHNlYXJjaCBpdGVtXG5hcHAuY29udHJvbGxlcignc2VhcmNoRnVuY3Rpb24nLCBbJyRzY29wZScsICckaHR0cCcsICdSZXN1bHRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIFJlc3VsdFNlcnZpY2UpIHtcbiAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuXG4gICAgJHNjb3BlLnNlYXJjaEJ0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgIFJlc3VsdFNlcnZpY2UubWFrZURhdGFDYWxsKCRzY29wZS5mb3JtSW5wdXQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBpbnB1dCB0ZXh0JywgJHNjb3BlLmZvcm1JbnB1dCk7XG4gICAgICAgIC8vZW1wdHlzIHRoZSBzZWFyY2ggYm94XG4gICAgICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG4gICAgfTtcblxufV0pO1xuIiwiLy9UaGlzIHNlcnZpY2Ugc2hvdWxkIHBhc3MgZGF0YSBiZXR3ZWVuIGNvbnRyb2xsZXJzXG5hcHAuZmFjdG9yeSgnUmVzdWx0U2VydmljZScsIFsnJGh0dHAnLGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgYWR1bHRzID0gW107XG4gICAgdmFyIGNvbXBhbmllcyA9IFtdO1xuICAgIHZhciBraWRzID0gW107XG5cbiAgICB2YXIgbWFrZURhdGFDYWxsID0gZnVuY3Rpb24ocGFzc2VkRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL3NlYXJjaCcsXG4gICAgICAgICAgICBwYXJhbXM6e3NlYXJjaDpwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRLaWRzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0QWR1bHRzKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBnZXRDb21wYW5pZXMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDEgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgY29tcGFuaWVzLnNwbGljZSgwLGNvbXBhbmllcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjb21wYW55JylcbiAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0RWxlbWVudDEoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50MScsY29tcGFuaWVzKTtcbiAgICAgICAgcmV0dXJuIGNvbXBhbmllc1xuICAgIH07XG5cbiAgICB2YXIgZ2V0QWR1bHRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQyID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGFkdWx0cy5zcGxpY2UoMCxhZHVsdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnYWR1bHQnKVxuICAgICAgICAgICAgICAgICAgICBhZHVsdHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQyKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gZ2V0RWxlbWVudDInLCBhZHVsdHMpO1xuICAgICAgICByZXR1cm4gYWR1bHRzXG4gICAgfTtcblxuICAgIHZhciBnZXRLaWRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGtpZHMuc3BsaWNlKDAsa2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjaGlsZCcpXG4gICAgICAgICAgICAgICAgICAgIGtpZHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudHMzJywga2lkcyk7XG4gICAgICAgIHJldHVybiBraWRzXG4gICAgfTtcblxuICAgIC8vcHVibGljXG4gICAgdmFyIHB1YmxpY0FwaSA9IHtcbiAgICAgICAgZ2V0S2lkczogZ2V0S2lkcyxcbiAgICAgICAgZ2V0QWR1bHRzOiBnZXRBZHVsdHMsXG4gICAgICAgIGdldENvbXBhbmllczogZ2V0Q29tcGFuaWVzLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbCxcbiAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgY29tcGFuaWVzOiBjb21wYW5pZXMsXG4gICAgICAgIGFkdWx0czogYWR1bHRzLFxuICAgICAgICBraWRzOiBraWRzXG4gICAgfTtcbiAgICByZXR1cm4gcHVibGljQXBpO1xufV0pOyIsIi8vIFBsZWFzZSBub3RlIHRoYXQgJG1vZGFsSW5zdGFuY2UgcmVwcmVzZW50cyBhIG1vZGFsIHdpbmRvdyAoaW5zdGFuY2UpIGRlcGVuZGVuY3kuXG4vLyBJdCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlICR1aWJNb2RhbCBzZXJ2aWNlIHVzZWQgYWJvdmUuXG5cbi8vbmVlZGVkIGZvciBtb2RhbD8/IHByZXR0eSBzdXJlXG5hcHAuY29udHJvbGxlcignTW9kYWxJbnN0YW5jZUN0cmwnLFsnJHNjb3BlJywnJG1vZGFsSW5zdGFuY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuXG4gICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUuc2VsZWN0ZWQuaXRlbSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgIH07XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ2F1dGhTZXJ2aWNlJywnJHNjb3BlJywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKGF1dGhTZXJ2aWNlLCAkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgfVxufV0pO1xuIiwiLy8gQWpheCBmb3IgY3JlYXRpbmcgdGhlIGNvbnRhY3QgbGlzdCBpbiBjb25zdGFudCBjb250YWN0XG5hcHAuY29udHJvbGxlcignbmV3Q29udGFjdExpc3RDb250cm9sbGVyJyxbJ25ld0NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuXG4gICAgJHNjb3BlLmxpc3RuYW1lID0ge307XG5cbiAgICAkc2NvcGUuY3JlYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgbGlzdCBuYW1lIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvc3RMaXN0KCRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXG4gICAgICAgICRzY29wZS5saXN0bmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG5cbiIsIlxuYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4gICAgICAgIHZhciBsaXN0TnVtID0gXCJcIjtcbiAgICAgICAgdmFyIGltcG9ydERhdGFBcnJheSA9W107XG5cbiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRpZCB0aGUgbmFtZSBtYWtlIGl0IHRvIHRoZSBzZXJ2aWNlPyBcIiArIG5hbWUgKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqZWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBvYmplY3QubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogb2JqZWN0LmNvbXBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogb2JqZWN0LmNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydERhdGFBcnJheS5wdXNoKHRoaXMuY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZHJlc3NcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSYtXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKFsoXVswLTldezN9WyldfFswLTldezN9KVtcXHNcXC0uXT9bMC05XXszfVtcXHNcXC0uXT9bMC05XXs0fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4dFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHM6LV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXjIwWzAtOV17Mn1bLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDE5OVswLTldfDIwWzAtOV17Mn0pWy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFtb3VudFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXltcXCRdP1tcXGRdKyhbLl1bXFxkXXsyfSk/JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBjbGFzcyBzZWFyY2hcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmVxdWlyZWQgb3IgdHJpbW1lZCBsZW5ndGggaXMgbm90IDAsIHRoZW4gdmFsaWRhdGUgaW5mb1xuICAgICAgICBpZigkb2JqLmF0dHIoJ3JlcXVpcmVkJykgfHwgJG9iai52YWwoKS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHZhbHVlIG1hdGNoZXMgcmVnZXggZm9yIGZpZWxkIHR5cGVcbiAgICAgICAgICAgIGlmKCFwYXR0ZXJuLnRlc3QoJG9iai52YWwoKS50cmltKCkpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZmFpbHMsIGFkZHMgaW52YWxpZCBjbGFzcyAoaGlnaGxpZ2h0aW5nKSwgY2hhbmdlcyBwbGFjZWhvbGRlciB0byB3aGF0IHNob3VsZCBiZSBlbnRlcmVkXG4gICAgICAgICAgICAgICAgJG9iai5hZGRDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdpbnZhbGlkJykpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBmYWlsZWQgdGVzdCcsIHBhdHRlcm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXNzZXMsIHJlbW92ZXMgaW52YWxpZCBjbGFzcywgcmVzZXRzIHBsYWNlaG9sZGVyIHRvIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAkb2JqLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgcGFzc2VkIHRlc3QnLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0XG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
=======
function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],n=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(n))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,n,o,i){t.validateInput=i.validateInput,t.companies=n.companies,t.corp={contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(){t.corp={},t.newDonation={}},t.open=function(n,i){return console.log("corp call",i),o({method:"GET",url:"../corporation",params:{id:i}}).then(function(o){t.company=o.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.company}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("insert corp",t.corp),o({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):o({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData",function(t,e,a,n){t.type={},t.age={},t.zip={},t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,console.log(t.emailList)}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){console.log(e),t.emailList=e,t.totalResults=e.length})}if("fam"==t.type){var n=a.makeDataCall("family","");n.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}if("corp"==t.type){var o=a.makeDataCall("company","");o.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.includedEmails),n.popList(t.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.includedEmails.length==t.totalResults?(t.includedEmails=[],$('#createResults input[type="checkbox"]').attr("checked",!1),a.val("Check All")):(t.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,n){var o=e.defer();return console.log("this is in the make data call",a,n),t({method:"GET",url:"../createMailList",params:{type:a,search:n}}).then(function(t){data=t.data,o.resolve(t.data)}),o.promise}return{data:[],makeDataCall:a}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,n,o,i){t.validateInput=i.validateInput,t.adults=n.adults,t.kids=n.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={}},t.animationsEnabled=!0,t.open=function(n,i){return console.log("family call",i),o({method:"GET",url:"../family",params:{id:i}}).then(function(o){t.family=o.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),o({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):o({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,a,n,o){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),o.user=a.getUser(),n.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],n=[],o=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),s(e),c(e)})},l=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"company"==t.type&&n.push(t)})};return e(t),console.log("this is getElement1",n),n},c=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},s=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"child"==t.type&&o.push(t)})};return e(t),console.log("this is getElements3",o),o},r={getKids:s,getAdults:c,getCompanies:l,makeDataCall:i,results:e,companies:n,adults:a,kids:o};return r}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,n){a.user=t.getUser(),a.user&&a.user.username&&n.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),n.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,e){e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input),console.log("list #",t.listNum),e.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,e){var a="",n=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),e.post("/newContactList",{name:t}).then(function(t){console.log(t.data),a=t.data,console.log("Id? ",a)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:n,listNum:a},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),o(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,n){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var o=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),n.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("edit password:",t.form),e.put("/admin",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.service("validService",[function(){var t=function(t,e){var a,n=e?$("#"+e):!1;switch(console.log("object is ",n,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]+$/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":a=/^[a-zA-Z0-9\s:-]+$/;break;case"date":a=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":a=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":a=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}(n.attr("required")||n.val().trim().length>0)&&(a.test(n.val().trim())?(n.removeClass("invalid").attr("placeholder",n.data("placeholder")),console.log(t," passed test",a)):(n.addClass("invalid").attr("placeholder",n.data("invalid")).val(""),console.log(t," failed test",a)))};return{validateInput:t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJjb250YWN0IiwiZG9uYXRpb25zIiwibmV3RG9uYXRpb24iLCJhbmltYXRpb25zRW5hYmxlZCIsImNsZWFyQ29ycCIsIm9wZW4iLCJzaXplIiwiaWQiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwiY29tcGFueSIsImRhdGEiLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsImluZm8iLCJ0b2dnbGVBbmltYXRpb24iLCJzYXZlIiwicmVzIiwibGVuZ3RoIiwiYWRkRG9uYXRpb24iLCJwdXNoIiwiQ29udGFjdExpc3REYXRhU2VydmljZSIsIm5ld0NvbnRhY3RMaXN0RGF0YSIsInR5cGUiLCJhZ2UiLCJ6aXAiLCJpbmNsdWRlZEVtYWlscyIsInRvdGFsRGlzcGxheWVkIiwidG90YWxSZXN1bHRzIiwiZW1haWxMaXN0Iiwic2VhcmNoTGlzdEJ0biIsIm1ha2VEYXRhQ2FsbCIsImZhbSIsImNvbXAiLCJwb3B1bGF0ZUxpc3QiLCJwb3BMaXN0IiwibG9hZE1vcmUiLCJzaG93QWxsIiwiY2hlY2tBbGwiLCJldmVudCIsIiRidXR0b24iLCJlbGVtZW50IiwidGFyZ2V0IiwiJCIsImF0dHIiLCJ2YWwiLCJjb3B5IiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwiYWR1bHRzIiwia2lkcyIsImZhbWlseSIsImFkdWx0T25lIiwiYWR1bHRUd28iLCJlbWVyZ2VuY3kiLCJjaGlsZHJlbiIsIm5ld0NoaWxkIiwiY2xlYXJGYW1pbHkiLCJhZGRDaGlsZCIsImVkaXRpbmdDaGlsZCIsImVkaXRDaGlsZCIsImluZGV4IiwicmVtb3ZlQ2hpbGQiLCJzcGxpY2UiLCJjbGVhckNoaWxkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aGRhdGUiLCJzY2hvb2wiLCJub3RlcyIsIiRyb290U2NvcGUiLCJzdWJtaXQiLCJwb3N0IiwiZm9ybSIsInVzZXIiLCJmb3JtSW5wdXQiLCJzZWFyY2hCdG4iLCJyZXN1bHRzIiwiZ2V0Q29tcGFuaWVzIiwiZ2V0S2lkcyIsImdldEFkdWx0cyIsImFycmF5IiwiZ2V0RWxlbWVudDEiLCJmb3JFYWNoIiwiZ2V0RWxlbWVudDIiLCJnZXRFbGVtZW50MyIsInB1YmxpY0FwaSIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJjbG9zZSIsIml0ZW0iLCJjYW5jZWwiLCJkaXNtaXNzIiwidXNlcm5hbWUiLCJsaXN0bmFtZSIsImNyZWF0ZUxpc3QiLCJpbnB1dCIsInBvc3RMaXN0IiwibGlzdE51bSIsImltcG9ydERhdGFBcnJheSIsIm5hbWUiLCJsaXN0IiwiZGF0YU9iamVjdCIsImdldENoZWNrZWQiLCJsIiwib2JqZWN0IiwiY29udGFjdE9iamVjdCIsImVtYWlsX2FkZHJlc3NlcyIsImVtYWlsIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImNvbXBhbnlfbmFtZSIsImFkZHJlc3NlcyIsImNpdHkiLCJsaXN0TmFtZSIsInB1dCIsInBhdHRlcm4iLCIkb2JqIiwidHJpbSIsInRlc3QiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFLQSxRQUFBQSxhQUFBQyxHQUNBLE9BQ0FDLEtBQUFDLE9BQUFGLEdBQUFHLE9BQUFDLFVBQ0FDLE9BQUFILE9BQUFGLEdBQUFHLE9BQUFHLGFBUkEsR0FBQUMsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxlQUFBLG9CQUVBSCxXQUFBLGNBQ0FGLFNBQUEsc0JBU0FHLEtBQUFHLFFBQUEs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SCxLQUFBLFlBQUF3QyxJQUFBLElBQ0F4RixRQUFBQyxJQUFBaUUsRUFBQSxlQUFBZ0csS0FTQSxRQUNBakksY0FBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbGVvJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnLCAnY2hlY2tsaXN0LW1vZGVsJ10pO1xuXG52YXIgcHJldHR5RGF0ZSA9IFwiTU0vREQvWVlnWVlcIjtcbnZhciBmdWxsRGF0ZSA9IFwiTU0vREQvWVlZWSBoOm1tOnNzIGFcIjtcblxuZnVuY3Rpb24gZm9ybWF0RGF0ZXMgKGRhdGUpIHtcblx0cmV0dXJuIHtcblx0XHRmdWxsOiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZ1bGxEYXRlKSxcblx0XHRwcmV0dHk6IG1vbWVudChkYXRlKS5mb3JtYXQocHJldHR5RGF0ZSlcblx0fTtcbn1cblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRGYW1pbHlDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRDb3JwQ3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RsaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvc2VhcmNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pO1xuXG5cblxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBjb3Jwb3JhdGlvbiBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRDb3JwQ3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlKSB7XG5cblx0Ly8gc2V0cyB2YWxpZGF0aW9uIGZyb20gc2VydmljZSBmb3IgZG9tIGNhbGxzXG5cdCRzY29wZS52YWxpZGF0ZUlucHV0ID0gdmFsaWRTZXJ2aWNlLnZhbGlkYXRlSW5wdXQ7XG5cdC8vc2VuZHMgdGhlIGNvbXBhbmllcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5jb21wYW5pZXMgPSBSZXN1bHRTZXJ2aWNlLmNvbXBhbmllcztcblx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0Y29udGFjdDoge30sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuXHQkc2NvcGUuY2xlYXJDb3JwID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5jb3JwID0ge307XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdH07XG5cblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnY29ycCBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vY29ycG9yYXRpb24nLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5jb21wYW55ID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuY29tcGFueTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgY29ycFxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5jb3JwKTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmNvcnAuaWQpIHtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0aWYoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0fSk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gaW5zZXJ0IGNvcnAgLSBoYXMgbm8gaWRcblx0XHRcdGNvbnNvbGUubG9nKFwiaW5zZXJ0IGNvcnBcIiwgJHNjb3BlLmNvcnApO1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRkYXRhOiB7Y29ycDogJHNjb3BlLmNvcnB9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cblx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0aWYoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJhZGRlZCBkb25hdGlvblwiLCAkc2NvcGUubmV3RG9uYXRpb24sICRzY29wZS5jb3JwLmRvbmF0aW9ucyk7XG5cdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxufV0pOyIsImFwcC5jb250cm9sbGVyKCdjcmVhdGVMaXN0U2VhcmNoJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnQ29udGFjdExpc3REYXRhU2VydmljZScsICduZXdDb250YWN0TGlzdERhdGEnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgQ29udGFjdExpc3REYXRhU2VydmljZSxuZXdDb250YWN0TGlzdERhdGEpIHtcbiAgICAkc2NvcGUudHlwZSA9e307XG4gICAgJHNjb3BlLmFnZT17fTtcbiAgICAkc2NvcGUuemlwPXt9O1xuICAgICRzY29wZS5pbmNsdWRlZEVtYWlscyA9W107XG5cdCRzY29wZS50b3RhbERpc3BsYXllZCA9IDUwO1xuXHQkc2NvcGUudG90YWxSZXN1bHRzID0gMDtcblxuICAgICRzY29wZS5lbWFpbExpc3QgPSBbIF07XG5cbiAgICAkc2NvcGUuc2VhcmNoTGlzdEJ0biA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZW1haWxMaXN0ID0gW107XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgIC0tIHdpbGwgc2VhcmNoIGJ5IHppcFxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ3ppcENrJykge1xuXG4gICAgICAgICAgICBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnemlwJywgJHNjb3BlLnppcC5kYXRhKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlsTGlzdCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9USElTIFdPUktTIC0gd2lsbCBzZWFyY2ggYnkgYWdlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnYWdlQ2snKSB7XG4gICAgICAgICAgICB2YXIgYWdlID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2FnZScsICRzY29wZS5hZ2UuZGF0YSk7XG4gICAgICAgICAgICBhZ2UudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtLWdldCBhbGwgZmFtaWxpZXMgaWYgZmFtIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdmYW0nKSB7XG4gICAgICAgICAgICB2YXIgZmFtID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2ZhbWlseScsICcnKTtcbiAgICAgICAgICAgIGZhbS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9nZXQgYWxsIGNvcnAgaWYgY29ycCBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnY29ycCcpIHtcbiAgICAgICAgICAgIHZhciBjb21wID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2NvbXBhbnknLCAnJyk7XG4gICAgICAgICAgICBjb21wLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2VtcHR5IHRoZSBzZWFyY2ggYm94XG4gICAgICAgJHNjb3BlLnR5cGU9e307XG4gICAgICAgICRzY29wZS5hZ2U9e307XG4gICAgICAgICRzY29wZS56aXA9e307XG5cbiAgICB9O1xuICAgICRzY29wZS5wb3B1bGF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2FsZXJ0KCd3b3JraW5nJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCRzY29wZS5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgICAgICAvLy50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgJChcIi5zZWFyY2hcIikuaGlkZSgpO1xuICAgICAgICAgICAgLy8gICAgJChcIi5lbmRNZXNzYWdlXCIpLmFwcGVuZChcIjxoMj5zZW50PC9oMj5cIik7XG4gICAgICAgICAgICAvL30pO1xuICB9O1xuXG5cdCRzY29wZS5sb2FkTW9yZSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgKz0gNTA7XG5cdH07XG5cblx0JHNjb3BlLnNob3dBbGwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gJHNjb3BlLnRvdGFsUmVzdWx0cztcblx0fTtcblxuXHQkc2NvcGUuY2hlY2tBbGwgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciAkYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KGV2ZW50LnRhcmdldCk7XG5cdFx0aWYoJHNjb3BlLmluY2x1ZGVkRW1haWxzLmxlbmd0aCA9PSAkc2NvcGUudG90YWxSZXN1bHRzKSB7XG5cdFx0XHQkc2NvcGUuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0XHRcdCQoJyNjcmVhdGVSZXN1bHRzIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmF0dHIoJ2NoZWNrZWQnLCBmYWxzZSk7XG5cdFx0XHQkYnV0dG9uLnZhbChcIkNoZWNrIEFsbFwiKTtcblx0XHR9ZWxzZXtcblx0XHRcdCRzY29wZS5pbmNsdWRlZEVtYWlscyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdCRidXR0b24udmFsKFwiVW5jaGVjayBBbGxcIik7XG5cdFx0fVxuXG5cdH07XG59XSk7XG5cblxuIiwiYXBwLmZhY3RvcnkoJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXG4gICAgZnVuY3Rpb24gbWFrZURhdGFDYWxsKHR5cGUsIHBhc3NlZERhdGEpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gdGhlIG1ha2UgZGF0YSBjYWxsJywgdHlwZSwgcGFzc2VkRGF0YSk7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9jcmVhdGVNYWlsTGlzdCcsXG4gICAgICAgICAgICBwYXJhbXM6IHt0eXBlOiB0eXBlLCBzZWFyY2g6IHBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGxcbiAgICB9O1xuXG5cbn1dKTsiLCIvL2VkaXQgZmFtaWx5IG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdEZhbWlseUN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSkge1xuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgYWR1bHRzIGFuZCBraWRzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmFkdWx0cyA9IFJlc3VsdFNlcnZpY2UuYWR1bHRzO1xuXHQkc2NvcGUua2lkcyA9IFJlc3VsdFNlcnZpY2Uua2lkcztcblx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRhZHVsdE9uZToge30sXG5cdFx0YWR1bHRUd286IHt9LFxuXHRcdGVtZXJnZW5jeToge30sXG5cdFx0Y2hpbGRyZW46IFtdLFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXG5cdCRzY29wZS5jbGVhckZhbWlseSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdFx0YWR1bHRPbmU6IHt9LFxuXHRcdFx0YWR1bHRUd286IHt9LFxuXHRcdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRcdGNoaWxkcmVuOiBbXSxcblx0XHRcdGRvbmF0aW9uczogW11cblx0XHR9O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG5cblxuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdmYW1pbHkgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2ZhbWlseScsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmZhbWlseSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0ZmFtaWx5Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmFtaWx5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgZmFtaWx5XG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0Ly9hbGVydChcIlN1Ym1pdHRlZFwiKTtcblx0XHQvLyBpZiBoYXMgaWQsIHRoZW4gcHV0XG5cdFx0aWYoISRzY29wZS5mYW1pbHkuaWQpIHtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdH0pO1xuXHRcdH1lbHNlIHtcblx0XHRcdC8vIGluc2VydCBmYW1pbHkgLSBoYXMgbm8gaWRcblx0XHRcdGNvbnNvbGUubG9nKFwiaW5zZXJ0IGZhbWlseVwiLCAkc2NvcGUuZmFtaWx5KTtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0dXJsOiAnL2ZhbWlseScsXG5cdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgZmFtaWx5LCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0T25lID0gKHJlcy5kYXRhLmFkdWx0T25lKSA/IHJlcy5kYXRhLmFkdWx0T25lIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRUd28gPSAocmVzLmRhdGEuYWR1bHRUd28pID8gcmVzLmRhdGEuYWR1bHRUd28gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGZvciBhcHBlbmRpbmcgY2hpbGRyZW4gdG8gbW9kZWwgYmVmb3JlIHNhdmluZyBuZXcgZmFtaWx5XG5cdCRzY29wZS5hZGRDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImNoaWxkIGFkZGVkXCIsICRzY29wZS5uZXdDaGlsZCwgJHNjb3BlLmZhbWlseS5jaGlsZHJlbik7XG5cdFx0Ly8gaWYgdHJ1ZSwgdGhlbiB1cGRhdGUgdGhhdCBpbmRleFxuXHRcdGlmKCRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW5bJHNjb3BlLmVkaXRpbmdDaGlsZF0gPSAkc2NvcGUubmV3Q2hpbGQ7XG5cdFx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gZmFsc2U7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gZWxzZSBwdXNoIHRvIGFycmF5XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnB1c2goJHNjb3BlLm5ld0NoaWxkKTtcblx0XHR9XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdH07XG5cblx0Ly8gZWRpdCBjaGlsZCBvbiB0aGUgYWRkIGNoaWxkcmVuIHRhYiBvZiBhZGQgZmFtaWx5XG5cdCRzY29wZS5lZGl0Q2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHQvLyBzYXZlIGluZGV4IG9mIGNoaWxkIGVkaXRpbmdcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gaW5kZXg7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0gJHNjb3BlLmZhbWlseS5jaGlsZHJlbltpbmRleF07XG5cdH07XG5cblx0JHNjb3BlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiByZW1vdmUgY2hpbGQgaW5kZXhcIiwgaW5kZXgsIFwiIGVkaXQgXCIsICRzY29wZS5lZGl0aW5nQ2hpbGQpO1xuXHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihpbmRleCA9PSAkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImVkaXQgbWF0Y2hcIik7XG5cdFx0XHQkc2NvcGUuY2xlYXJDaGlsZCgpO1xuXHRcdH1lbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwibm8gZWRpdCBtYXRjaFwiKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gY2xlYXJzIHRleHQgYm94ZXMgaW4gYWRkIGZhbWlseS0+Y2hpbGRyZW4gdGFiXG5cdCRzY29wZS5jbGVhckNoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gY2xlYXIgY2hpbGRcIik7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge1xuXHRcdFx0Zmlyc3ROYW1lOiAnJyxcblx0XHRcdGxhc3ROYW1lOiAnJyxcblx0XHRcdGJpcnRoZGF0ZTogJycsXG5cdFx0XHRzY2hvb2w6ICcnLFxuXHRcdFx0bm90ZXM6ICcnXG5cdFx0fTtcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gZmFsc2U7XG5cdH07XG5cblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3Rcblx0JHNjb3BlLmFkZERvbmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxuXHQvLy8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc1xuXHQvLyRzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiggZXZlbnQsIG9sZFVybCApIHtcblx0Ly9cdGNvbnNvbGUubG9nKFwib2xkIHVybDogXCIsIG9sZFVybCk7XG5cdC8vXHRpZigvKGFkZGZhbWlseSkvLnRlc3Qob2xkVXJsKSkge1xuXHQvL1x0XHR2YXIgYW5zd2VyID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZSB0aGlzIHBhZ2U/XCIpO1xuXHQvL1x0XHRpZiAoIWFuc3dlcikge1xuXHQvL1x0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdC8vXHRcdH1cblx0Ly9cdH1cblx0Ly99KTtcblxufV0pOyIsIi8vY29udHJvbGxlcnMgZm9yIGxvZ2luXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnYXV0aFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBhdXRoU2VydmljZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKXtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL3NlYXJjaFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XSk7XG4iLCJcbi8vVGhpcyBzaG91bGQgZ2V0IHRoZSBzZWFyY2ggaXRlbVxuYXBwLmNvbnRyb2xsZXIoJ3NlYXJjaEZ1bmN0aW9uJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnUmVzdWx0U2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBSZXN1bHRTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcblxuICAgICRzY29wZS5zZWFyY2hCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICBSZXN1bHRTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgkc2NvcGUuZm9ybUlucHV0LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyB0aGUgaW5wdXQgdGV4dCcsICRzY29wZS5mb3JtSW5wdXQpO1xuICAgICAgICAvL2VtcHR5cyB0aGUgc2VhcmNoIGJveFxuICAgICAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuICAgIH07XG5cbn1dKTtcbiIsIi8vVGhpcyBzZXJ2aWNlIHNob3VsZCBwYXNzIGRhdGEgYmV0d2VlbiBjb250cm9sbGVyc1xuYXBwLmZhY3RvcnkoJ1Jlc3VsdFNlcnZpY2UnLCBbJyRodHRwJyxmdW5jdGlvbigkaHR0cCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIGFkdWx0cyA9IFtdO1xuICAgIHZhciBjb21wYW5pZXMgPSBbXTtcbiAgICB2YXIga2lkcyA9IFtdO1xuXG4gICAgdmFyIG1ha2VEYXRhQ2FsbCA9IGZ1bmN0aW9uKHBhc3NlZERhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9zZWFyY2gnLFxuICAgICAgICAgICAgcGFyYW1zOntzZWFyY2g6cGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZ2V0Q29tcGFuaWVzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0S2lkcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEFkdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgZ2V0Q29tcGFuaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQxID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGNvbXBhbmllcy5zcGxpY2UoMCxjb21wYW5pZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY29tcGFueScpXG4gICAgICAgICAgICAgICAgY29tcGFuaWVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGdldEVsZW1lbnQxKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudDEnLGNvbXBhbmllcyk7XG4gICAgICAgIHJldHVybiBjb21wYW5pZXNcbiAgICB9O1xuXG4gICAgdmFyIGdldEFkdWx0cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBhZHVsdHMuc3BsaWNlKDAsYWR1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2FkdWx0JylcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MihhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIGdldEVsZW1lbnQyJywgYWR1bHRzKTtcbiAgICAgICAgcmV0dXJuIGFkdWx0c1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBraWRzLnNwbGljZSgwLGtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICBraWRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MyhhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnRzMycsIGtpZHMpO1xuICAgICAgICByZXR1cm4ga2lkc1xuICAgIH07XG5cbiAgICAvL3B1YmxpY1xuICAgIHZhciBwdWJsaWNBcGkgPSB7XG4gICAgICAgIGdldEtpZHM6IGdldEtpZHMsXG4gICAgICAgIGdldEFkdWx0czogZ2V0QWR1bHRzLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGwsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNvbXBhbmllczogY29tcGFuaWVzLFxuICAgICAgICBhZHVsdHM6IGFkdWx0cyxcbiAgICAgICAga2lkczoga2lkc1xuICAgIH07XG4gICAgcmV0dXJuIHB1YmxpY0FwaTtcbn1dKTsiLCIvLyBQbGVhc2Ugbm90ZSB0aGF0ICRtb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxuLy8gSXQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAkdWliTW9kYWwgc2VydmljZSB1c2VkIGFib3ZlLlxuXG4vL25lZWRlZCBmb3IgbW9kYWw/PyBwcmV0dHkgc3VyZVxuYXBwLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJyxbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgIH1cbn1dKTtcbiIsIi8vIEFqYXggZm9yIGNyZWF0aW5nIHRoZSBjb250YWN0IGxpc3QgaW4gY29uc3RhbnQgY29udGFjdFxuYXBwLmNvbnRyb2xsZXIoJ25ld0NvbnRhY3RMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCBmdW5jdGlvbihuZXdDb250YWN0TGlzdERhdGEsICRzY29wZSkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0bmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZSBsaXN0OiBcIiArICRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG4gICAgICAgIC8vcGFzc2VzIGxpc3QgbmFtZSBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3N0TGlzdCgkc2NvcGUubGlzdG5hbWUuaW5wdXQpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaXN0ICMnLG5ld0NvbnRhY3RMaXN0RGF0YS5saXN0TnVtKTtcblxuICAgICAgICAkc2NvcGUubGlzdG5hbWU9e307XG4gICAgfTtcbn1dKTtcblxuXG4iLCJcbmFwcC5zZXJ2aWNlKCduZXdDb250YWN0TGlzdERhdGEnLCBbJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnJGh0dHAnLFxuICAgIGZ1bmN0aW9uIChDb250YWN0TGlzdERhdGFTZXJ2aWNlLCAkaHR0cCkge1xuICAgICAgICB2YXIgbGlzdE51bSA9IFwiXCI7XG4gICAgICAgIHZhciBpbXBvcnREYXRhQXJyYXkgPVtdO1xuXG4gICAgICAgIHRoaXMucG9zdExpc3QgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkaWQgdGhlIG5hbWUgbWFrZSBpdCB0byB0aGUgc2VydmljZT8gXCIgKyBuYW1lICk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL25ld0NvbnRhY3RMaXN0Jywge25hbWU6IG5hbWV9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGxpc3ROdW0gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSWQ/IFwiLCBsaXN0TnVtKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL2Vycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wb3BMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YU9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBcImltcG9ydERhdGFBcnJheVwiOiBpbXBvcnREYXRhQXJyYXksXG4gICAgICAgICAgICAgICAgXCJsaXN0TnVtXCI6IGxpc3ROdW1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ290IHRvIHBvcExpc3QnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgZ2V0Q2hlY2tlZChsaXN0KTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9wb3B1bGF0ZUNvbnRhY3RMaXN0JywgdGhpcy5kYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0ZWQnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW1wb3J0RGF0YUFycmF5OiAnLHRoaXMuaW1wb3J0RGF0YUFycmF5LCAnXFxudHlwZTogJywgdHlwZW9mIHRoaXMuaW1wb3J0RGF0YUFycmF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvL2dldCBhbGwgdGhlIGNoZWNrZWQgZWxlbWVudHMgYW5kIHN0dWZmIHRoZW0gaW4gYW4gYXJyYXlcbiAgICAgICAgdmFyIGdldENoZWNrZWQgPSBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldENoZWNrZWQgaXMgcnVubmluZycpO1xuICAgICAgICAgICAgbC5mb3JFYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFjdE9iamVjdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbWFpbF9hZGRyZXNzZXNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZW1haWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlyc3RfbmFtZVwiOm9iamVjdC5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsYXN0X25hbWVcIjogb2JqZWN0Lmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IG9iamVjdC5jb21wYW55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IG9iamVjdC5jaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnREYXRhQXJyYXkucHVzaCh0aGlzLmNvbnRhY3RPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuXG4iLCJhcHAuY29udHJvbGxlcigncG9wTGlzdENvbnRyb2xsZXInLFsnbmV3Q29udGFjdExpc3REYXRhJywnJHNjb3BlJywnJGh0dHAnLCBmdW5jdGlvbihuZXdDb250YWN0TGlzdERhdGEsICRzY29wZSwgJGh0dHApIHtcbiAgICAvL2RhdGEgdG8gY3JlYXRlIGEgbmV3IGNvbnRhY3QgbGlzdFxuXG5cbiAgICAkc2NvcGUubGlzdE5hbWUgPSB7fTtcblxuICAgICRzY29wZS5wb3B1bGF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZSBsaXN0OiBcIiArIHNjb3BlLmxpc3ROYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgICBuZXdDb250YWN0TGlzdERhdGEucG9wTGlzdCgpO1xuICAgICAgICAvL3ZhciBsaXN0RW5kID0ge1xuICAgICAgICAvLyAgICBcImxpc3RzXCI6IFtsaXN0TnVtXSxcbiAgICAgICAgLy8gICAgXCJjb2x1bW5fbmFtZXNcIjogW1xuICAgICAgICAvLyAgICBcIkVNQUlMXCIsXG4gICAgICAgIC8vICAgIFwiRklSU1QgTkFNRVwiLFxuICAgICAgICAvLyAgICBcIkxBU1QgTkFNRVwiLFxuICAgICAgICAvLyAgICBcIkNJVFlcIixcbiAgICAgICAgLy8gICAgXCJDT01QQU5ZIE5BTUVcIlxuICAgICAgICAvL119XG5cblxuICAgICAgICAkc2NvcGUubGlzdE5hbWU9e307XG4gICAgfTtcbn1dKTtcblxuIiwiXG4vL3JlZ2lzdGVyIGNvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCdyZWdpc3RlckN0cmwnLCBbICckc2NvcGUnLCAnJGh0dHAnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkbG9jYXRpb24pIHtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlZ2lzdGVyQ3RybFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyQ29udHJvbGxlciBzdWJtaXQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wb3N0KCcvcmVnaXN0ZXInLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9pbmRleFwiKVxuICAgICAgICAgICAgfSk7XG4gICAgfVxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ3Jlc2V0Q3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlZGl0IHBhc3N3b3JkOicsICRzY29wZS5mb3JtKTtcbiAgICAgICAgJGh0dHAucHV0KCcvYWRtaW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9pbmRleFwiKVxuICAgICAgICAgICAgfSk7XG4gICAgfVxufV0pO1xuIiwiYXBwLnNlcnZpY2UoJ3ZhbGlkU2VydmljZScsIFtmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgdmFsaWRhdGVJbnB1dCA9IGZ1bmN0aW9uICh0eXBlLCBpZCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwidmFsaWRhdGVJbnB1dCgpXCIpO1xuICAgICAgICAvLyBzdG9yZXMgdGhlIGZvcm0gYmVpbmcgY2FsbGVkIG9uXG4gICAgICAgIHZhciBwYXR0ZXJuO1xuICAgICAgICB2YXIgJG9iaiA9IChpZCkgPyAkKCcjJysgaWQpIDogZmFsc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKFwib2JqZWN0IGlzIFwiLCAkb2JqLCB0eXBlLCBpZCk7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJjaXR5XCI6XG4gICAgICAgICAgICBjYXNlIFwic3RhdGVcIjpcbiAgICAgICAgICAgICAgICAvLyBhbGxvd3MgYW5kIGFscGhhIGNoYXJzLCBhcyB3ZWxsIGFzIHdoaXRlIHNwYWNlIGFuZCBhIGZldyBleHRyYSBjaGFyc1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLXpcXHMsLictXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb3JwTmFtZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOystXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhZGRyZXNzXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87KzooKSUmLV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiemlwXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eWzAtOV17NX0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwaG9uZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXihbKF1bMC05XXszfVspXXxbMC05XXszfSlbXFxzXFwtLl0/WzAtOV17M31bXFxzXFwtLl0/WzAtOV17NH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibm90ZXNcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSY8PlxcW1xcXXt9XFwtPVwifGBcXFxcXFwvXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJleHRcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzOi1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14yMFswLTldezJ9Wy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImJpcnRoZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXigxOTlbMC05XXwyMFswLTldezJ9KVstXSgwWzEtOV18MVswLTJdKVstXSgwWzEtOV18WzEtMl1bMC05XXwzWzAxXSkkLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhbW91bnRcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bXFwkXT9bXFxkXSsoWy5dW1xcZF17Mn0pPyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImludmFsaWQgY2xhc3Mgc2VhcmNoXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHJlcXVpcmVkIG9yIHRyaW1tZWQgbGVuZ3RoIGlzIG5vdCAwLCB0aGVuIHZhbGlkYXRlIGluZm9cbiAgICAgICAgaWYoJG9iai5hdHRyKCdyZXF1aXJlZCcpIHx8ICRvYmoudmFsKCkudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIGNoZWNrcyBpZiB2YWx1ZSBtYXRjaGVzIHJlZ2V4IGZvciBmaWVsZCB0eXBlXG4gICAgICAgICAgICBpZighcGF0dGVybi50ZXN0KCRvYmoudmFsKCkudHJpbSgpKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGZhaWxzLCBhZGRzIGludmFsaWQgY2xhc3MgKGhpZ2hsaWdodGluZyksIGNoYW5nZXMgcGxhY2Vob2xkZXIgdG8gd2hhdCBzaG91bGQgYmUgZW50ZXJlZFxuICAgICAgICAgICAgICAgICRvYmouYWRkQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICRvYmouZGF0YSgnaW52YWxpZCcpKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgZmFpbGVkIHRlc3QnLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgcGFzc2VzLCByZW1vdmVzIGludmFsaWQgY2xhc3MsIHJlc2V0cyBwbGFjZWhvbGRlciB0byBkZWZhdWx0XG4gICAgICAgICAgICAgICAgJG9iai5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdwbGFjZWhvbGRlcicpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCAnIHBhc3NlZCB0ZXN0JywgcGF0dGVybik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWRhdGVJbnB1dDogdmFsaWRhdGVJbnB1dFxuICAgIH07XG59XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
>>>>>>> finalEdits
