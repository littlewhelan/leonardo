var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr","angular-momentjs"]);app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],o=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService","dateService","toastr",function(t,e,a,o,n,i,l,r){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={info:{},contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(e){r.error("Cancelled"),t.corp={info:{},contact:{},donations:[]},t.newDonation={},e.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){n.data.donations.forEach(function(t,e,a){a[e].date=l.fromDB(t.date)}),t.corp=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.corp}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.donations.length&&t.corp.donations.forEach(function(t,e,a){a[e].date=l.toDB(t.date)}),t.corp.id?i.validateForm(["EditCorpInfoForm","EditCorpContactForm"])?(console.log("update corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):console.log("Edit corp input tests failed"):i.validateForm(["AddCorpInfoForm","AddCorpContactForm"])?n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{},r.success("Corporation added!")},function(){r.error("Failed to add corporation")}):(r.error("Unauthorized character"),console.log("Add corp input tests failed"))},t.addDonation=function(){/^[0-9]+(.[0-9]{0,2})?$/.test(t.newDonation.amount)&&(console.log("donation",t.newDonation),t.corp.donations.push(t.newDonation),t.newDonation={},console.log("added donation",t.corp.donations))}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr","$rootScope",function(t,e,a,o,n,i){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}if("fam"==t.type){var o=a.makeDataCall("family","");o.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}if("corp"==t.type){var i=a.makeDataCall("company","");i.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)?n.success("Successfully deployed contact list."):n.error("Failed to deploy contact list.")},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],a.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,o){var n=e.defer();return console.log("this is in the make data call",a,o),t({method:"GET",url:"../createMailList",params:{type:a,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:a}}]),app.service("dateService",["MomentJS",function(t){var e="YYYY-MM-DD",a="M/D/YYYY",o=function(a){return t(a).format(e)},n=function(e){return t(e).format(a)};return{toDB:o,fromDB:n}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService","toastr","dateService",function(t,e,a,o,n,i,l,r){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(e){l.error("Cancelled"),t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},e.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){console.log(n.data),n.data.children.forEach(function(t,e,a){console.log("reformatted",r.fromDB(a[e].birthdate)),a[e].birthdate=r.fromDB(t.birthdate)}),n.data.donations.forEach(function(t,e,a){a[e].date=r.fromDB(t.date)}),t.family=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.children.length&&t.family.children.forEach(function(t,e,a){a[e].birthdate=r.toDB(t.birthdate)}),t.family.donations.length&&t.family.donations.forEach(function(t,e,a){a[e].date=r.toDB(t.date)}),console.log("Saving family, after toDB birthdates",t.family),t.family.id?i.validateForm(["EditFamInfoForm","EditFamEmerForm"])?(console.log("update family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):console.log("Edit family failed input tests"):i.validateForm(["AddFamInfoForm","AddFamEmerForm"])?n({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[],l.success("Family saved!")},function(){l.error("Failed to add family")}):(l.error("Unauthorized character"),console.log("Add family failed input tests"))},t.addChild=function(){t.newChild.firstName&&(console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1,l.success("Child updated!")):(t.family.children.push(t.newChild),l.success("Child added!")),t.newChild={})},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){/^[0-9]+(.[0-9]{0,2})?$/.test(t.newDonation.amount)&&(console.log("add donation",t.newDonation),t.family.donations.push(t.newDonation),t.newDonation={},console.log("added donation",t.family.donations))}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope","toastr",function(t,e,a,o,n,i){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),n.user=a.getUser(),o.path("/search")},function(){i.error("incorrect username or password")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],o=[],n=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),s(e),r(e)})},l=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return e(t),console.log("this is getElement1",o),o},r=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},s=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return e(t),console.log("this is getElements3",n),n},c={getKids:s,getAdults:r,getCompanies:l,makeDataCall:i,results:e,companies:o,adults:a,kids:n};return c}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,o){a.user=t.getUser(),a.user&&a.user.username&&o.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope","$rootScope","toastr",function(t,e,a,o){e.hide=function(){console.log("hide"),a.hide=!0},e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input,function(t){t===!0?(e.listname={},o.success("Successfully created list"),e.hide()):(console.log("failed to create list"),o.error("Failed to create list"))})}}]),app.service("newContactListData",["ContactListDataService","$http","$timeout",function(t,e,a){var o="",n=[];this.postList=function(t,a){console.log("did the name make it to the service? "+t),e.post("/newContactList",{name:t}).then(function(t){console.log(t.data),o=t.data,console.log("Id? ",o),a(!0)},function(t){console.log("failed to create",t),a(!1)})},this.popList=function(t){this.dataObject={importDataArray:n,listNum:o},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),i(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,o){return console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),!0},function(){return!1})};var i=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email||""],first_name:t.firstName||"",last_name:t.lastName||"",company_name:t.company||"",addresses:[{city:t.city||""}]},console.log(this.contactObject),n.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location","toastr",function(t,e,a,o){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index"),o.success("admin created")},function(){o.error("failed to add admin")})}}]),app.controller("resetCtrl",["$scope","$http","$location","authService","toastr",function(t,e,a,o,n){t.submit=function(){console.log("edit password:",t.form);var i=o.getUser();console.log("auth user",i);var l=t.form;l.id=i.id,l.username=i.username,console.log("prepared",l),e.put("/admin",l).then(function(t){console.log(t),n.success("password changed"),a.path("/index")},function(){n.error("failed to update password")})}}]),app.service("validService",[function(){var t=function(t,e){var a,o=e?$("#"+e):!1;switch(console.log("object is ",o,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]{0,28}/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]{0,75}/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]{0,50}/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]{0,250}/;break;case"ext":a=/^[a-zA-Z0-9\s:-]{0,15}$/;break;case"date":a=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[01])\/20[0-9]{2}$/;break;case"birthdate":a=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[01])\/((199[0-9]|20)[0-9]{2})$/;break;case"amount":a=/^([\$]?[\d]+([.][\d]{2})?){1,10}$/;break;case"username":case"password":a=/^([a-z]+[A-Z]+[0-9]+){8,20}$/;break;case"search":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]{0,75}$/;break;case"age":a=/^[0-9]{1,2}$/;break;default:return console.log("invalid class search"),!1}return o.attr("required")||o.val()?!a.test(o.val().trim())||0==o.val().trim().length&&o.attr("required")?(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",a),!1):(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",a),!0):void 0},e=function(e){var a=!0;return e.forEach(function(e,o,n){$("#"+e+" .js-validate").each(function(){0==t($(this).data("type"),$(this).attr("id"))&&(console.log($(this).attr("id")+" failed the test "+$(this).data("type")+" entered info: "+$(this).val()),a=!1)})}),a};return{validateInput:t,validateForm:e}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udHJvbGxlci5qcyIsImNyZWF0ZUxpc3RTZXJ2aWNlLmpzIiwiZGF0ZVNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSIsIiRxIiwiJGxvY2F0aW9uIiwiYXV0aFNlcnZpY2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsImlzQXV0aGVkIiwiQXV0aG9yaXphdGlvbiIsImdldFRva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJwYXRoIiwicmVzcG9uc2VFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJyZWplY3QiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInRoaXMiLCJwYXJzZUp3dCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsInNhdmVUb2tlbiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwibG9nb3V0IiwiZ2V0VXNlciIsIiRzY29wZSIsIiR1aWJNb2RhbCIsIiRsb2ciLCJSZXN1bHRTZXJ2aWNlIiwiJGh0dHAiLCJ2YWxpZFNlcnZpY2UiLCJkYXRlU2VydmljZSIsInRvYXN0ciIsInZhbGlkYXRlSW5wdXQiLCJjb21wYW5pZXMiLCJjb3JwIiwiaW5mbyIsImNvbnRhY3QiLCJkb25hdGlvbnMiLCJuZXdEb25hdGlvbiIsImFuaW1hdGlvbnNFbmFibGVkIiwiY2xlYXJDb3JwIiwiZm9ybXNBcnJheSIsImVycm9yIiwiZm9yRWFjaCIsInYiLCIkIiwiZWFjaCIsInJlbW92ZUNsYXNzIiwiYXR0ciIsImRhdGEiLCJvcGVuIiwic2l6ZSIsImlkIiwibWV0aG9kIiwidXJsIiwidGhlbiIsImkiLCJhIiwiZGF0ZSIsImZyb21EQiIsIm1vZGFsSW5zdGFuY2UiLCJhbmltYXRpb24iLCJzY29wZSIsInJlc29sdmUiLCJpdGVtcyIsInJlc3VsdCIsInNlbGVjdGVkSXRlbSIsInNlbGVjdGVkIiwidG9nZ2xlQW5pbWF0aW9uIiwic2F2ZSIsImxlbmd0aCIsInRvREIiLCJ2YWxpZGF0ZUZvcm0iLCJyZXMiLCJzdWNjZXNzIiwiYWRkRG9uYXRpb24iLCJ0ZXN0IiwiYW1vdW50IiwicHVzaCIsIkNvbnRhY3RMaXN0RGF0YVNlcnZpY2UiLCJuZXdDb250YWN0TGlzdERhdGEiLCIkcm9vdFNjb3BlIiwidHlwZSIsImFnZSIsInppcCIsImVtYWlscyIsImluY2x1ZGVkRW1haWxzIiwidG90YWxEaXNwbGF5ZWQiLCJ0b3RhbFJlc3VsdHMiLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwiZmFtIiwiY29tcCIsInBvcHVsYXRlTGlzdCIsInBvcExpc3QiLCJsb2FkTW9yZSIsInNob3dBbGwiLCJjaGVja0FsbCIsImV2ZW50IiwiJGJ1dHRvbiIsImVsZW1lbnQiLCJ0YXJnZXQiLCJ2YWwiLCJjb3B5IiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwibW9tZW50IiwiZGJGb3JtYXQiLCJ1aUZvcm1hdCIsInRvRGJGb3JtYXQiLCJmb3JtYXQiLCJmcm9tRGJGb3JtYXQiLCJhZHVsdHMiLCJraWRzIiwiZmFtaWx5IiwiYWR1bHRPbmUiLCJhZHVsdFR3byIsImVtZXJnZW5jeSIsImNoaWxkcmVuIiwibmV3Q2hpbGQiLCJjbGVhckZhbWlseSIsImJpcnRoZGF0ZSIsImFkZENoaWxkIiwiZmlyc3ROYW1lIiwiZWRpdGluZ0NoaWxkIiwiZWRpdENoaWxkIiwiaW5kZXgiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImNsZWFyQ2hpbGQiLCJsYXN0TmFtZSIsInNjaG9vbCIsIm5vdGVzIiwic3VibWl0IiwicG9zdCIsImZvcm0iLCJ1c2VyIiwiZm9ybUlucHV0Iiwic2VhcmNoQnRuIiwicmVzdWx0cyIsImdldENvbXBhbmllcyIsImdldEtpZHMiLCJnZXRBZHVsdHMiLCJhcnJheSIsImdldEVsZW1lbnQxIiwiZ2V0RWxlbWVudDIiLCJnZXRFbGVtZW50MyIsInB1YmxpY0FwaSIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJjbG9zZSIsIml0ZW0iLCJjYW5jZWwiLCJkaXNtaXNzIiwidXNlcm5hbWUiLCJoaWRlIiwibGlzdG5hbWUiLCJjcmVhdGVMaXN0IiwiaW5wdXQiLCJwb3N0TGlzdCIsIiR0aW1lb3V0IiwibGlzdE51bSIsImltcG9ydERhdGFBcnJheSIsIm5hbWUiLCJjYiIsImxpc3QiLCJkYXRhT2JqZWN0IiwiZ2V0Q2hlY2tlZCIsImwiLCJvYmplY3QiLCJjb250YWN0T2JqZWN0IiwiZW1haWxfYWRkcmVzc2VzIiwiZW1haWwiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueSIsImFkZHJlc3NlcyIsImNpdHkiLCJsaXN0TmFtZSIsInRlbXBVc2VyIiwicHV0IiwicGF0dGVybiIsIiRvYmoiLCJ0cmltIiwiYWRkQ2xhc3MiLCJmb3JtcyIsInBhc3Mi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QUEseUJBQ0EsRUFLQSxNQUFBNkwsR0FBQTNJLEtBQUEsYUFBQTJJLEVBQUFwRixPQUVBbUYsRUFBQTlHLEtBQUErRyxFQUFBcEYsTUFBQXFGLFNBQUEsR0FBQUQsRUFBQXBGLE1BQUFxRixPQUFBdEgsUUFBQXFILEVBQUEzSSxLQUFBLGFBRUEySSxFQUFBRSxTQUFBLFdBQUE3SSxLQUFBLGNBQUEySSxFQUFBMUksS0FBQSxZQUFBc0QsSUFBQSxJQUNBMUcsUUFBQUMsSUFBQW9GLEVBQUEsZUFBQXdHLElBQ0EsSUFHQUMsRUFBQTVJLFlBQUEsV0FBQUMsS0FBQSxjQUFBMkksRUFBQTFJLEtBQUEsZ0JBQ0FwRCxRQUFBQyxJQUFBb0YsRUFBQSxlQUFBd0csSUFDQSxHQVhBLFFBZ0JBbEgsRUFBQSxTQUFBc0gsR0FDQSxHQUFBQyxJQUFBLENBU0EsT0FSQUQsR0FBQW5KLFFBQUEsU0FBQUMsRUFBQVksRUFBQUMsR0FDQVosRUFBQSxJQUFBRCxFQUFBLGlCQUFBRSxLQUFBLFdBQ0EsR0FBQWQsRUFBQWEsRUFBQTNDLE1BQUErQyxLQUFBLFFBQUFKLEVBQUEzQyxNQUFBOEMsS0FBQSxTQUNBbkQsUUFBQUMsSUFBQStDLEVBQUEzQyxNQUFBOEMsS0FBQSxNQUFBLG9CQUFBSCxFQUFBM0MsTUFBQStDLEtBQUEsUUFBQSxrQkFBQUosRUFBQTNDLE1BQUFxRyxPQUNBd0YsR0FBQSxPQUlBQSxFQUdBLFFBQ0EvSixjQUFBQSxFQUNBd0MsYUFBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbGVvJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnLCAnY2hlY2tsaXN0LW1vZGVsJywgJ3RvYXN0cicsICdhbmd1bGFyLW1vbWVudGpzJ10pO1xuXG5cbmFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgICAgICB3aGVuKCcvJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2xvZ2luLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9zZWFyY2gnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL3NlYXJjaC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvcmVnaXN0ZXInLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RMaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0TGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkZmFtaWx5Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9hZGRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0RmFtaWx5Q3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2FkZGNvcnAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0Q29ycEN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9jb250YWN0bGlzdCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvY29udGFjdGxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgb3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAnL3NlYXJjaCdcbiAgICAgICAgICAgIH0pO1xuICAgIH1dKTtcblxuXG5cblxuIiwiYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSkiLCJhcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdykge1xuXG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTsiLCIvL2VkaXQgY29ycG9yYXRpb24gbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0Q29ycEN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsICdkYXRlU2VydmljZScsICd0b2FzdHInLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwLCB2YWxpZFNlcnZpY2UsIGRhdGVTZXJ2aWNlLCB0b2FzdHIpIHtcblxuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgY29tcGFuaWVzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmNvbXBhbmllcyA9IFJlc3VsdFNlcnZpY2UuY29tcGFuaWVzO1xuXHQkc2NvcGUuY29ycCA9IHtcblx0XHRpbmZvOiB7fSxcblx0XHRjb250YWN0OiB7fSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXG5cdCRzY29wZS5jbGVhckNvcnAgPSBmdW5jdGlvbiAoZm9ybXNBcnJheSkge1xuXHRcdHRvYXN0ci5lcnJvcignQ2FuY2VsbGVkJyk7XG5cdFx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0XHRpbmZvOnt9LFxuXHRcdFx0Y29udGFjdDp7fSxcblx0XHRcdGRvbmF0aW9uczpbXVxuXHRcdH07XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdFx0Zm9ybXNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG5cdFx0XHQkKCcjJysgdiArJyAuanMtdmFsaWRhdGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJCh0aGlzKS5kYXRhKCdwbGFjZWhvbGRlcicpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2NvcnAgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2NvcnBvcmF0aW9uJyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHRyZXNwb25zZS5kYXRhLmRvbmF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpLCBhKSB7XG5cdFx0XHRcdGFbaV0uZGF0ZSA9IGRhdGVTZXJ2aWNlLmZyb21EQih2LmRhdGUpO1xuXHRcdFx0fSk7XG5cblx0XHRcdCRzY29wZS5jb3JwID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuY29ycDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgY29ycFxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5jb3JwKTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXG5cdFx0Ly8gY2hlY2sgZm9yIGRvbmF0aW9uLCBydW4gdG9EQiBmb3JtYXR0aW5nIGJlZm9yZSBzZW5kaW5nXG5cdFx0aWYoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKHYsIGksIGEpIHtcblx0XHRcdFx0YVtpXS5kYXRlID0gZGF0ZVNlcnZpY2UudG9EQih2LmRhdGUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuY29ycC5pZCkge1xuXHRcdFx0aWYodmFsaWRTZXJ2aWNlLnZhbGlkYXRlRm9ybShbXCJBZGRDb3JwSW5mb0Zvcm1cIiwgXCJBZGRDb3JwQ29udGFjdEZvcm1cIl0pKSB7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5jb250YWN0ID0gKHJlcy5kYXRhLmNvbnRhY3QpID8gcmVzLmRhdGEuY29udGFjdCA6IHt9O1xuXHRcdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdDb3Jwb3JhdGlvbiBhZGRlZCEnKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGFkZCBjb3Jwb3JhdGlvbicpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdVbmF1dGhvcml6ZWQgY2hhcmFjdGVyJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiQWRkIGNvcnAgaW5wdXQgdGVzdHMgZmFpbGVkXCIpO1xuXHRcdFx0fVxuXHRcdH1lbHNlIHtcblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiRWRpdENvcnBJbmZvRm9ybVwiLCBcIkVkaXRDb3JwQ29udGFjdEZvcm1cIl0pKSB7XG5cdFx0XHRcdC8vIGluc2VydCBjb3JwIC0gaGFzIG5vIGlkXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwidXBkYXRlIGNvcnBcIiwgJHNjb3BlLmNvcnApO1xuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmluZm8gPSAocmVzLmRhdGEuaW5mbykgPyByZXMuZGF0YS5pbmZvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVkaXQgY29ycCBpbnB1dCB0ZXN0cyBmYWlsZWRcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gcmVnZXggY2hlY2sgbmVlZGVkIGZvciBhdXRvIGFkZCBpZiBjbGljayBzYXZlIGluc3RlYWQgb2YgYWRkIGZpcnN0XG5cdFx0aWYoL15bMC05XSsoLlswLTldezAsMn0pPyQvLnRlc3QoJHNjb3BlLm5ld0RvbmF0aW9uLmFtb3VudCkpIHtcblx0XHRcdC8vdmFyIHRlbXAgPSAkc2NvcGUubmV3RG9uYXRpb247XG5cdFx0XHQvL3RlbXAuZGF0ZSA9IGRhdGVTZXJ2aWNlLnRvREIodGVtcC5kYXRlKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiZG9uYXRpb25cIiwgJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucy5wdXNoKCRzY29wZS5uZXdEb25hdGlvbik7XG5cdFx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0XHRcdGNvbnNvbGUubG9nKFwiYWRkZWQgZG9uYXRpb25cIiwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0XHR9XG5cdH07XG5cbn1dKTsiLCJhcHAuY29udHJvbGxlcignY3JlYXRlTGlzdFNlYXJjaCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnbmV3Q29udGFjdExpc3REYXRhJywgJ3RvYXN0cicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsbmV3Q29udGFjdExpc3REYXRhLCB0b2FzdHIsICRyb290U2NvcGUpIHtcbiAgICAkc2NvcGUudHlwZSA9e307XG4gICAgJHNjb3BlLmFnZT17fTtcbiAgICAkc2NvcGUuemlwPXt9O1xuXHQvLyBpbmNsdWRlIGxpc3QgbmVlZHMgdG8gYmUgd2l0aGluIGFuIG9iamVjdCBkdWUgdG8gdGhlIGNoZWNrYm94ZXMgYmVpbmcgaW4gYSB0YWJsZVxuXHQkc2NvcGUuZW1haWxzID0ge307XG4gICAgJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHQkc2NvcGUuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gNTA7XG5cdCRzY29wZS50b3RhbFJlc3VsdHMgPSAwO1xuICAgIC8vJHJvb3RTY29wZS5oaWRlID0gdHJ1ZTtcblxuXG5cbiAgICAkc2NvcGUuZW1haWxMaXN0ID0gWyBdO1xuICAgICRzY29wZS5zZWFyY2hMaXN0QnRuID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5lbWFpbExpc3QgPSBbXTtcblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAgLS0gd2lsbCBzZWFyY2ggYnkgemlwXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnemlwQ2snKSB7XG5cbiAgICAgICAgICAgIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCd6aXAnLCAkc2NvcGUuemlwLmRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5lbWFpbExpc3QpO1xuXHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdMb2FkZWQgJysgJHNjb3BlLnRvdGFsUmVzdWx0cyArJyByZXN1bHRzJyk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdWx0cycpO1xuXHRcdFx0XHR9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9USElTIFdPUktTIC0gd2lsbCBzZWFyY2ggYnkgYWdlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnYWdlQ2snKSB7XG4gICAgICAgICAgICB2YXIgYWdlID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2FnZScsICRzY29wZS5hZ2UuZGF0YSk7XG4gICAgICAgICAgICBhZ2UudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcblx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCAnKyAkc2NvcGUudG90YWxSZXN1bHRzICsnIHJlc3VsdHMnKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCByZXN1bHRzJyk7XG5cdFx0XHR9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtLWdldCBhbGwgZmFtaWxpZXMgaWYgZmFtIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdmYW0nKSB7XG4gICAgICAgICAgICB2YXIgZmFtID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2ZhbWlseScsICcnKTtcbiAgICAgICAgICAgIGZhbS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTG9hZGVkICcrICRzY29wZS50b3RhbFJlc3VsdHMgKycgcmVzdWx0cycpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3VsdHMnKTtcblx0XHRcdH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9nZXQgYWxsIGNvcnAgaWYgY29ycCBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnY29ycCcpIHtcbiAgICAgICAgICAgIHZhciBjb21wID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2NvbXBhbnknLCAnJyk7XG4gICAgICAgICAgICBjb21wLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdMb2FkZWQgJysgJHNjb3BlLnRvdGFsUmVzdWx0cyArJyByZXN1bHRzJyk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdWx0cycpO1xuXHRcdFx0fSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2VtcHR5IHRoZSBzZWFyY2ggYm94XG4gICAgICAgJHNjb3BlLnR5cGU9e307XG4gICAgICAgICRzY29wZS5hZ2U9e307XG4gICAgICAgICRzY29wZS56aXA9e307XG5cbiAgICB9O1xuICAgICRzY29wZS5wb3B1bGF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2FsZXJ0KCd3b3JraW5nJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMpO1xuICAgICAgICBpZihuZXdDb250YWN0TGlzdERhdGEucG9wTGlzdCgkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzKSkge1xuXHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseSBkZXBsb3llZCBjb250YWN0IGxpc3QuJyk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gZGVwbG95IGNvbnRhY3QgbGlzdC4nKTtcblx0XHR9XG4gIH07XG5cblx0JHNjb3BlLmxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50b3RhbERpc3BsYXllZCArPSA1MDtcblx0fTtcblxuXHQkc2NvcGUuc2hvd0FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgPSAkc2NvcGUudG90YWxSZXN1bHRzO1xuXHR9O1xuXG5cdCRzY29wZS5jaGVja0FsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyICRidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoZXZlbnQudGFyZ2V0KTtcblx0XHRpZigkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzLmxlbmd0aCA9PSAkc2NvcGUudG90YWxSZXN1bHRzKSB7XG5cdFx0XHQkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzID0gW107XG5cdFx0XHQkYnV0dG9uLnZhbChcIkNoZWNrIEFsbFwiKTtcblx0XHR9ZWxzZXtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHQkYnV0dG9uLnZhbChcIlVuY2hlY2sgQWxsXCIpO1xuXHRcdH1cblx0fTtcbn1dKTtcblxuXG4iLCJhcHAuZmFjdG9yeSgnQ29udGFjdExpc3REYXRhU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlRGF0YUNhbGwodHlwZSwgcGFzc2VkRGF0YSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiB0aGUgbWFrZSBkYXRhIGNhbGwnLCB0eXBlLCBwYXNzZWREYXRhKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL2NyZWF0ZU1haWxMaXN0JyxcbiAgICAgICAgICAgIHBhcmFtczoge3R5cGU6IHR5cGUsIHNlYXJjaDogcGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbFxuICAgIH07XG5cblxufV0pOyIsImFwcC5zZXJ2aWNlKCdkYXRlU2VydmljZScsIFsnTW9tZW50SlMnLCBmdW5jdGlvbiAobW9tZW50KSB7XG5cdHZhciBkYkZvcm1hdCA9IFwiWVlZWS1NTS1ERFwiO1xuXHR2YXIgdWlGb3JtYXQgPSBcIk0vRC9ZWVlZXCI7XG5cblx0dmFyIHRvRGJGb3JtYXQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuXHRcdHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KGRiRm9ybWF0KTtcblx0fTtcblxuXHR2YXIgZnJvbURiRm9ybWF0ID0gZnVuY3Rpb24gKGRhdGUpIHtcblx0XHRyZXR1cm4gbW9tZW50KGRhdGUpLmZvcm1hdCh1aUZvcm1hdCk7XG5cdH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0b0RCOiB0b0RiRm9ybWF0LFxuXHRcdGZyb21EQjogZnJvbURiRm9ybWF0XG4gICAgfTtcbn1dKTsiLCIvL2VkaXQgZmFtaWx5IG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdEZhbWlseUN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsICd0b2FzdHInLCdkYXRlU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSwgdG9hc3RyLCBkYXRlU2VydmljZSkge1xuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgYWR1bHRzIGFuZCBraWRzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmFkdWx0cyA9IFJlc3VsdFNlcnZpY2UuYWR1bHRzO1xuXHQkc2NvcGUua2lkcyA9IFJlc3VsdFNlcnZpY2Uua2lkcztcblx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRhZHVsdE9uZToge30sXG5cdFx0YWR1bHRUd286IHt9LFxuXHRcdGVtZXJnZW5jeToge30sXG5cdFx0Y2hpbGRyZW46IFtdLFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXG5cdCRzY29wZS5jbGVhckZhbWlseSA9IGZ1bmN0aW9uIChmb3Jtc0FycmF5KSB7XG5cdFx0dG9hc3RyLmVycm9yKCdDYW5jZWxsZWQnKTtcblx0XHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdFx0YWR1bHRPbmU6IHt9LFxuXHRcdFx0YWR1bHRUd286IHt9LFxuXHRcdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRcdGNoaWxkcmVuOiBbXSxcblx0XHRcdGRvbmF0aW9uczogW11cblx0XHR9O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHRcdGZvcm1zQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAodikge1xuXHRcdFx0JCgnIycrIHYgKycgLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICQodGhpcykuZGF0YSgncGxhY2Vob2xkZXInKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXG5cblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZmFtaWx5IGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9mYW1pbHknLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcblx0XHRcdHJlc3BvbnNlLmRhdGEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAodiwgaSwgYSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInJlZm9ybWF0dGVkXCIsIGRhdGVTZXJ2aWNlLmZyb21EQihhW2ldLmJpcnRoZGF0ZSkpO1xuXHRcdFx0XHRhW2ldLmJpcnRoZGF0ZSA9IGRhdGVTZXJ2aWNlLmZyb21EQih2LmJpcnRoZGF0ZSk7XG5cdFx0XHR9KTtcblx0XHRcdHJlc3BvbnNlLmRhdGEuZG9uYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKHYsIGksIGEpIHtcblx0XHRcdFx0YVtpXS5kYXRlID0gZGF0ZVNlcnZpY2UuZnJvbURCKHYuZGF0ZSk7XG5cdFx0XHR9KTtcblx0XHRcdCRzY29wZS5mYW1pbHkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZhbWlseTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGZhbWlseVxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5mYW1pbHkpO1xuXG5cdFx0Ly8gY2hlY2sgZm9yIGNoaWxkcmVuLCBydW4gdG9EQiBmb3JtYXR0aW5nIGJlZm9yZSBzZW5kaW5nXG5cdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAodiwgaSwgYSkge1xuXHRcdFx0XHRhW2ldLmJpcnRoZGF0ZSA9IGRhdGVTZXJ2aWNlLnRvREIodi5iaXJ0aGRhdGUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gY2hlY2sgZm9yIGRvbmF0aW9uLCBydW4gdG9EQiBmb3JtYXR0aW5nIGJlZm9yZSBzZW5kaW5nXG5cdFx0aWYoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpLCBhKSB7XG5cdFx0XHRcdGFbaV0uZGF0ZSA9IGRhdGVTZXJ2aWNlLnRvREIodi5kYXRlKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUubG9nKFwiU2F2aW5nIGZhbWlseSwgYWZ0ZXIgdG9EQiBiaXJ0aGRhdGVzXCIsICRzY29wZS5mYW1pbHkpO1xuXG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHBvc3RcblxuXHRcdGlmKCEkc2NvcGUuZmFtaWx5LmlkKSB7XG5cblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiQWRkRmFtSW5mb0Zvcm1cIiwgXCJBZGRGYW1FbWVyRm9ybVwiXSkpIHtcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdGYW1pbHkgc2F2ZWQhJyk7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBhZGQgZmFtaWx5Jyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ1VuYXV0aG9yaXplZCBjaGFyYWN0ZXInKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBZGQgZmFtaWx5IGZhaWxlZCBpbnB1dCB0ZXN0c1wiKTtcblx0XHRcdH1cblx0XHR9ZWxzZSB7XG5cdFx0XHRpZih2YWxpZFNlcnZpY2UudmFsaWRhdGVGb3JtKFtcIkVkaXRGYW1JbmZvRm9ybVwiLCBcIkVkaXRGYW1FbWVyRm9ybVwiXSkpIHtcblx0XHRcdFx0Ly8gdXBkYXRlIGZhbWlseSAtIGhhcyBubyBpZFxuXHRcdFx0XHRjb25zb2xlLmxvZyhcInVwZGF0ZSBmYW1pbHlcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFZGl0IGZhbWlseSBmYWlsZWQgaW5wdXQgdGVzdHNcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGZvciBhcHBlbmRpbmcgY2hpbGRyZW4gdG8gbW9kZWwgYmVmb3JlIHNhdmluZyBuZXcgZmFtaWx5XG5cdCRzY29wZS5hZGRDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyByZWdleCBjaGVjayBuZWVkZWQgZm9yIGF1dG8gYWRkIGlmIGNsaWNrIHNhdmUgaW5zdGVhZCBvZiBhZGQgZmlyc3Rcblx0XHRpZigkc2NvcGUubmV3Q2hpbGQuZmlyc3ROYW1lKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImNoaWxkIGFkZGVkXCIsICRzY29wZS5uZXdDaGlsZCwgJHNjb3BlLmZhbWlseS5jaGlsZHJlbik7XG5cdFx0XHQvLyBpZiB0cnVlLCB0aGVuIHVwZGF0ZSB0aGF0IGluZGV4XG5cdFx0XHRpZigkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW5bJHNjb3BlLmVkaXRpbmdDaGlsZF0gPSAkc2NvcGUubmV3Q2hpbGQ7XG5cdFx0XHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0NoaWxkIHVwZGF0ZWQhJyk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdC8vIGVsc2UgcHVzaCB0byBhcnJheVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnB1c2goJHNjb3BlLm5ld0NoaWxkKTtcblx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0NoaWxkIGFkZGVkIScpO1xuXHRcdFx0fVxuXHRcdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGVkaXQgY2hpbGQgb24gdGhlIGFkZCBjaGlsZHJlbiB0YWIgb2YgYWRkIGZhbWlseVxuXHQkc2NvcGUuZWRpdENoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Ly8gc2F2ZSBpbmRleCBvZiBjaGlsZCBlZGl0aW5nXG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGluZGV4O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9ICRzY29wZS5mYW1pbHkuY2hpbGRyZW5baW5kZXhdO1xuXHR9O1xuXG5cdCRzY29wZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gcmVtb3ZlIGNoaWxkIGluZGV4XCIsIGluZGV4LCBcIiBlZGl0IFwiLCAkc2NvcGUuZWRpdGluZ0NoaWxkKTtcblx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XG5cdFx0aWYoaW5kZXggPT0gJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJlZGl0IG1hdGNoXCIpO1xuXHRcdFx0JHNjb3BlLmNsZWFyQ2hpbGQoKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIm5vIGVkaXQgbWF0Y2hcIik7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGNsZWFycyB0ZXh0IGJveGVzIGluIGFkZCBmYW1pbHktPmNoaWxkcmVuIHRhYlxuXHQkc2NvcGUuY2xlYXJDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIGNsZWFyIGNoaWxkXCIpO1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHtcblx0XHRcdGZpcnN0TmFtZTogJycsXG5cdFx0XHRsYXN0TmFtZTogJycsXG5cdFx0XHRiaXJ0aGRhdGU6ICcnLFxuXHRcdFx0c2Nob29sOiAnJyxcblx0XHRcdG5vdGVzOiAnJ1xuXHRcdH07XG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHR9O1xuXG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cbi8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Ly9jb25zb2xlLmxvZyhcImFkZCBkb25hdGlvblwiLCAkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdC8vIHJlZ2V4IGNoZWNrIG5lZWRlZCBmb3IgYXV0byBhZGQgaWYgY2xpY2sgc2F2ZSBpbnN0ZWFkIG9mIGFkZCBmaXJzdFxuXHRcdGlmKC9eWzAtOV0rKC5bMC05XXswLDJ9KT8kLy50ZXN0KCRzY29wZS5uZXdEb25hdGlvbi5hbW91bnQpKSB7XG5cdFx0XHQvL3ZhciB0ZW1wID0gJHNjb3BlLm5ld0RvbmF0aW9uO1xuXHRcdFx0Ly90ZW1wLmRhdGUgPSBkYXRlU2VydmljZS50b0RCKHRlbXAuZGF0ZSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcImFkZCBkb25hdGlvblwiLCAkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdFx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsICRzY29wZS5mYW1pbHkuZG9uYXRpb25zKTtcblx0XHR9XG5cdH07XG5cblx0Ly8vLyBwcmV2ZW50IGFjY2lkZW50YWwgYmFja3Ncblx0Ly8kc2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oIGV2ZW50LCBvbGRVcmwgKSB7XG5cdC8vXHRjb25zb2xlLmxvZyhcIm9sZCB1cmw6IFwiLCBvbGRVcmwpO1xuXHQvL1x0aWYoLyhhZGRmYW1pbHkpLy50ZXN0KG9sZFVybCkpIHtcblx0Ly9cdFx0dmFyIGFuc3dlciA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmUgdGhpcyBwYWdlP1wiKTtcblx0Ly9cdFx0aWYgKCFhbnN3ZXIpIHtcblx0Ly9cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQvL1x0XHR9XG5cdC8vXHR9XG5cdC8vfSk7XG5cbn1dKTsiLCIvL2NvbnRyb2xsZXJzIGZvciBsb2dpblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgJ3RvYXN0cicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUsIHRvYXN0cil7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9zZWFyY2hcIik7XG4gICAgICAgICAgICB9LGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdpbmNvcnJlY3QgdXNlcm5hbWUgb3IgcGFzc3dvcmQnKVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH07XG59XSk7XG4iLCJcbi8vVGhpcyBzaG91bGQgZ2V0IHRoZSBzZWFyY2ggaXRlbVxuYXBwLmNvbnRyb2xsZXIoJ3NlYXJjaEZ1bmN0aW9uJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnUmVzdWx0U2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBSZXN1bHRTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcblxuICAgICRzY29wZS5zZWFyY2hCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICBSZXN1bHRTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgkc2NvcGUuZm9ybUlucHV0LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyB0aGUgaW5wdXQgdGV4dCcsICRzY29wZS5mb3JtSW5wdXQpO1xuICAgICAgICAvL2VtcHR5cyB0aGUgc2VhcmNoIGJveFxuICAgICAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuICAgIH07XG5cbn1dKTtcbiIsIi8vVGhpcyBzZXJ2aWNlIHNob3VsZCBwYXNzIGRhdGEgYmV0d2VlbiBjb250cm9sbGVyc1xuYXBwLmZhY3RvcnkoJ1Jlc3VsdFNlcnZpY2UnLCBbJyRodHRwJyxmdW5jdGlvbigkaHR0cCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIGFkdWx0cyA9IFtdO1xuICAgIHZhciBjb21wYW5pZXMgPSBbXTtcbiAgICB2YXIga2lkcyA9IFtdO1xuXG4gICAgdmFyIG1ha2VEYXRhQ2FsbCA9IGZ1bmN0aW9uKHBhc3NlZERhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9zZWFyY2gnLFxuICAgICAgICAgICAgcGFyYW1zOntzZWFyY2g6cGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZ2V0Q29tcGFuaWVzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0S2lkcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEFkdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgZ2V0Q29tcGFuaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQxID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGNvbXBhbmllcy5zcGxpY2UoMCxjb21wYW5pZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY29tcGFueScpXG4gICAgICAgICAgICAgICAgY29tcGFuaWVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGdldEVsZW1lbnQxKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudDEnLGNvbXBhbmllcyk7XG4gICAgICAgIHJldHVybiBjb21wYW5pZXNcbiAgICB9O1xuXG4gICAgdmFyIGdldEFkdWx0cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBhZHVsdHMuc3BsaWNlKDAsYWR1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2FkdWx0JylcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MihhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIGdldEVsZW1lbnQyJywgYWR1bHRzKTtcbiAgICAgICAgcmV0dXJuIGFkdWx0c1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBraWRzLnNwbGljZSgwLGtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICBraWRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MyhhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnRzMycsIGtpZHMpO1xuICAgICAgICByZXR1cm4ga2lkc1xuICAgIH07XG5cbiAgICAvL3B1YmxpY1xuICAgIHZhciBwdWJsaWNBcGkgPSB7XG4gICAgICAgIGdldEtpZHM6IGdldEtpZHMsXG4gICAgICAgIGdldEFkdWx0czogZ2V0QWR1bHRzLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGwsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNvbXBhbmllczogY29tcGFuaWVzLFxuICAgICAgICBhZHVsdHM6IGFkdWx0cyxcbiAgICAgICAga2lkczoga2lkc1xuICAgIH07XG4gICAgcmV0dXJuIHB1YmxpY0FwaTtcbn1dKTsiLCIvLyBQbGVhc2Ugbm90ZSB0aGF0ICRtb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxuLy8gSXQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAkdWliTW9kYWwgc2VydmljZSB1c2VkIGFib3ZlLlxuXG4vL25lZWRlZCBmb3IgbW9kYWw/PyBwcmV0dHkgc3VyZVxuYXBwLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJyxbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgIH1cbn1dKTtcbiIsIi8vIEFqYXggZm9yIGNyZWF0aW5nIHRoZSBjb250YWN0IGxpc3QgaW4gY29uc3RhbnQgY29udGFjdFxuYXBwLmNvbnRyb2xsZXIoJ25ld0NvbnRhY3RMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCAnJHJvb3RTY29wZScsICd0b2FzdHInLCBmdW5jdGlvbihuZXdDb250YWN0TGlzdERhdGEsICRzY29wZSwgJHJvb3RTY29wZSwgdG9hc3RyKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2hpZGUnKTtcbiAgICAgICAgJHJvb3RTY29wZS5oaWRlID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxpc3RuYW1lID0ge307XG5cbiAgICAkc2NvcGUuY3JlYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgbGlzdCBuYW1lIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvc3RMaXN0KCRzY29wZS5saXN0bmFtZS5pbnB1dCwgZnVuY3Rpb24gKHN0YXR1cykge1xuXHRcdFx0aWYoc3RhdHVzID09PSB0cnVlKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXHRcdFx0XHQkc2NvcGUubGlzdG5hbWU9e307XG5cdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdTdWNjZXNzZnVsbHkgY3JlYXRlZCBsaXN0Jyk7XG5cdFx0XHRcdCRzY29wZS5oaWRlKCk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZmFpbGVkIHRvIGNyZWF0ZSBsaXN0XCIpO1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbGlzdCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cbiAgICB9O1xufV0pO1xuXG5cbiIsIlxuYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsICckdGltZW91dCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgbGlzdE51bSA9IFwiXCI7XG4gICAgICAgIHZhciBpbXBvcnREYXRhQXJyYXkgPVtdO1xuXG4gICAgICAgIHRoaXMucG9zdExpc3QgPSBmdW5jdGlvbiAobmFtZSwgY2IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlkIHRoZSBuYW1lIG1ha2UgaXQgdG8gdGhlIHNlcnZpY2U/IFwiICsgbmFtZSApO1xuXG5cdFx0XHQvLyR0aW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7fSwgNTAwMCk7XG5cdFx0XHQvL3JldHVybiB0cnVlO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL25ld0NvbnRhY3RMaXN0Jywge25hbWU6IG5hbWV9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGxpc3ROdW0gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSWQ/IFwiLCBsaXN0TnVtKTtcblx0XHRcdFx0Y2IodHJ1ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZhaWxlZCB0byBjcmVhdGVcIiwgZGF0YSk7IC8vZXJyb3Jcblx0XHRcdFx0Ly9yZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGNiKGZhbHNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVtYWlsIHx8ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IG9iamVjdC5sYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IG9iamVjdC5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBvYmplY3QuY2l0eSB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2godGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAndG9hc3RyJywgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sIHRvYXN0cikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpO1xuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKFwiYWRtaW4gY3JlYXRlZFwiKTtcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ2ZhaWxlZCB0byBhZGQgYWRtaW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsICd0b2FzdHInLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSwgdG9hc3RyKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuXHRcdHZhciB0ZW1wVXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblx0XHRjb25zb2xlLmxvZyhcImF1dGggdXNlclwiLCB0ZW1wVXNlcik7XG5cdFx0Ly8gYWRkIGluIGlkLCB1c2VybmFtZVxuXHRcdHZhciB1c2VyID0gJHNjb3BlLmZvcm07XG5cdFx0dXNlci5pZCA9IHRlbXBVc2VyLmlkO1xuXHRcdHVzZXIudXNlcm5hbWUgPSB0ZW1wVXNlci51c2VybmFtZTtcblx0XHRjb25zb2xlLmxvZyhcInByZXBhcmVkXCIsIHVzZXIpO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsIHVzZXIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ3Bhc3N3b3JkIGNoYW5nZWQnKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9pbmRleFwiKTtcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcignZmFpbGVkIHRvIHVwZGF0ZSBwYXNzd29yZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbn1dKTtcbiIsImFwcC5zZXJ2aWNlKCd2YWxpZFNlcnZpY2UnLCBbZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIHZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbiAodHlwZSwgaWQpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInZhbGlkYXRlSW5wdXQoKVwiKTtcbiAgICAgICAgLy8gc3RvcmVzIHRoZSBmb3JtIGJlaW5nIGNhbGxlZCBvblxuICAgICAgICB2YXIgcGF0dGVybjtcbiAgICAgICAgdmFyICRvYmogPSAoaWQpID8gJCgnIycrIGlkKSA6IGZhbHNlO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm9iamVjdCBpcyBcIiwgJG9iaiwgdHlwZSwgaWQpO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICBjYXNlIFwiY2l0eVwiOlxuICAgICAgICAgICAgY2FzZSBcInN0YXRlXCI6XG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIGFuZCBhbHBoYSBjaGFycywgYXMgd2VsbCBhcyB3aGl0ZSBzcGFjZSBhbmQgYSBmZXcgZXh0cmEgY2hhcnNcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS16XFxzLC4nLV17MCwyOH0vO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dezAsNzV9LztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhZGRyZXNzXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87KzooKSUmLV17MCw1MH0vO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInppcFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlswLTldezV9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicGhvbmVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oWyhdWzAtOV17M31bKV18WzAtOV17M30pW1xcc1xcLS5dP1swLTldezN9W1xcc1xcLS5dP1swLTldezR9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZW1haWxcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5vdGVzXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87KzooKSUmPD5cXFtcXF17fVxcLT1cInxgXFxcXFxcL117MCwyNTB9LztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJleHRcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzOi1dezAsMTV9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vcGF0dGVybiA9IC9eMjBbMC05XXsyfVstXSgwWzEtOV18MVswLTJdKVstXSgwWzEtOV18WzEtMl1bMC05XXwzWzAxXSkkLztcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oMD9bMS05XXwxWzAtMl0pXFwvKDA/WzEtOV18WzEtMl1bMC05XXwzWzAxXSlcXC8yMFswLTldezJ9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDA/WzEtOV18MVswLTJdKVxcLygwP1sxLTldfFsxLTJdWzAtOV18M1swMV0pXFwvKCgxOTlbMC05XXwyMClbMC05XXsyfSkkLztcbiAgICAgICAgICAgICAgICAvL3BhdHRlcm4gPSAvXigxOTlbMC05XXwyMFswLTldezJ9KVstXSgwWzEtOV18MVswLTJdKVstXSgwWzEtOV18WzEtMl1bMC05XXwzWzAxXSkkLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhbW91bnRcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oW1xcJF0/W1xcZF0rKFsuXVtcXGRdezJ9KT8pezEsMTB9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cdFx0XHRjYXNlIFwidXNlcm5hbWVcIjpcblx0XHRcdGNhc2UgXCJwYXNzd29yZFwiOlxuXHRcdFx0XHRwYXR0ZXJuID0gL14oW2Etel0rW0EtWl0rWzAtOV0rKXs4LDIwfSQvO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJzZWFyY2hcIjpcblx0XHRcdFx0cGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dezAsNzV9JC87XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImFnZVwiOlxuXHRcdFx0XHRwYXR0ZXJuID0gL15bMC05XXsxLDJ9JC87XG5cdFx0XHRcdGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImludmFsaWQgY2xhc3Mgc2VhcmNoXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHJlcXVpcmVkIG9yIHRyaW1tZWQgbGVuZ3RoIGlzIG5vdCAwLCB0aGVuIHZhbGlkYXRlIGluZm9cbiAgICAgICAgaWYoJG9iai5hdHRyKCdyZXF1aXJlZCcpIHx8ICRvYmoudmFsKCkpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrcyBpZiB2YWx1ZSBtYXRjaGVzIHJlZ2V4IGZvciBmaWVsZCB0eXBlXG4gICAgICAgICAgICBpZighcGF0dGVybi50ZXN0KCRvYmoudmFsKCkudHJpbSgpKSB8fCAkb2JqLnZhbCgpLnRyaW0oKS5sZW5ndGggPT0gMCAmJiAkb2JqLmF0dHIoJ3JlcXVpcmVkJykpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBmYWlscywgYWRkcyBpbnZhbGlkIGNsYXNzIChoaWdobGlnaHRpbmcpLCBjaGFuZ2VzIHBsYWNlaG9sZGVyIHRvIHdoYXQgc2hvdWxkIGJlIGVudGVyZWRcbiAgICAgICAgICAgICAgICAkb2JqLmFkZENsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ2ludmFsaWQnKSkudmFsKCcnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCAnIGZhaWxlZCB0ZXN0JywgcGF0dGVybik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgcGFzc2VzLCByZW1vdmVzIGludmFsaWQgY2xhc3MsIHJlc2V0cyBwbGFjZWhvbGRlciB0byBkZWZhdWx0XG4gICAgICAgICAgICAgICAgJG9iai5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdwbGFjZWhvbGRlcicpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCAnIHBhc3NlZCB0ZXN0JywgcGF0dGVybik7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuXHR2YXIgdmFsaWRhdGVGb3JtID0gZnVuY3Rpb24gKGZvcm1zKSB7XG5cdFx0dmFyIHBhc3MgPSB0cnVlO1xuXHRcdGZvcm1zLmZvckVhY2goZnVuY3Rpb24gKHYsIGksIGEpIHtcblx0XHRcdCQoJyMnKyB2ICsnIC5qcy12YWxpZGF0ZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZih2YWxpZGF0ZUlucHV0KCQodGhpcykuZGF0YSgndHlwZScpLCAkKHRoaXMpLmF0dHIoJ2lkJykpID09IGZhbHNlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJCh0aGlzKS5hdHRyKCdpZCcpICtcIiBmYWlsZWQgdGhlIHRlc3QgXCIrICQodGhpcykuZGF0YSgndHlwZScpICtcIiBlbnRlcmVkIGluZm86IFwiKyAkKHRoaXMpLnZhbCgpKTtcblx0XHRcdFx0XHRwYXNzID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdHJldHVybiBwYXNzO1xuXHR9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWRhdGVJbnB1dDogdmFsaWRhdGVJbnB1dCxcblx0XHR2YWxpZGF0ZUZvcm06IHZhbGlkYXRlRm9ybVxuICAgIH07XG59XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
