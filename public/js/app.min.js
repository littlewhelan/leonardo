var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap"]);app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html"}).when("/addcorp",{templateUrl:"private/addcorp.html"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,n){return{request:function(t){return t.headers=t.headers||{},n.isAuthed()&&(t.headers.Authorization="Bearer "+n.getToken()),t},response:function(n){return 401===n.status&&e.path("/"),n||t.when(n)},responseError:function(n){return 401===n.status?e.path("/"):console.log(n.status),t.reject(n)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var n=e.split(".")[1],o=n.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),n=Math.round((new Date).getTime()/1e3)<=e.exp;return n||this.logout(),n}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService",function(t,e,n,o){t.companies=o.companies,t.animationsEnabled=!0,t.openCorp=function(o){var a=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,resolve:{items:function(){return t.items}}});a.result.then(function(e){t.selected=e},function(){n.info("Modal dismissed at: "+new Date)})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled}}]),app.controller("createListSearch",["$scope","ContactListDataService",function(t,e){t.listForm={},t.searchListBtn=function(){e.makeDataCall(t.listForm.data),t.listForm={}}}]),app.factory("ContactListDataService",["Shttp",function(t){var e=[],n=[],o=[],a=[],i=function(t){return http({method:"GET",URL:"../createMailList",params:{search:t}}).then(function(t){e=t.data,s(e),r(e),c(e)})},r=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),a},s=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"company"==t.type&&n.push(t)})};return e(t),n},c=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"child"==t.type&&kids.push(t)})};return e(t),o},l={makeDataCall:i,getCompanies:s,getKids:c,getAdults:r,results:e,allKids:o,allAdults:a,allCompanies:n};return l}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService",function(t,e,n,o){t.adults=o.adults,t.kids=o.kids,t.animationsEnabled=!0,t.open=function(o){var a=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,resolve:{items:function(){return t.items}}});a.result.then(function(e){t.selected=e},function(){n.info("Modal dismissed at: "+new Date)})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,n,o,a){t.submit=function(){e.post("/login",t.form).then(function(t){n.saveToken(t.data),a.user=n.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,n){t.formInput={},t.searchBtn=function(){n.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],n=[],o=[],a=[],i=function(n){return t({method:"GET",url:"../search",params:{search:n}}).then(function(t){e=t.data,r(e),c(e),s(e)})},r=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return e(t),console.log("this is getElement1",o),o},s=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"adult"==t.type&&n.push(t)})};return e(t),console.log("this is in getElement2",n),n},c=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"child"==t.type&&a.push(t)})};return e(t),console.log("this is getElements3",a),a},l={getKids:c,getAdults:s,getCompanies:r,makeDataCall:i,results:e,companies:o,adults:n,kids:a};return l}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,n,o){n.user=t.getUser(),n.user&&n.user.username&&o.path("/home"),e.logout=function(){t.logout(),n.user=t.getUser(),o.path("/")}}]),app.service("contactListData",["$scope","$http",function(t,e){var n=[],o=0;return t.postList=function(){e.post("/newContactList").success(function(t,e,n,o){console.log(t)}),console.log(options)},{newContactList:n,listNum:o}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,n){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),n.path("/index")})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInJlZ2lzdGVyQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSIsIiRxIiwiJGxvY2F0aW9uIiwiYXV0aFNlcnZpY2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsImlzQXV0aGVkIiwiQXV0aG9yaXphdGlvbiIsImdldFRva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJwYXRoIiwicmVzcG9uc2VFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJyZWplY3QiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInRoaXMiLCJwYXJzZUp3dCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsInNhdmVUb2tlbiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwibG9nb3V0IiwiZ2V0VXNlciIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsImNvbXBhbmllcyIsImFuaW1hdGlvbnNFbmFibGVkIiwib3BlbkNvcnAiLCJzaXplIiwibW9kYWxJbnN0YW5jZSIsIm9wZW4iLCJhbmltYXRpb24iLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJ0aGVuIiwic2VsZWN0ZWRJdGVtIiwic2VsZWN0ZWQiLCJpbmZvIiwidG9nZ2xlQW5pbWF0aW9uIiwiQ29udGFjdExpc3REYXRhU2VydmljZSIsImxpc3RGb3JtIiwic2VhcmNoTGlzdEJ0biIsIm1ha2VEYXRhQ2FsbCIsImRhdGEiLCIkaHR0cCIsInJlc3VsdHMiLCJhbGxDb21wYW5pZXMiLCJhbGxLaWRzIiwiYWxsQWR1bHRzIiwicGFzc2VkRGF0YSIsImh0dHAiLCJtZXRob2QiLCJVUkwiLCJzZWFyY2giLCJnZXRDb21wYW5pZXMiLCJnZXRBZHVsdHMiLCJnZXRLaWRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MyIsInNwbGljZSIsImxlbmd0aCIsImZvckVhY2giLCJlbGVtZW50IiwidHlwZSIsInB1c2giLCJraWRzIiwiZGF0YUFwaSIsImFkdWx0cyIsIiRyb290U2NvcGUiLCJzdWJtaXQiLCJwb3N0IiwiZm9ybSIsInVzZXIiLCJmb3JtSW5wdXQiLCJzZWFyY2hCdG4iLCJ1cmwiLCJnZXRFbGVtZW50MSIsImdldEVsZW1lbnQyIiwicHVibGljQXBpIiwiJG1vZGFsSW5zdGFuY2UiLCJvayIsImNsb3NlIiwiaXRlbSIsImNhbmNlbCIsImRpc21pc3MiLCJ1c2VybmFtZSIsIm5ld0NvbnRhY3RMaXN0IiwibGlzdE51bSIsInBvc3RMaXN0Iiwic3VjY2VzcyIsIm9wdGlvbnMiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUFBLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLFlBQUEsZ0JBRUFGLEtBQUFHLFFBQUEsaUJBQ0EsU0FBQUMsR0FDQUEsRUFDQUMsS0FBQSxLQUNBQyxZQUFBLHNCQUVBRCxLQUFBLFdBQ0FDLFlBQUEsd0JBRUFELEtBQUEsYUFDQUMsWUFBQSx5QkFFQUQsS0FBQSxnQkFDQUMsWUFBQSw2QkFFQUQsS0FBQSxj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Q0FDLFFBQUFBLE1DekNBckgsSUFBQWlELFdBQUEsZ0JBQUEsU0FBQSxRQUFBLFlBQUEsU0FBQUMsRUFBQXdCLEVBQUEvRCxHQUNBdUMsRUFBQWlELE9BQUEsV0FDQTdFLFFBQUFDLElBQUEsZ0JBQ0FELFFBQUFDLElBQUEsNkJBQUEyQixFQUFBbUQsTUFDQTNCLEVBQUEwQixLQUFBLFlBQUFsRCxFQUFBbUQsTUFDQXJDLEtBQUEsU0FBQTlDLEdBQ0FJLFFBQUFDLElBQUFMLEdBQ0FQLEVBQUFTLEtBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdsZW8nLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJywgJ3VpLmJvb3RzdHJhcCddKTtcblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdGxpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIG90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9zZWFyY2gnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSk7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4vL2R1bW15IGRhdGEgZWRpdCBmYW1pbHkgYWRkaXRpb25hbCBtZW1iZXJzXG4vL2FwcC5jb250cm9sbGVyKCdhZGRpdGlvbmFsQ3RybCcsIFsgJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuLy8gICAgJHNjb3BlLmFkZGl0aW9uYWwgPSB7XG4vLyAgICAgICAgZk5hbWU6ICdHcmVnJyxcbi8vICAgICAgICBsTmFtZTogJ0JyYWR5Jyxcbi8vICAgICAgICBiRGF5OiAnMTk4My0wMy0wNScsXG4vLyAgICAgICAgbm90ZXM6ICdUaGlzIGFyZWEgaXMgcmVzZXJ2ZWQgZm9yIGluZm9ybWF0aW9uIGFzIG5lZWRlZCdcbi8vICAgIH07XG4vLyAgICAkc2NvcGUuc2V0ID0gZnVuY3Rpb24oZWRpdF9pbmZvKSB7XG4vLyAgICAgICAgdGhpcy5jb250YWN0LmZOYW1lID0gZWRpdF9pbmZvLFxuLy8gICAgICAgIHRoaXMuY29udGFjdC5sTmFtZSA9IGVkaXRfaW5mbyxcbi8vICAgICAgICB0aGlzLmNvbnRhY3QuYkRheSA9IGVkaXRfaW5mbyxcbi8vICAgICAgICB0aGlzLmNvbnRhY3Qubm90ZXMgPSBlZGl0X2luZm9cbi8vICAgIH07XG4vL31dKTtcblxuLy9kdW1teSBkYXRhIGZvciBmYW1pbHkgY29udGFjdCBpbmZvcm1hdGlvblxuLy9hcHAuY29udHJvbGxlcignY29udGFjdEN0cmwnLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgIC8vJHNjb3BlLmNvbnRhY3QgPSB7XG4gICAgLy8gICAgZk5hbWU6ICdNaWtlJyxcbiAgICAvLyAgICAgcmVzZXJ2ZWQgZm9yIGluZm9ybWF0aW9uIGFzIG5lZWRlZCdcbiAgICAvL307XG4gICAgLy8kc2NvcGUuc2V0ID0gZnVuY3Rpb24oZWRpdF9pbmZvKSB7XG4gICAgLy8gICAgdGhpcy5jb250YWN0LmZOYW1lID0gZWRpdF9pbmZvLFxuICAgIC8vICAgIGl0X2luZm9cbiAgICAvL307XG5cbi8vfV0pO1xuXG4vL2R1bW15IGRhdGEgZm9yIGZhbWlseSBlbWVyZ2VuY3kgY29udGFjdCBpbmZvcm1hdGlvblxuLy9hcHAuY29udHJvbGxlcignZW1lcmdlbmN5Q3RybCcsWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xuICAgIC8vJHNjb3BlLmVtZXJnZW5jeSA9IHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgZk5hbWU6ICdNaWtlJyxcblxuICAgIC8vICAgICAgICAgICAgICAgICAgICB9O1xuICAgIC8vJHNjb3BlLnNldCA9IGZ1bmN0aW9uKGVkaXRfaW5mbykge1xuICAgIC8vICAgIHRoaXMuZW1lcmdlbmN5LmZOYW1lID0gZWRpdF9pbmZvLFxuXG4gICAgLy99O1xuLy99XSk7XG5cbi8vY29udHJvbGxlciBmb3IgaGFuZGxpbmcgdGhlIHNlYXJjaCByZXN1bHRzXG4vL2FwcC5jb250cm9sbGVyKCdTZWFyY2hSZXN1bHRDb250cm9sbGVyJyxbJ1NoYXJlZERhdGFTZXJ2aWNlJywnJHNjb3BlJywnJGh0dHAnLCBmdW5jdGlvbignU2hhcmVkRGF0YVNlcnZpY2UnLCRzY29wZSwgJGh0dHApXG4vL3tcbi8vXG4vL31dKVxuXG5cblxuXG4vL2FwcC5jb250cm9sbGVyKCduZXdDb250YWN0TGlzdENvbnRyb2xsZXInLFsnY29udGFjdExpc3REYXRhJywnJHNjb3BlJywnJGh0dHAnLCBmdW5jdGlvbihjb250YWN0TGlzdERhdGEsICRzY29wZSwgJGh0dHApIHtcbi8vICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG4vLyAgICAkc2NvcGUubGlzdG5hbWUgPSB7fTtcbi8vXG4vL1xuLy8gICAgLy9oZWFkZXJzXG4vLyAgICAkc2NvcGUuY29uZmlnID0ge1xuLy8gICAgICAgIGhlYWRlcnM6IHsnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgZWY1ZDVkZjItYTgwOC00YzcwLWE1ZDktZWI3MTE2M2NiZWI5Jyxcbi8vICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuLy8gICAgICAgIH1cbi8vICAgIH07XG4vL1xuLy8gICAgLy9mdW5jdGlvbiB0byBjcmVhdHMgdGhlIG5ldyBjb250YWN0IGxpc3Rcbi8vICAgICRzY29wZS5wb3N0TGlzdCA9IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAkc2NvcGUubGlzdFJlcSA9IHtcIm5hbWVcIjogJHNjb3BlLmxpc3RuYW1lLmlucHV0LCBcInN0YXR1c1wiOiBcIkFDVElWRVwifTtcbi8vICAgICAgICBjb25zb2xlLmxvZygncG9zdGluZyBsaXN0IC4gLiAuICcpO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5saXN0UmVxKTtcbi8vICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuY29uZmlnKTtcbi8vICAgICAgICAkaHR0cC5wb3N0KCdodHRwczovL2FwaS5jb25zdGFudGNvbnRhY3QuY29tL3YyL2xpc3RzP2FwaV9rZXk9eWc1cDJxZjU0OXFhY21icWF5azVybjIzJywgJHNjb3BlLmxpc3RSZXEsICRzY29wZS5jb25maWcpLlxuLy8gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChyZXMpIHtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzXCIgKyByZXMpO1xuLy9cbi8vICAgICAgICAgICAgICAgIHJlcy5pZCA9IGNvbnRhY3RMaXN0RGF0YS5saXN0TnVtO1xuLy9cbi8vICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgIC8vZXJyb3IoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4vLyAgICAgICAgICAgIC8vICAgIC8vIGxvZyBlcnJvclxuLy8gICAgICAgICAgICAvL30pO1xuLy9cbi8vICAgIH07XG4vL1xuLy99XSk7XG4vL1xuLy9hcHAuY29udHJvbGxlcignY29udGFjdExpc3RDb250cm9sbGVyJyxbJ2NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsJyRodHRwJyBmdW5jdGlvbihjb250YWN0TGlzdERhdGEsICRzY29wZSwgJGh0dHApXG4vL3tcbi8vICAgIHZhciBpbXBvcnREYXRhQXJyYXkgPSBbXTtcbi8vICAgIHZhciBsaXN0RW5kID0gSlNPTi5zdHJpbmdpZnkoXCJsaXN0OiBbXCIrIGNvbnRhY3RMaXN0RGF0YS5saXN0TnVtICsgXCJdLGNvbHVtbl9uYW1lczpbXFxcIkVNQUlMXFxcIixcXFwiRklSU1QgTkFNRVxcXCIsIFxcXCJMQVNUIE5BTUVcXFwiLCBcXFwiQ0lUWVxcXCIsXFxcIkNPTVBBTlkgTkFNRVxcXCJdXCIpO1xuLy9cbi8vICAgIC8vcHVzaCB0aGUgaW5jbHVkZWQvY2hlY2tlZCBpbmZvIHRvIHRoZSBlbWFpbCBsaXN0XG4vLyAgICAkc2NvcGUuY29udGFjdENoZWNrZWQgPSBmdW5jdGlvbiAoaWQpIHtcbi8vICAgICAgICAkc2NvcGUuY2hlY2tlZC5wdXNoKFtpZF0pO1xuLy8gICAgfTtcbi8vXG4vL1xuLy8gICAgLy9Qb3N0IERhdGEgdG8gQ29uc3RhbnQgQ29udGFjdFxuLy8gICAgJHNjb3BlLnNlbmRQb3N0ID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgdmFyIGRhdGEgPSAkLnBhcmFtKHtcbi8vICAgICAgICAgICAganNvbjogSlNPTi5zdHJpbmdpZnkoe1xuLy8gICAgICAgICAgICAgICAgXCJpbXBvcnREYXRhXCI6IGltcG9ydERhdGFBcnJheSArIFwiLCBcIiArIGxpc3RFbmRcbi8vICAgICAgICAgICAgfSlcbi8vICAgICAgICB9KTtcbi8vXG4vL1xuLy8gICAgICAgIHZhciBjb25maWcgPSB7XG4vLyAgICAgICAgICAgIGhlYWRlcnM6IHtcbi8vICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciBlZjVkNWRmMi1hODA4LTRjNzAtYTVkOS1lYjcxMTYzY2JlYjknXG4vLyAgICAgICAgICAgIH1cbi8vICAgICAgICB9O1xuLy9cbi8vICAgICAgICAkaHR0cC5wb3N0KCdodHRwczovL2FwaS5jb25zdGFudGNvbnRhY3QuY29tL3YyL2FjdGl2aXRpZXMvYWRkY29udGFjdHM/YXBpX2tleT11OHc1OXp0eGUzMjk0YWRjemZ2bjdrOWUnLCBkYXRhLCBjb25maWcpLlxuLy8gICAgICAgICAgICBzdWNjZXNzKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuLy8gICAgICAgICAgICAgICAgcmVzLmlkID0gY29udGFjdExpc3REYXRhLmxpc3ROdW07XG4vLyAgICAgICAgICAgIH0pLlxuLy8gICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbi8vICAgICAgICAgICAgICAgIC8vIGxvZyBlcnJvclxuLy8gICAgICAgICAgICB9KTtcbi8vICAgIH07XG4vL31dKVxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pIiwiLy9lZGl0IGNvcnBvcmF0aW9uIG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdENvcnBDdHJsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRsb2cnLCAnUmVzdWx0U2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSkge1xuICAgIC8vc2VuZHMgdGhlIGNvbXBhbmllcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG4gICAgJHNjb3BlLmNvbXBhbmllcyA9IFJlc3VsdFNlcnZpY2UuY29tcGFuaWVzO1xuXG4gICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuICAgICRzY29wZS5vcGVuQ29ycCA9IGZ1bmN0aW9uIChzaXplKSB7XG5cbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG4gICAgICAgICAgICBhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0Y29ycC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG4gICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuaXRlbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG4gICAgfTtcblxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUxpc3RTZWFyY2gnLFsnJHNjb3BlJywnQ29udGFjdExpc3REYXRhU2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgQ29udGFjdExpc3REYXRhU2VydmljZSl7XG4gICAgJHNjb3BlLmxpc3RGb3JtPXt9O1xuXG4gICAgJHNjb3BlLnNlYXJjaExpc3RCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICAgQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJHNjb3BlLmxpc3RGb3JtLmRhdGEpO1xuICAgICAgICAvL2VtcHR5cyB0aGUgc2VhcmNoIGJveFxuICAgICAgICAkc2NvcGUubGlzdEZvcm09e307XG4gICAgfTtcbn1dKTsiLCJhcHAuZmFjdG9yeSgnQ29udGFjdExpc3REYXRhU2VydmljZScsWydTaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBhbGxDb21wYW5pZXMgPSBbXTtcbiAgICB2YXIgYWxsS2lkcyA9IFtdO1xuICAgIHZhciBhbGxBZHVsdHMgPSBbXTtcblxuICAgIHZhciBtYWtlRGF0YUNhbGwgPSBmdW5jdGlvbiAocGFzc2VkRGF0YSkge1xuICAgICAgICByZXR1cm4gaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgVVJMOiAnLi4vY3JlYXRlTWFpbExpc3QnLFxuICAgICAgICAgICAgcGFyYW1zOiB7c2VhcmNoOiBwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRBZHVsdHMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRLaWRzKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICB2YXIgZ2V0QWR1bHRzID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICAgICAgYWxsQWR1bHRzLnNwbGljZSgwLCBhbGxBZHVsdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdhZHVsdCcpXG4gICAgICAgICAgICAgICAgICAgIGFsbEFkdWx0cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgZ2V0RWxlbWVudDMoYXJyYXkpO1xuICAgICAgICByZXR1cm4gYWxsQWR1bHRzXG4gICAgfTtcblxuICAgIHZhciBnZXRDb21wYW5pZXMgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQzID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgICAgICBhbGxDb21wYW5pZXMuc3BsaWNlKDAsIGFsbENvbXBhbmllcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NvbXBhbnknKVxuICAgICAgICAgICAgICAgICAgICBhbGxDb21wYW5pZXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgcmV0dXJuIGFsbENvbXBhbmllc1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDMgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgICAgIGFsbEtpZHMuc3BsaWNlKDAsIGFsbEtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjaGlsZCcpXG4gICAgICAgICAgICAgICAgICAgIGtpZHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgcmV0dXJuIGFsbEtpZHNcbiAgICB9O1xuXG4gICAgdmFyIGRhdGFBcGkgPSB7XG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgZ2V0S2lkczogZ2V0S2lkcyxcbiAgICAgICAgZ2V0QWR1bHRzOiBnZXRBZHVsdHMsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGFsbEtpZHM6IGFsbEtpZHMsXG4gICAgICAgIGFsbEFkdWx0czogYWxsQWR1bHRzLFxuICAgICAgICBhbGxDb21wYW5pZXM6IGFsbENvbXBhbmllc1xuICAgIH07XG5cbiAgICByZXR1cm4gZGF0YUFwaTtcblxufV0pO1xuIiwiLy9lZGl0IGZhbWlseSBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRGYW1pbHlDdHJsJyxbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsJ1Jlc3VsdFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UpIHtcbiAgICAvL3NlbmRzIHRoZSBhZHVsdHMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuICAgICRzY29wZS5hZHVsdHMgPSBSZXN1bHRTZXJ2aWNlLmFkdWx0cztcbiAgICAvL3NlbmRzIHRoZSBraWRzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcbiAgICAkc2NvcGUua2lkcyA9IFJlc3VsdFNlcnZpY2Uua2lkcztcblxuXG4gICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuICAgICRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUpIHtcblxuICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRmYW1pbHkuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLml0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuICAgIH07XG5cbn1dKTsiLCIvL2NvbnRyb2xsZXJzIGZvciBsb2dpblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSl7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9zZWFyY2hcIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufV0pO1xuIiwiXG4vL1RoaXMgc2hvdWxkIGdldCB0aGUgc2VhcmNoIGl0ZW1cbmFwcC5jb250cm9sbGVyKCdzZWFyY2hGdW5jdGlvbicsIFsnJHNjb3BlJywgJyRodHRwJywgJ1Jlc3VsdFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgUmVzdWx0U2VydmljZSkge1xuICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG5cbiAgICAkc2NvcGUuc2VhcmNoQnRuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgUmVzdWx0U2VydmljZS5tYWtlRGF0YUNhbGwoJHNjb3BlLmZvcm1JbnB1dC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIGlucHV0IHRleHQnLCAkc2NvcGUuZm9ybUlucHV0KTtcbiAgICAgICAgLy9lbXB0eXMgdGhlIHNlYXJjaCBib3hcbiAgICAgICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcbiAgICB9O1xuXG59XSk7XG4iLCIvL1RoaXMgc2VydmljZSBzaG91bGQgcGFzcyBkYXRhIGJldHdlZW4gY29udHJvbGxlcnNcbmFwcC5mYWN0b3J5KCdSZXN1bHRTZXJ2aWNlJywgWyckaHR0cCcsZnVuY3Rpb24oJGh0dHApIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBhZHVsdHMgPSBbXTtcbiAgICB2YXIgY29tcGFuaWVzID0gW107XG4gICAgdmFyIGtpZHMgPSBbXTtcblxuICAgIHZhciBtYWtlRGF0YUNhbGwgPSBmdW5jdGlvbihwYXNzZWREYXRhKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vc2VhcmNoJyxcbiAgICAgICAgICAgIHBhcmFtczp7c2VhcmNoOnBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGdldENvbXBhbmllcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEtpZHMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRBZHVsdHMocmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0Q29tcGFuaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQxID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGNvbXBhbmllcy5zcGxpY2UoMCxjb21wYW5pZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY29tcGFueScpXG4gICAgICAgICAgICAgICAgY29tcGFuaWVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGdldEVsZW1lbnQxKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudDEnLGNvbXBhbmllcyk7XG4gICAgICAgIHJldHVybiBjb21wYW5pZXNcbiAgICB9O1xuXG4gICAgdmFyIGdldEFkdWx0cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBhZHVsdHMuc3BsaWNlKDAsYWR1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2FkdWx0JylcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MihhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIGdldEVsZW1lbnQyJywgYWR1bHRzKTtcbiAgICAgICAgcmV0dXJuIGFkdWx0c1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBraWRzLnNwbGljZSgwLGtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICBraWRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MyhhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnRzMycsIGtpZHMpO1xuICAgICAgICByZXR1cm4ga2lkc1xuICAgIH07XG5cbiAgICAvL3B1YmxpY1xuICAgIHZhciBwdWJsaWNBcGkgPSB7XG4gICAgICAgIGdldEtpZHM6IGdldEtpZHMsXG4gICAgICAgIGdldEFkdWx0czogZ2V0QWR1bHRzLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGwsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNvbXBhbmllczogY29tcGFuaWVzLFxuICAgICAgICBhZHVsdHM6IGFkdWx0cyxcbiAgICAgICAga2lkczoga2lkc1xuICAgIH07XG4gICAgcmV0dXJuIHB1YmxpY0FwaTtcbn1dKTsiLCIvLyBQbGVhc2Ugbm90ZSB0aGF0ICRtb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxuLy8gSXQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAkdWliTW9kYWwgc2VydmljZSB1c2VkIGFib3ZlLlxuXG4vL25lZWRlZCBmb3IgbW9kYWw/PyBwcmV0dHkgc3VyZVxuYXBwLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJyxbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCRyb290U2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgfVxufV0pO1xuIiwiLy9zZXJ2aWNlIGZvciBhamF4IGNhbGxzIHRvIGNvbnN0YW50IGNvbnRhY3RcblxuYXBwLnNlcnZpY2UoJ2NvbnRhY3RMaXN0RGF0YScsIFsnJHNjb3BlJywnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG4gICAgdmFyIGluY2x1ZGVkRW1haWxzID0gW107XG4gICAgdmFyIG5ld0NvbnRhY3RMaXN0ID0gW107XG4gICAgdmFyIGxpc3ROdW0gPSAwO1xuXG5cbiAgICAkc2NvcGUucG9zdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9uZXdDb250YWN0TGlzdCcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhvcHRpb25zKVxuICAgIH07XG4gICAgLy8vL2hlYWRlcnNcbiAgICAvLyRzY29wZS5jb25maWcgPSB7XG4gICAgLy8gICAgaGVhZGVyczogeydBdXRob3JpemF0aW9uJzogJ0JlYXJlciBlZjVkNWRmMi1hODA4LTRjNzAtYTVkOS1lYjcxMTYzY2JlYjknLFxuICAgIC8vICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIC8vICAgIH1cbiAgICAvL307XG4gICAgLy9cbiAgICAvLy8vZnVuY3Rpb24gdG8gY3JlYXRzIHRoZSBuZXcgY29udGFjdCBsaXN0XG4gICAgLy8kc2NvcGUucG9zdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgJHNjb3BlLmxpc3RSZXEgPSB7XCJuYW1lXCI6ICRzY29wZS5saXN0bmFtZS5pbnB1dCwgXCJzdGF0dXNcIjogXCJBQ1RJVkVcIn07XG4gICAgLy8gICAgY29uc29sZS5sb2coJ3Bvc3RpbmcgbGlzdCAuIC4gLiAnKTtcbiAgICAvLyAgICBjb25zb2xlLmxvZygkc2NvcGUubGlzdFJlcSk7XG4gICAgLy8gICAgY29uc29sZS5sb2coJHNjb3BlLmNvbmZpZyk7XG4gICAgLy8gICAgJGh0dHAucG9zdCgnaHR0cHM6Ly9hcGkuY29uc3RhbnRjb250YWN0LmNvbS92Mi9saXN0cz9hcGlfa2V5PXlnNXAycWY1NDlxYWNtYnFheWs1cm4yMycsICRzY29wZS5saXN0UmVxLCAkc2NvcGUuY29uZmlnKS5cbiAgICAvLyAgICAgICAgdGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc1wiICsgcmVzKTtcbiAgICAvL1xuICAgIC8vICAgICAgICAgICAgcmVzLmlkID0gY29udGFjdExpc3REYXRhLmxpc3ROdW07XG4gICAgLy9cbiAgICAvLyAgICAgICAgfSk7XG4gICAgLy8gICAgLy9lcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAvLyAgICAvLyAgICAvLyBsb2cgZXJyb3JcbiAgICAvLyAgICAvL30pO1xuICAgIC8vXG4gICAgLy99O1xuXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBuZXdDb250YWN0TGlzdDogbmV3Q29udGFjdExpc3QsXG4gICAgICAgIGxpc3ROdW06IGxpc3ROdW1cbiAgICB9O1xufV0pOyIsIlxuLy9yZWdpc3RlciBjb250cm9sbGVyXG5hcHAuY29udHJvbGxlcigncmVnaXN0ZXJDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZWdpc3RlckN0cmxcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlckNvbnRyb2xsZXIgc3VibWl0OicsICRzY29wZS5mb3JtKTtcbiAgICAgICAgJGh0dHAucG9zdCgnL3JlZ2lzdGVyJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvaW5kZXhcIilcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
