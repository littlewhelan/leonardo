function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,a,e){return{request:function(t){return t.headers=t.headers||{},e.isAuthed()&&(t.headers.Authorization="Bearer "+e.getToken()),t},response:function(e){return 401===e.status&&a.path("/"),e||t.when(e)},responseError:function(e){return 401===e.status?a.path("/"):console.log(e.status),t.reject(e)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(a){if(a){var e=a.split(".")[1],o=e.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(a){t.localStorage.jwtToken=a},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var a=this.parseJwt(t),e=Math.round((new Date).getTime()/1e3)<=a.exp;return e||this.logout(),e}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,o,n,i){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={info:{},contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(a){t.corp={info:{},contact:{},donations:[]},t.newDonation={},a.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){t.corp=n.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.corp}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?i.validateForm(["EditCorpInfoForm","EditCorpContactForm"])?(console.log("update corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Put corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}})):console.log("Edit corp input tests failed"):i.validateForm(["AddCorpInfoForm","AddCorpContactForm"])?n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Posted corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}}):console.log("Add corp input tests failed")},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr",function(t,a,e,o,n){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&e.makeDataCall("zip",t.zip.data).then(function(a){t.emailList=a,t.totalResults=a.length,console.log(t.emailList),n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var a=e.makeDataCall("age",t.age.data);a.then(function(a){console.log(a),t.emailList=a,t.totalResults=a.length})}if("fam"==t.type){var o=e.makeDataCall("family","");o.then(function(a){t.emailList=a,t.totalResults=a.length,console.log(a)})}if("corp"==t.type){var i=e.makeDataCall("company","");i.then(function(a){t.emailList=a,t.totalResults=a.length,console.log(a)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(a){var e=angular.element(a.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],e.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),e.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,a){function e(e,o){var n=a.defer();return console.log("this is in the make data call",e,o),t({method:"GET",url:"../createMailList",params:{type:e,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:e}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,o,n,i){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(a){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},a.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){t.family=n.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?i.validateForm(["EditFamInfoForm","EditFamEmerForm"])?(console.log("insert family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(a){console.log("Put family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]})):console.log("Edit family failed input tests"):i.validateForm(["AddFamInfoForm","AddFamEmerForm"])?n({method:"POST",url:"/family",data:{family:t.family}}).then(function(a){console.log("Posted family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]}):console.log("Add family failed input tests")},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(a){t.editingChild=a,t.newChild=t.family.children[a]},t.removeChild=function(a){console.log("in remove child index",a," edit ",t.editingChild),t.family.children.splice(a,1),a==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,a,e,o,n){t.submit=function(){a.post("/login",t.form).then(function(t){e.saveToken(t.data),n.user=e.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,a,e){t.formInput={},t.searchBtn=function(){e.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var a=[],e=[],o=[],n=[],i=function(e){return t({method:"GET",url:"../search",params:{search:e}}).then(function(t){a=t.data,l(a),s(a),r(a)})},l=function(t){var a=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return a(t),console.log("this is getElement1",o),o},r=function(t){var a=function(t){e.splice(0,e.length),t.forEach(function(t){"adult"==t.type&&e.push(t)})};return a(t),console.log("this is in getElement2",e),e},s=function(t){var a=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return a(t),console.log("this is getElements3",n),n},c={getKids:s,getAdults:r,getCompanies:l,makeDataCall:i,results:a,companies:o,adults:e,kids:n};return c}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,a){t.ok=function(){a.close(t.selected.item)},t.cancel=function(){a.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,a,e,o){e.user=t.getUser(),e.user&&e.user.username&&o.path("/home"),a.logout=function(){t.logout(),e.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,a){a.listname={},a.createList=function(){console.log("create list: "+a.listname.input),t.postList(a.listname.input),console.log("list #",t.listNum),a.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,a){var e="",o=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),a.post("/newContactList",{name:t}).then(function(t){console.log(t.data),e=t.data,console.log("Id? ",e)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:o,listNum:e},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),n(t),a.post("/populateContactList",this.dataObject).then(function(t,a,e,o){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var n=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),o.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,a,e){a.listName={},a.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),a.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),a.post("/register",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("edit password:",t.form),a.put("/admin",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.service("validService",[function(){var t=function(t,a){var e,o=a?$("#"+a):!1;switch(console.log("object is ",o,t,a),t){case"name":case"city":case"state":e=/^[a-zA-z\s,.'-]+$/;break;case"corpName":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":e=/^[0-9]{5}$/;break;case"phone":e=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":e=/^[a-zA-Z0-9\s:-]+$/;break;case"date":e=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":e=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":e=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}return o.attr("required")||o.val()?!e.test(o.val().trim())||0==o.val().trim().length&&o.attr("required")?(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",e),!1):(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",e),!0):void 0},a=function(a){var e=!0;return a.forEach(function(a,o,n){$("#"+a+" .js-validate").each(function(){0==t($(this).data("type"),$(this).attr("id"))&&(console.log($(this).attr("id")+" failed the test "+$(this).data("type")+" entered info: "+$(this).val()),e=!1)})}),e};return{validateInput:t,validateForm:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJpbmZvIiwiY29udGFjdCIsImRvbmF0aW9ucyIsIm5ld0RvbmF0aW9uIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJjbGVhckNvcnAiLCJmb3Jtc0FycmF5IiwiZm9yRWFjaCIsInYiLCIkIiwiZWFjaCIsInJlbW92ZUNsYXNzIiwiYXR0ciIsImRhdGEiLCJvcGVuIiwic2l6ZSIsImlkIiwibWV0aG9kIiwidXJsIiwidGhlbiIsIm1vZGFsSW5zdGFuY2UiLCJhbmltYXRpb24iLCJzY29wZSIsInJlc29sdmUiLCJpdGVtcyIsInJlc3VsdCIsInNlbGVjdGVkSXRlbSIsInNlbGVjdGVkIiwidG9nZ2xlQW5pbWF0aW9uIiwic2F2ZSIsInZhbGlkYXRlRm9ybSIsInJlcyIsImxlbmd0aCIsImFkZERvbmF0aW9uIiwicHVzaCIsIkNvbnRhY3RMaXN0RGF0YVNlcnZpY2UiLCJuZXdDb250YWN0TGlzdERhdGEiLCJ0b2FzdHIiLCJ0eXBlIiwiYWdlIiwiemlwIiwiZW1haWxzIiwiaW5jbHVkZWRFbWFpbHMiLCJ0b3RhbERpc3BsYXllZCIsInRvdGFsUmVzdWx0cyIsImVtYWlsTGlzdCIsInNlYXJjaExpc3RCdG4iLCJtYWtlRGF0YUNhbGwiLCJzdWNjZXNzIiwiZXJyb3IiLCJmYW0iLCJjb21wIiwicG9wdWxhdGVMaXN0IiwicG9wTGlzdCIsImxvYWRNb3JlIiwic2hvd0FsbCIsImNoZWNrQWxsIiwiZXZlbnQiLCIkYnV0dG9uIiwiZWxlbWVudCIsInRhcmdldCIsInZhbCIsImNvcHkiLCJwYXNzZWREYXRhIiwiZGVmZXJyZWQiLCJkZWZlciIsInNlYXJjaCIsInByb21pc2UiLCJhZHVsdHMiLCJraWRzIiwiZmFtaWx5IiwiYWR1bHRPbmUiLCJhZHVsdFR3byIsImVtZXJnZW5jeSIsImNoaWxkcmVuIiwibmV3Q2hpbGQiLCJjbGVhckZhbWlseSIsImFkZENoaWxkIiwiZWRpdGluZ0NoaWxkIiwiZWRpdENoaWxkIiwiaW5kZXgiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImNsZWFyQ2hpbGQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF0ZSIsInNjaG9vbCIsIm5vdGVzIiwiJHJvb3RTY29wZSIsInN1Ym1pdCIsInBvc3QiLCJmb3JtIiwidXNlciIsImZvcm1JbnB1dCIsInNlYXJjaEJ0biIsInJlc3VsdHMiLCJnZXRDb21wYW5pZXMiLCJnZXRLaWRzIiwiZ2V0QWR1bHRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MSIsImdldEVsZW1lbnQyIiwiZ2V0RWxlbWVudDMiLCJwdWJsaWNBcGkiLCIkbW9kYWxJbnN0YW5jZSIsIm9rIiwiY2xvc2UiLCJpdGVtIiwiY2FuY2VsIiwiZGlzbWlzcyIsInVzZXJuYW1lIiwibGlzdG5hbWUiLCJjcmVhdGVMaXN0IiwiaW5wdXQiLCJwb3N0TGlzdCIsImxpc3ROdW0iLCJpbXBvcnREYXRhQXJyYXkiLCJuYW1lIiwibGlzdCIsImRhdGFPYmplY3QiLCJnZXRDaGVja2VkIiwibCIsIm9iamVjdCIsImNvbnRhY3RPYmplY3QiLCJlbWFpbF9hZGRyZXNzZXMiLCJlbWFpbCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJjb21wYW55X25hbWUiLCJjb21wYW55IiwiYWRkcmVzc2VzIiwiY2l0eSIsImxpc3ROYW1lIiwicHV0IiwicGF0dGVybiIsIiRvYmoiLCJ0ZXN0IiwidHJpbSIsImFkZENsYXNzIiwiZm9ybXMiLCJwYXNzIiwiaSIsImEiXSwibWFwcGluZ3MiOiJBQUtBLFFBQUFBLGFBQUFDLEdBQ0EsT0FDQUMsS0FBQUMsT0FBQUYsR0FBQUcsT0FBQUMsVUFDQUMsT0FBQUgsT0FBQUYsR0FB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LFFBQUEsU0FBQUMsRUFBQXNJLEVBQUFDLEdBQ0F0SSxFQUFBLElBQUFELEVBQUEsaUJBQUFFLEtBQUEsV0FDQSxHQUFBYixFQUFBWSxFQUFBeEMsTUFBQTRDLEtBQUEsUUFBQUosRUFBQXhDLE1BQUEyQyxLQUFBLFNBQ0FoRCxRQUFBQyxJQUFBNEMsRUFBQXhDLE1BQUEyQyxLQUFBLE1BQUEsb0JBQUFILEVBQUF4QyxNQUFBNEMsS0FBQSxRQUFBLGtCQUFBSixFQUFBeEMsTUFBQTRGLE9BQ0FnRixHQUFBLE9BSUFBLEVBR0EsUUFDQWhKLGNBQUFBLEVBQ0FpQyxhQUFBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdsZW8nLCBbJ25nUm91dGUnLCAnbmdBbmltYXRlJywgJ3VpLmJvb3RzdHJhcCcsICdjaGVja2xpc3QtbW9kZWwnLCAndG9hc3RyJ10pO1xuXG52YXIgcHJldHR5RGF0ZSA9IFwiTU0vREQvWVlnWVlcIjtcbnZhciBmdWxsRGF0ZSA9IFwiTU0vREQvWVlZWSBoOm1tOnNzIGFcIjtcblxuZnVuY3Rpb24gZm9ybWF0RGF0ZXMgKGRhdGUpIHtcblx0cmV0dXJuIHtcblx0XHRmdWxsOiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZ1bGxEYXRlKSxcblx0XHRwcmV0dHk6IG1vbWVudChkYXRlKS5mb3JtYXQocHJldHR5RGF0ZSlcblx0fTtcbn1cblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRGYW1pbHlDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRDb3JwQ3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RsaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvc2VhcmNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pO1xuXG5cblxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBjb3Jwb3JhdGlvbiBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRDb3JwQ3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlKSB7XG5cblx0Ly8gc2V0cyB2YWxpZGF0aW9uIGZyb20gc2VydmljZSBmb3IgZG9tIGNhbGxzXG5cdCRzY29wZS52YWxpZGF0ZUlucHV0ID0gdmFsaWRTZXJ2aWNlLnZhbGlkYXRlSW5wdXQ7XG5cdC8vc2VuZHMgdGhlIGNvbXBhbmllcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5jb21wYW5pZXMgPSBSZXN1bHRTZXJ2aWNlLmNvbXBhbmllcztcblx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0aW5mbzoge30sXG5cdFx0Y29udGFjdDoge30sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuXHQkc2NvcGUuY2xlYXJDb3JwID0gZnVuY3Rpb24gKGZvcm1zQXJyYXkpIHtcblx0XHQkc2NvcGUuY29ycCA9IHtcblx0XHRcdGluZm86e30sXG5cdFx0XHRjb250YWN0Ont9LFxuXHRcdFx0ZG9uYXRpb25zOltdXG5cdFx0fTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0XHRmb3Jtc0FycmF5LmZvckVhY2goZnVuY3Rpb24gKHYpIHtcblx0XHRcdCQoJyMnKyB2ICsnIC5qcy12YWxpZGF0ZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkKHRoaXMpLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnY29ycCBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vY29ycG9yYXRpb24nLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5jb3JwID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuY29ycDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgY29ycFxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5jb3JwKTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmNvcnAuaWQpIHtcblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiQWRkQ29ycEluZm9Gb3JtXCIsIFwiQWRkQ29ycENvbnRhY3RGb3JtXCJdKSkge1xuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0XHRkYXRhOiB7Y29ycDogJHNjb3BlLmNvcnB9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0XHQvLyBpbml0aWFsaXplIGRvbmF0aW9ucyBpZiB0aGVyZSBhcmUgYW55XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5jb3JwLmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiB7fTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiQWRkIGNvcnAgaW5wdXQgdGVzdHMgZmFpbGVkXCIpO1xuXHRcdFx0fVxuXHRcdH1lbHNlIHtcblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiRWRpdENvcnBJbmZvRm9ybVwiLCBcIkVkaXRDb3JwQ29udGFjdEZvcm1cIl0pKSB7XG5cdFx0XHRcdC8vIGluc2VydCBjb3JwIC0gaGFzIG5vIGlkXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwidXBkYXRlIGNvcnBcIiwgJHNjb3BlLmNvcnApO1xuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmluZm8gPSAocmVzLmRhdGEuaW5mbykgPyByZXMuZGF0YS5pbmZvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVkaXQgY29ycCBpbnB1dCB0ZXN0cyBmYWlsZWRcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJhZGRlZCBkb25hdGlvblwiLCAkc2NvcGUubmV3RG9uYXRpb24sICRzY29wZS5jb3JwLmRvbmF0aW9ucyk7XG5cdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxufV0pOyIsImFwcC5jb250cm9sbGVyKCdjcmVhdGVMaXN0U2VhcmNoJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnQ29udGFjdExpc3REYXRhU2VydmljZScsICduZXdDb250YWN0TGlzdERhdGEnLCAndG9hc3RyJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsbmV3Q29udGFjdExpc3REYXRhLCB0b2FzdHIpIHtcbiAgICAkc2NvcGUudHlwZSA9e307XG4gICAgJHNjb3BlLmFnZT17fTtcbiAgICAkc2NvcGUuemlwPXt9O1xuXHQvLyBpbmNsdWRlIGxpc3QgbmVlZHMgdG8gYmUgd2l0aGluIGFuIG9iamVjdCBkdWUgdG8gdGhlIGNoZWNrYm94ZXMgYmVpbmcgaW4gYSB0YWJsZVxuXHQkc2NvcGUuZW1haWxzID0ge307XG4gICAgJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHQkc2NvcGUuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gNTA7XG5cdCRzY29wZS50b3RhbFJlc3VsdHMgPSAwO1xuXG4gICAgJHNjb3BlLmVtYWlsTGlzdCA9IFsgXTtcblxuICAgICRzY29wZS5zZWFyY2hMaXN0QnRuID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5lbWFpbExpc3QgPSBbXTtcblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAgLS0gd2lsbCBzZWFyY2ggYnkgemlwXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnemlwQ2snKSB7XG5cbiAgICAgICAgICAgIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCd6aXAnLCAkc2NvcGUuemlwLmRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTG9hZGVkICcrICRzY29wZS50b3RhbFJlc3VsdHMgKycgcmVzdWx0cycpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3VsdHMnKTtcblx0XHRcdFx0fSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtIHdpbGwgc2VhcmNoIGJ5IGFnZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2FnZUNrJykge1xuICAgICAgICAgICAgdmFyIGFnZSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdhZ2UnLCAkc2NvcGUuYWdlLmRhdGEpO1xuICAgICAgICAgICAgYWdlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL1RISVMgV09SS1MgLS1nZXQgYWxsIGZhbWlsaWVzIGlmIGZhbSBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnZmFtJykge1xuICAgICAgICAgICAgdmFyIGZhbSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdmYW1pbHknLCAnJyk7XG4gICAgICAgICAgICBmYW0udGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZ2V0IGFsbCBjb3JwIGlmIGNvcnAgaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2NvcnAnKSB7XG4gICAgICAgICAgICB2YXIgY29tcCA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdjb21wYW55JywgJycpO1xuICAgICAgICAgICAgY29tcC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9lbXB0eSB0aGUgc2VhcmNoIGJveFxuICAgICAgICRzY29wZS50eXBlPXt9O1xuICAgICAgICAkc2NvcGUuYWdlPXt9O1xuICAgICAgICAkc2NvcGUuemlwPXt9O1xuXG4gICAgfTtcbiAgICAkc2NvcGUucG9wdWxhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9hbGVydCgnd29ya2luZycpO1xuICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzKTtcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvcExpc3QoJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgICAgICAvLy50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgJChcIi5zZWFyY2hcIikuaGlkZSgpO1xuICAgICAgICAgICAgLy8gICAgJChcIi5lbmRNZXNzYWdlXCIpLmFwcGVuZChcIjxoMj5zZW50PC9oMj5cIik7XG4gICAgICAgICAgICAvL30pO1xuICB9O1xuXG5cdCRzY29wZS5sb2FkTW9yZSA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgKz0gNTA7XG5cdH07XG5cblx0JHNjb3BlLnNob3dBbGwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkID0gJHNjb3BlLnRvdGFsUmVzdWx0cztcblx0fTtcblxuXHQkc2NvcGUuY2hlY2tBbGwgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdHZhciAkYnV0dG9uID0gYW5ndWxhci5lbGVtZW50KGV2ZW50LnRhcmdldCk7XG5cdFx0aWYoJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscy5sZW5ndGggPT0gJHNjb3BlLnRvdGFsUmVzdWx0cykge1xuXHRcdFx0JHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHRcdFx0JGJ1dHRvbi52YWwoXCJDaGVjayBBbGxcIik7XG5cdFx0fWVsc2V7XG5cdFx0XHQkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzID0gYW5ndWxhci5jb3B5KCRzY29wZS5lbWFpbExpc3QpO1xuXHRcdFx0JGJ1dHRvbi52YWwoXCJVbmNoZWNrIEFsbFwiKTtcblx0XHR9XG5cdH07XG59XSk7XG5cblxuIiwiYXBwLmZhY3RvcnkoJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXG4gICAgZnVuY3Rpb24gbWFrZURhdGFDYWxsKHR5cGUsIHBhc3NlZERhdGEpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gdGhlIG1ha2UgZGF0YSBjYWxsJywgdHlwZSwgcGFzc2VkRGF0YSk7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9jcmVhdGVNYWlsTGlzdCcsXG4gICAgICAgICAgICBwYXJhbXM6IHt0eXBlOiB0eXBlLCBzZWFyY2g6IHBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGxcbiAgICB9O1xuXG5cbn1dKTsiLCIvL2VkaXQgZmFtaWx5IG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdEZhbWlseUN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSkge1xuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgYWR1bHRzIGFuZCBraWRzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmFkdWx0cyA9IFJlc3VsdFNlcnZpY2UuYWR1bHRzO1xuXHQkc2NvcGUua2lkcyA9IFJlc3VsdFNlcnZpY2Uua2lkcztcblx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRhZHVsdE9uZToge30sXG5cdFx0YWR1bHRUd286IHt9LFxuXHRcdGVtZXJnZW5jeToge30sXG5cdFx0Y2hpbGRyZW46IFtdLFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXG5cdCRzY29wZS5jbGVhckZhbWlseSA9IGZ1bmN0aW9uIChmb3Jtc0FycmF5KSB7XG5cdFx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRcdGFkdWx0T25lOiB7fSxcblx0XHRcdGFkdWx0VHdvOiB7fSxcblx0XHRcdGVtZXJnZW5jeToge30sXG5cdFx0XHRjaGlsZHJlbjogW10sXG5cdFx0XHRkb25hdGlvbnM6IFtdXG5cdFx0fTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0XHRmb3Jtc0FycmF5LmZvckVhY2goZnVuY3Rpb24gKHYpIHtcblx0XHRcdCQoJyMnKyB2ICsnIC5qcy12YWxpZGF0ZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkKHRoaXMpLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblxuXG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2ZhbWlseSBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vZmFtaWx5Jyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHQkc2NvcGUuZmFtaWx5ID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5mYW1pbHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBmYW1pbHlcblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJTYXZlIHN1Ym1pdHRlZFwiLCAkc2NvcGUuZmFtaWx5KTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmZhbWlseS5pZCkge1xuXHRcdFx0aWYodmFsaWRTZXJ2aWNlLnZhbGlkYXRlRm9ybShbXCJBZGRGYW1JbmZvRm9ybVwiLCBcIkFkZEZhbUVtZXJGb3JtXCJdKSkge1xuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdFx0dXJsOiAnL2ZhbWlseScsXG5cdFx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgZmFtaWx5LCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRUd28gPSAocmVzLmRhdGEuYWR1bHRUd28pID8gcmVzLmRhdGEuYWR1bHRUd28gOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkFkZCBmYW1pbHkgZmFpbGVkIGlucHV0IHRlc3RzXCIpO1xuXHRcdFx0fVxuXHRcdH1lbHNlIHtcblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiRWRpdEZhbUluZm9Gb3JtXCIsIFwiRWRpdEZhbUVtZXJGb3JtXCJdKSkge1xuXHRcdFx0XHQvLyBpbnNlcnQgZmFtaWx5IC0gaGFzIG5vIGlkXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiaW5zZXJ0IGZhbWlseVwiLCAkc2NvcGUuZmFtaWx5KTtcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdFx0dXJsOiAnL2ZhbWlseScsXG5cdFx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQdXQgZmFtaWx5LCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRUd28gPSAocmVzLmRhdGEuYWR1bHRUd28pID8gcmVzLmRhdGEuYWR1bHRUd28gOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVkaXQgZmFtaWx5IGZhaWxlZCBpbnB1dCB0ZXN0c1wiKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8gZm9yIGFwcGVuZGluZyBjaGlsZHJlbiB0byBtb2RlbCBiZWZvcmUgc2F2aW5nIG5ldyBmYW1pbHlcblx0JHNjb3BlLmFkZENoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiY2hpbGQgYWRkZWRcIiwgJHNjb3BlLm5ld0NoaWxkLCAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuKTtcblx0XHQvLyBpZiB0cnVlLCB0aGVuIHVwZGF0ZSB0aGF0IGluZGV4XG5cdFx0aWYoJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlblskc2NvcGUuZWRpdGluZ0NoaWxkXSA9ICRzY29wZS5uZXdDaGlsZDtcblx0XHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBlbHNlIHB1c2ggdG8gYXJyYXlcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ucHVzaCgkc2NvcGUubmV3Q2hpbGQpO1xuXHRcdH1cblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0fTtcblxuXHQvLyBlZGl0IGNoaWxkIG9uIHRoZSBhZGQgY2hpbGRyZW4gdGFiIG9mIGFkZCBmYW1pbHlcblx0JHNjb3BlLmVkaXRDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdC8vIHNhdmUgaW5kZXggb2YgY2hpbGQgZWRpdGluZ1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBpbmRleDtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuW2luZGV4XTtcblx0fTtcblxuXHQkc2NvcGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIHJlbW92ZSBjaGlsZCBpbmRleFwiLCBpbmRleCwgXCIgZWRpdCBcIiwgJHNjb3BlLmVkaXRpbmdDaGlsZCk7XG5cdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdGlmKGluZGV4ID09ICRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZWRpdCBtYXRjaFwiKTtcblx0XHRcdCRzY29wZS5jbGVhckNoaWxkKCk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJubyBlZGl0IG1hdGNoXCIpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBjbGVhcnMgdGV4dCBib3hlcyBpbiBhZGQgZmFtaWx5LT5jaGlsZHJlbiB0YWJcblx0JHNjb3BlLmNsZWFyQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiBjbGVhciBjaGlsZFwiKTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7XG5cdFx0XHRmaXJzdE5hbWU6ICcnLFxuXHRcdFx0bGFzdE5hbWU6ICcnLFxuXHRcdFx0YmlydGhkYXRlOiAnJyxcblx0XHRcdHNjaG9vbDogJycsXG5cdFx0XHRub3RlczogJydcblx0XHR9O1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0fTtcblxuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG5cdC8vLy8gcHJldmVudCBhY2NpZGVudGFsIGJhY2tzXG5cdC8vJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCBldmVudCwgb2xkVXJsICkge1xuXHQvL1x0Y29uc29sZS5sb2coXCJvbGQgdXJsOiBcIiwgb2xkVXJsKTtcblx0Ly9cdGlmKC8oYWRkZmFtaWx5KS8udGVzdChvbGRVcmwpKSB7XG5cdC8vXHRcdHZhciBhbnN3ZXIgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlIHRoaXMgcGFnZT9cIik7XG5cdC8vXHRcdGlmICghYW5zd2VyKSB7XG5cdC8vXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly9cdFx0fVxuXHQvL1x0fVxuXHQvL30pO1xuXG59XSk7IiwiLy9jb250cm9sbGVycyBmb3IgbG9naW5cbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvc2VhcmNoXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsIlxuLy9UaGlzIHNob3VsZCBnZXQgdGhlIHNlYXJjaCBpdGVtXG5hcHAuY29udHJvbGxlcignc2VhcmNoRnVuY3Rpb24nLCBbJyRzY29wZScsICckaHR0cCcsICdSZXN1bHRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIFJlc3VsdFNlcnZpY2UpIHtcbiAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuXG4gICAgJHNjb3BlLnNlYXJjaEJ0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgIFJlc3VsdFNlcnZpY2UubWFrZURhdGFDYWxsKCRzY29wZS5mb3JtSW5wdXQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBpbnB1dCB0ZXh0JywgJHNjb3BlLmZvcm1JbnB1dCk7XG4gICAgICAgIC8vZW1wdHlzIHRoZSBzZWFyY2ggYm94XG4gICAgICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG4gICAgfTtcblxufV0pO1xuIiwiLy9UaGlzIHNlcnZpY2Ugc2hvdWxkIHBhc3MgZGF0YSBiZXR3ZWVuIGNvbnRyb2xsZXJzXG5hcHAuZmFjdG9yeSgnUmVzdWx0U2VydmljZScsIFsnJGh0dHAnLGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgYWR1bHRzID0gW107XG4gICAgdmFyIGNvbXBhbmllcyA9IFtdO1xuICAgIHZhciBraWRzID0gW107XG5cbiAgICB2YXIgbWFrZURhdGFDYWxsID0gZnVuY3Rpb24ocGFzc2VkRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL3NlYXJjaCcsXG4gICAgICAgICAgICBwYXJhbXM6e3NlYXJjaDpwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRLaWRzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0QWR1bHRzKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBnZXRDb21wYW5pZXMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDEgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgY29tcGFuaWVzLnNwbGljZSgwLGNvbXBhbmllcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjb21wYW55JylcbiAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0RWxlbWVudDEoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50MScsY29tcGFuaWVzKTtcbiAgICAgICAgcmV0dXJuIGNvbXBhbmllc1xuICAgIH07XG5cbiAgICB2YXIgZ2V0QWR1bHRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQyID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGFkdWx0cy5zcGxpY2UoMCxhZHVsdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnYWR1bHQnKVxuICAgICAgICAgICAgICAgICAgICBhZHVsdHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQyKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gZ2V0RWxlbWVudDInLCBhZHVsdHMpO1xuICAgICAgICByZXR1cm4gYWR1bHRzXG4gICAgfTtcblxuICAgIHZhciBnZXRLaWRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGtpZHMuc3BsaWNlKDAsa2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjaGlsZCcpXG4gICAgICAgICAgICAgICAgICAgIGtpZHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudHMzJywga2lkcyk7XG4gICAgICAgIHJldHVybiBraWRzXG4gICAgfTtcblxuICAgIC8vcHVibGljXG4gICAgdmFyIHB1YmxpY0FwaSA9IHtcbiAgICAgICAgZ2V0S2lkczogZ2V0S2lkcyxcbiAgICAgICAgZ2V0QWR1bHRzOiBnZXRBZHVsdHMsXG4gICAgICAgIGdldENvbXBhbmllczogZ2V0Q29tcGFuaWVzLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbCxcbiAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgY29tcGFuaWVzOiBjb21wYW5pZXMsXG4gICAgICAgIGFkdWx0czogYWR1bHRzLFxuICAgICAgICBraWRzOiBraWRzXG4gICAgfTtcbiAgICByZXR1cm4gcHVibGljQXBpO1xufV0pOyIsIi8vIFBsZWFzZSBub3RlIHRoYXQgJG1vZGFsSW5zdGFuY2UgcmVwcmVzZW50cyBhIG1vZGFsIHdpbmRvdyAoaW5zdGFuY2UpIGRlcGVuZGVuY3kuXG4vLyBJdCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlICR1aWJNb2RhbCBzZXJ2aWNlIHVzZWQgYWJvdmUuXG5cbi8vbmVlZGVkIGZvciBtb2RhbD8/IHByZXR0eSBzdXJlXG5hcHAuY29udHJvbGxlcignTW9kYWxJbnN0YW5jZUN0cmwnLFsnJHNjb3BlJywnJG1vZGFsSW5zdGFuY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuXG4gICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUuc2VsZWN0ZWQuaXRlbSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgIH07XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ2F1dGhTZXJ2aWNlJywnJHNjb3BlJywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKGF1dGhTZXJ2aWNlLCAkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgfVxufV0pO1xuIiwiLy8gQWpheCBmb3IgY3JlYXRpbmcgdGhlIGNvbnRhY3QgbGlzdCBpbiBjb25zdGFudCBjb250YWN0XG5hcHAuY29udHJvbGxlcignbmV3Q29udGFjdExpc3RDb250cm9sbGVyJyxbJ25ld0NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuXG4gICAgJHNjb3BlLmxpc3RuYW1lID0ge307XG5cbiAgICAkc2NvcGUuY3JlYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgbGlzdCBuYW1lIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvc3RMaXN0KCRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXG4gICAgICAgICRzY29wZS5saXN0bmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG5cbiIsIlxuYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4gICAgICAgIHZhciBsaXN0TnVtID0gXCJcIjtcbiAgICAgICAgdmFyIGltcG9ydERhdGFBcnJheSA9W107XG5cbiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRpZCB0aGUgbmFtZSBtYWtlIGl0IHRvIHRoZSBzZXJ2aWNlPyBcIiArIG5hbWUgKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqZWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBvYmplY3QubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogb2JqZWN0LmNvbXBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogb2JqZWN0LmNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydERhdGFBcnJheS5wdXNoKHRoaXMuY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZHJlc3NcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSYtXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKFsoXVswLTldezN9WyldfFswLTldezN9KVtcXHNcXC0uXT9bMC05XXszfVtcXHNcXC0uXT9bMC05XXs0fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4dFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHM6LV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXjIwWzAtOV17Mn1bLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDE5OVswLTldfDIwWzAtOV17Mn0pWy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFtb3VudFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXltcXCRdP1tcXGRdKyhbLl1bXFxkXXsyfSk/JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBjbGFzcyBzZWFyY2hcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmVxdWlyZWQgb3IgdHJpbW1lZCBsZW5ndGggaXMgbm90IDAsIHRoZW4gdmFsaWRhdGUgaW5mb1xuICAgICAgICBpZigkb2JqLmF0dHIoJ3JlcXVpcmVkJykgfHwgJG9iai52YWwoKSkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHZhbHVlIG1hdGNoZXMgcmVnZXggZm9yIGZpZWxkIHR5cGVcbiAgICAgICAgICAgIGlmKCFwYXR0ZXJuLnRlc3QoJG9iai52YWwoKS50cmltKCkpIHx8ICRvYmoudmFsKCkudHJpbSgpLmxlbmd0aCA9PSAwICYmICRvYmouYXR0cigncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGZhaWxzLCBhZGRzIGludmFsaWQgY2xhc3MgKGhpZ2hsaWdodGluZyksIGNoYW5nZXMgcGxhY2Vob2xkZXIgdG8gd2hhdCBzaG91bGQgYmUgZW50ZXJlZFxuICAgICAgICAgICAgICAgICRvYmouYWRkQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICRvYmouZGF0YSgnaW52YWxpZCcpKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgZmFpbGVkIHRlc3QnLCBwYXR0ZXJuKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXNzZXMsIHJlbW92ZXMgaW52YWxpZCBjbGFzcywgcmVzZXRzIHBsYWNlaG9sZGVyIHRvIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAkb2JqLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgcGFzc2VkIHRlc3QnLCBwYXR0ZXJuKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdHZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiAoZm9ybXMpIHtcblx0XHR2YXIgcGFzcyA9IHRydWU7XG5cdFx0Zm9ybXMuZm9yRWFjaChmdW5jdGlvbiAodiwgaSwgYSkge1xuXHRcdFx0JCgnIycrIHYgKycgLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmKHZhbGlkYXRlSW5wdXQoJCh0aGlzKS5kYXRhKCd0eXBlJyksICQodGhpcykuYXR0cignaWQnKSkgPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygkKHRoaXMpLmF0dHIoJ2lkJykgK1wiIGZhaWxlZCB0aGUgdGVzdCBcIisgJCh0aGlzKS5kYXRhKCd0eXBlJykgK1wiIGVudGVyZWQgaW5mbzogXCIrICQodGhpcykudmFsKCkpO1xuXHRcdFx0XHRcdHBhc3MgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBhc3M7XG5cdH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0LFxuXHRcdHZhbGlkYXRlRm9ybTogdmFsaWRhdGVGb3JtXG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
