function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,a,e){return{request:function(t){return t.headers=t.headers||{},e.isAuthed()&&(t.headers.Authorization="Bearer "+e.getToken()),t},response:function(e){return 401===e.status&&a.path("/"),e||t.when(e)},responseError:function(e){return 401===e.status?a.path("/"):console.log(e.status),t.reject(e)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(a){if(a){var e=a.split(".")[1],n=e.replace("-","+").replace("_","/");return JSON.parse(t.atob(n))}return{}},this.saveToken=function(a){t.localStorage.jwtToken=a},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var a=this.parseJwt(t),e=Math.round((new Date).getTime()/1e3)<=a.exp;return e||this.logout(),e}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,n,o,i){t.validateInput=i.validateInput,t.companies=n.companies,t.corp={contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.open=function(n,i){return console.log("corp call",i),o({method:"GET",url:"../corporation",params:{id:i}}).then(function(o){t.company=o.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.company}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("insert corp",t.corp),o({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Put corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}})):o({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Posted corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData",function(t,a,e,n){t.type={},t.age={},t.zip={},t.emailList=[],t.searchListBtn=function(){if("zipCk"==t.type&&e.makeDataCall("zip",t.zip.data).then(function(a){t.emailList=a,console.log(t.emailList)}),"ageCk"==t.type){var a=e.makeDataCall("age",t.age.data);a.then(function(a){console.log(a),t.emailList=a})}if("fam"==t.type){var n=e.makeDataCall("family","");n.then(function(a){t.emailList=a,console.log(a)})}if("corp"==t.type){var o=e.makeDataCall("company","");o.then(function(a){t.emailList=a,console.log(a)})}t.type={},t.age={},t.zip={}},t.populateList=function(){alert("working"),n.popList(t.emailList).then(function(){$(".search").hide(),$(".endMessage").append("<h2>sent</h2>")})}}]),app.factory("ContactListDataService",["$http","$q",function(t,a){function e(e,n){var o=a.defer();return console.log("this is in the make data call",e,n),t({method:"GET",url:"../createMailList",params:{type:e,search:n}}).then(function(t){data=t.data,o.resolve(t.data)}),o.promise}return{data:[],makeDataCall:e}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,n,o,i){t.validateInput=i.validateInput,t.adults=n.adults,t.kids=n.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.animationsEnabled=!0,t.open=function(n,i){return console.log("family call",i),o({method:"GET",url:"../family",params:{id:i}}).then(function(o){t.family=o.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),o({method:"PUT",url:"/family",data:{family:t.family}}).then(function(a){console.log("Put family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]})):o({method:"POST",url:"/family",data:{family:t.family}}).then(function(a){console.log("Posted family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(a){t.editingChild=a,t.newChild=t.family.children[a]},t.removeChild=function(a){console.log("in remove child index",a," edit ",t.editingChild),t.family.children.splice(a,1),a==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,a,e,n,o){t.submit=function(){a.post("/login",t.form).then(function(t){e.saveToken(t.data),o.user=e.getUser(),n.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,a,e){t.formInput={},t.searchBtn=function(){e.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var a=[],e=[],n=[],o=[],i=function(e){return t({method:"GET",url:"../search",params:{search:e}}).then(function(t){a=t.data,l(a),s(a),r(a)})},l=function(t){var a=function(t){n.splice(0,n.length),t.forEach(function(t){"company"==t.type&&n.push(t)})};return a(t),console.log("this is getElement1",n),n},r=function(t){var a=function(t){e.splice(0,e.length),t.forEach(function(t){"adult"==t.type&&e.push(t)})};return a(t),console.log("this is in getElement2",e),e},s=function(t){var a=function(t){o.splice(0,o.length),t.forEach(function(t){"child"==t.type&&o.push(t)})};return a(t),console.log("this is getElements3",o),o},c={getKids:s,getAdults:r,getCompanies:l,makeDataCall:i,results:a,companies:n,adults:e,kids:o};return c}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,a){t.ok=function(){a.close(t.selected.item)},t.cancel=function(){a.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,a,e,n){e.user=t.getUser(),e.user&&e.user.username&&n.path("/home"),a.logout=function(){t.logout(),e.user=t.getUser(),n.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,a){a.listname={},a.createList=function(){console.log("create list: "+a.listname.input),t.postList(a.listname.input),console.log("list #",t.listNum),a.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,a){this.newContactList=[],this.listNum="2006066267",this.importDataArray=[{email_addresses:["user1@example.com"],first_name:"John",last_name:"Smith",company_name:"Company X",addresses:[{city:"anytown"}]},{email_addresses:["user2@example.com"],first_name:"Jane",last_name:"Smithy",company_name:"Company Y",addresses:[{city:"sometown"}]}],this.postList=function(t){return console.log("did the name make it to the service? "+t),a.post("/newContactList",{name:t}).then(function(t){console.log(t.data),listNum=t.data,console.log("Id? ",listNum)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:this.importDataArray,listNum:this.listNum},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),e(t),a.post("/populateContactList",this.dataObject).then(function(t,a,e,n){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var e=function(t){$(":checked").each(function(){if(id==t.email){var a={email_addresses:[$(this).email],first_name:$(this).firstName,last_name:$(this).lastName,company_name:$(this).company,addresses:[{city:$(this).city}]};importDataArray.push(a)}})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,a,e){a.listName={},a.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),a.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),a.post("/register",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("edit password:",t.form),a.put("/admin",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.service("validService",[function(){var t=function(t,a){var e,n=a?$("#"+a):!1;switch(console.log("object is ",n,t,a),t){case"name":case"city":case"state":e=/^[a-zA-z\s,.'-]+$/;break;case"corpName":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":e=/^[0-9]{5}$/;break;case"phone":e=/^[0-9\s.\/()-]$/;break;case"email":e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":e=/^[a-zA-Z0-9\s:-]+$/;break;case"date":e=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":e=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":e=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}(n.attr("required")||n.val().trim().length>0)&&(e.test(n.val().trim())?(n.removeClass("invalid").attr("placeholder",n.data("placeholder")),console.log(t," passed test",e)):(n.addClass("invalid").attr("placeholder",n.data("invalid")).val(""),console.log(t," failed test",e)))};return{validateInput:t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJjb250YWN0IiwiZG9uYXRpb25zIiwibmV3RG9uYXRpb24iLCJhbmltYXRpb25zRW5hYmxlZCIsIm9wZW4iLCJzaXplIiwiaWQiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwiY29tcGFueSIsImRhdGEiLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsImluZm8iLCJ0b2dnbGVBbmltYXRpb24iLCJzYXZlIiwicmVzIiwibGVuZ3RoIiwiYWRkRG9uYXRpb24iLCJwdXNoIiwiQ29udGFjdExpc3REYXRhU2VydmljZSIsIm5ld0NvbnRhY3RMaXN0RGF0YSIsInR5cGUiLCJhZ2UiLCJ6aXAiLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwiZmFtIiwiY29tcCIsInBvcHVsYXRlTGlzdCIsImFsZXJ0IiwicG9wTGlzdCIsIiQiLCJoaWRlIiwiYXBwZW5kIiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwiYWR1bHRzIiwia2lkcyIsImZhbWlseSIsImFkdWx0T25lIiwiYWR1bHRUd28iLCJlbWVyZ2VuY3kiLCJjaGlsZHJlbiIsIm5ld0NoaWxkIiwiYWRkQ2hpbGQiLCJlZGl0aW5nQ2hpbGQiLCJlZGl0Q2hpbGQiLCJpbmRleCIsInJlbW92ZUNoaWxkIiwic3BsaWNlIiwiY2xlYXJDaGlsZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYmlydGhkYXRlIiwic2Nob29sIiwibm90ZXMiLCIkcm9vdFNjb3BlIiwic3VibWl0IiwicG9zdCIsImZvcm0iLCJ1c2VyIiwiZm9ybUlucHV0Iiwic2VhcmNoQnRuIiwicmVzdWx0cyIsImdldENvbXBhbmllcyIsImdldEtpZHMiLCJnZXRBZHVsdHMiLCJhcnJheSIsImdldEVsZW1lbnQxIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJnZXRFbGVtZW50MiIsImdldEVsZW1lbnQzIiwicHVibGljQXBpIiwiJG1vZGFsSW5zdGFuY2UiLCJvayIsImNsb3NlIiwiaXRlbSIsImNhbmNlbCIsImRpc21pc3MiLCJ1c2VybmFtZSIsImxpc3RuYW1lIiwiY3JlYXRlTGlzdCIsImlucHV0IiwicG9zdExpc3QiLCJsaXN0TnVtIiwibmV3Q29udGFjdExpc3QiLCJpbXBvcnREYXRhQXJyYXkiLCJlbWFpbF9hZGRyZXNzZXMiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueV9uYW1lIiwiYWRkcmVzc2VzIiwiY2l0eSIsIm5hbWUiLCJsaXN0IiwiZGF0YU9iamVjdCIsImdldENoZWNrZWQiLCJsIiwiZWFjaCIsImVtYWlsIiwiY29udGFjdE9iamVjdCIsImxpc3ROYW1lIiwicHV0IiwicGF0dGVybiIsIiRvYmoiLCJhdHRyIiwidmFsIiwidHJpbSIsInRlc3QiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFLQSxRQUFBQSxhQUFBQyxHQUNBLE9BQ0FDLEtBQUFDLE9BQUFGLEdBQUFHLE9BQUFDLFVBQ0FDLE9BQUFILE9BQUFGLEdBQUFHLE9BQUFHLGFBUkEsR0FBQUMsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxpQkFFQUgsV0FBQSxjQUNBRixTQUFBLHNCQVNBRyxLQUFBRyxRQUFBLGlCQUNBLFNBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsS0FDQUMsWUFBQSxzQkFFQUQsS0FBQSxXQUNBQyxZQUFBLHdCQUVBRCxLQUFBLGFBQ0FDLFlBQUEseUJBRUFELEtBQUEsZ0JBQ0FDLFlB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QUFBLGtEQUNBLE1BQ0EsS0FBQSxRQUNBQSxFQUFBLHFEQUNBLE1BQ0EsS0FBQSxNQUNBQSxFQUFBLG9CQUNBLE1BQ0EsS0FBQSxPQUNBQSxFQUFBLDREQUNBLE1BQ0EsS0FBQSxZQUNBQSxFQUFBLHVFQUNBLE1BQ0EsS0FBQSxTQUNBQSxFQUFBLDJCQUNBLE1BQ0EsU0FFQSxNQURBeEosU0FBQUMsSUFBQSx5QkFDQSxHQUtBd0osRUFBQUMsS0FBQSxhQUFBRCxFQUFBRSxNQUFBQyxPQUFBaEcsT0FBQSxLQUVBNEYsRUFBQUssS0FBQUosRUFBQUUsTUFBQUMsU0FNQUgsRUFBQUssWUFBQSxXQUFBSixLQUFBLGNBQUFELEVBQUExRyxLQUFBLGdCQUNBL0MsUUFBQUMsSUFBQWdFLEVBQUEsZUFBQXVGLEtBTEFDLEVBQUFNLFNBQUEsV0FBQUwsS0FBQSxjQUFBRCxFQUFBMUcsS0FBQSxZQUFBNEcsSUFBQSxJQUNBM0osUUFBQUMsSUFBQWdFLEVBQUEsZUFBQXVGLEtBU0EsUUFDQXZILGNBQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2xlbycsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJ10pO1xuXG52YXIgcHJldHR5RGF0ZSA9IFwiTU0vREQvWVlnWVlcIjtcbnZhciBmdWxsRGF0ZSA9IFwiTU0vREQvWVlZWSBoOm1tOnNzIGFcIjtcblxuZnVuY3Rpb24gZm9ybWF0RGF0ZXMgKGRhdGUpIHtcblx0cmV0dXJuIHtcblx0XHRmdWxsOiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZ1bGxEYXRlKSxcblx0XHRwcmV0dHk6IG1vbWVudChkYXRlKS5mb3JtYXQocHJldHR5RGF0ZSlcblx0fTtcbn1cblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRGYW1pbHlDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRDb3JwQ3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RsaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvc2VhcmNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pO1xuXG5cblxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBjb3Jwb3JhdGlvbiBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRDb3JwQ3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlKSB7XG5cblx0Ly8gc2V0cyB2YWxpZGF0aW9uIGZyb20gc2VydmljZSBmb3IgZG9tIGNhbGxzXG5cdCRzY29wZS52YWxpZGF0ZUlucHV0ID0gdmFsaWRTZXJ2aWNlLnZhbGlkYXRlSW5wdXQ7XG5cdC8vc2VuZHMgdGhlIGNvbXBhbmllcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5jb21wYW5pZXMgPSBSZXN1bHRTZXJ2aWNlLmNvbXBhbmllcztcblx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0Y29udGFjdDoge30sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdjb3JwIGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9jb3Jwb3JhdGlvbicsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmNvbXBhbnkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5jb21wYW55O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBjb3JwXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmNvcnApO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuY29ycC5pZCkge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBpbnNlcnQgY29ycCAtIGhhcyBubyBpZFxuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNlcnQgY29ycFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblxuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsICRzY29wZS5uZXdEb25hdGlvbiwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUxpc3RTZWFyY2gnLCBbJyRzY29wZScsICckaHR0cCcsICdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgJ25ld0NvbnRhY3RMaXN0RGF0YScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBDb250YWN0TGlzdERhdGFTZXJ2aWNlLG5ld0NvbnRhY3RMaXN0RGF0YSkge1xuICAgICRzY29wZS50eXBlID17fTtcbiAgICAkc2NvcGUuYWdlPXt9O1xuICAgICRzY29wZS56aXA9e307XG5cblxuICAgICRzY29wZS5lbWFpbExpc3QgPSBbIF07XG5cbiAgICAkc2NvcGUuc2VhcmNoTGlzdEJ0biA9IGZ1bmN0aW9uICgpIHtcblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAgLS0gd2lsbCBzZWFyY2ggYnkgemlwXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnemlwQ2snKSB7XG5cbiAgICAgICAgICAgIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCd6aXAnLCAkc2NvcGUuemlwLmRhdGEpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lbWFpbExpc3QpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtIHdpbGwgc2VhcmNoIGJ5IGFnZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2FnZUNrJykge1xuICAgICAgICAgICAgdmFyIGFnZSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdhZ2UnLCAkc2NvcGUuYWdlLmRhdGEpO1xuICAgICAgICAgICAgYWdlLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9USElTIFdPUktTIC0tZ2V0IGFsbCBmYW1pbGllcyBpZiBmYW0gaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2ZhbScpIHtcbiAgICAgICAgICAgIHZhciBmYW0gPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnZmFtaWx5JywgJycpO1xuICAgICAgICAgICAgZmFtLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9nZXQgYWxsIGNvcnAgaWYgY29ycCBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnY29ycCcpIHtcbiAgICAgICAgICAgIHZhciBjb21wID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2NvbXBhbnknLCAnJyk7XG4gICAgICAgICAgICBjb21wLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9lbXB0eSB0aGUgc2VhcmNoIGJveFxuICAgICAgICRzY29wZS50eXBlPXt9O1xuICAgICAgICAkc2NvcGUuYWdlPXt9O1xuICAgICAgICAkc2NvcGUuemlwPXt9O1xuXG4gICAgfTtcbiAgICAkc2NvcGUucG9wdWxhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWxlcnQoJ3dvcmtpbmcnKTtcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvcExpc3QoJHNjb3BlLmVtYWlsTGlzdClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCIuc2VhcmNoXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLmVuZE1lc3NhZ2VcIikuYXBwZW5kKFwiPGgyPnNlbnQ8L2gyPlwiKTtcbiAgICAgICAgICAgIH0pO1xuICB9O1xuXG59XSk7XG5cblxuIiwiYXBwLmZhY3RvcnkoJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24gKCRodHRwLCAkcSkge1xuXG4gICAgZnVuY3Rpb24gbWFrZURhdGFDYWxsKHR5cGUsIHBhc3NlZERhdGEpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gdGhlIG1ha2UgZGF0YSBjYWxsJywgdHlwZSwgcGFzc2VkRGF0YSk7XG4gICAgICAgICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9jcmVhdGVNYWlsTGlzdCcsXG4gICAgICAgICAgICBwYXJhbXM6IHt0eXBlOiB0eXBlLCBzZWFyY2g6IHBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGxcbiAgICB9O1xuXG5cbn1dKTsiLCIvL2VkaXQgZmFtaWx5IG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdEZhbWlseUN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSkge1xuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgYWR1bHRzIGFuZCBraWRzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmFkdWx0cyA9IFJlc3VsdFNlcnZpY2UuYWR1bHRzO1xuXHQkc2NvcGUua2lkcyA9IFJlc3VsdFNlcnZpY2Uua2lkcztcblx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRhZHVsdE9uZToge30sXG5cdFx0YWR1bHRUd286IHt9LFxuXHRcdGVtZXJnZW5jeToge30sXG5cdFx0Y2hpbGRyZW46IFtdLFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2ZhbWlseSBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vZmFtaWx5Jyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHQkc2NvcGUuZmFtaWx5ID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5mYW1pbHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBmYW1pbHlcblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJTYXZlIHN1Ym1pdHRlZFwiLCAkc2NvcGUuZmFtaWx5KTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmZhbWlseS5pZCkge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2ZhbWlseScsXG5cdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgZmFtaWx5LCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0T25lID0gKHJlcy5kYXRhLmFkdWx0T25lKSA/IHJlcy5kYXRhLmFkdWx0T25lIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRUd28gPSAocmVzLmRhdGEuYWR1bHRUd28pID8gcmVzLmRhdGEuYWR1bHRUd28gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0fSk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gaW5zZXJ0IGZhbWlseSAtIGhhcyBubyBpZFxuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNlcnQgZmFtaWx5XCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gZm9yIGFwcGVuZGluZyBjaGlsZHJlbiB0byBtb2RlbCBiZWZvcmUgc2F2aW5nIG5ldyBmYW1pbHlcblx0JHNjb3BlLmFkZENoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiY2hpbGQgYWRkZWRcIiwgJHNjb3BlLm5ld0NoaWxkLCAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuKTtcblx0XHQvLyBpZiB0cnVlLCB0aGVuIHVwZGF0ZSB0aGF0IGluZGV4XG5cdFx0aWYoJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlblskc2NvcGUuZWRpdGluZ0NoaWxkXSA9ICRzY29wZS5uZXdDaGlsZDtcblx0XHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBlbHNlIHB1c2ggdG8gYXJyYXlcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ucHVzaCgkc2NvcGUubmV3Q2hpbGQpO1xuXHRcdH1cblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0fTtcblxuXHQvLyBlZGl0IGNoaWxkIG9uIHRoZSBhZGQgY2hpbGRyZW4gdGFiIG9mIGFkZCBmYW1pbHlcblx0JHNjb3BlLmVkaXRDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdC8vIHNhdmUgaW5kZXggb2YgY2hpbGQgZWRpdGluZ1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBpbmRleDtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuW2luZGV4XTtcblx0fTtcblxuXHQkc2NvcGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIHJlbW92ZSBjaGlsZCBpbmRleFwiLCBpbmRleCwgXCIgZWRpdCBcIiwgJHNjb3BlLmVkaXRpbmdDaGlsZCk7XG5cdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdGlmKGluZGV4ID09ICRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZWRpdCBtYXRjaFwiKTtcblx0XHRcdCRzY29wZS5jbGVhckNoaWxkKCk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJubyBlZGl0IG1hdGNoXCIpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBjbGVhcnMgdGV4dCBib3hlcyBpbiBhZGQgZmFtaWx5LT5jaGlsZHJlbiB0YWJcblx0JHNjb3BlLmNsZWFyQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiBjbGVhciBjaGlsZFwiKTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7XG5cdFx0XHRmaXJzdE5hbWU6ICcnLFxuXHRcdFx0bGFzdE5hbWU6ICcnLFxuXHRcdFx0YmlydGhkYXRlOiAnJyxcblx0XHRcdHNjaG9vbDogJycsXG5cdFx0XHRub3RlczogJydcblx0XHR9O1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0fTtcblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3Rcblx0JHNjb3BlLmFkZERvbmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxuXHQvLy8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc1xuXHQvLyRzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiggZXZlbnQsIG9sZFVybCApIHtcblx0Ly9cdGNvbnNvbGUubG9nKFwib2xkIHVybDogXCIsIG9sZFVybCk7XG5cdC8vXHRpZigvKGFkZGZhbWlseSkvLnRlc3Qob2xkVXJsKSkge1xuXHQvL1x0XHR2YXIgYW5zd2VyID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZSB0aGlzIHBhZ2U/XCIpO1xuXHQvL1x0XHRpZiAoIWFuc3dlcikge1xuXHQvL1x0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdC8vXHRcdH1cblx0Ly9cdH1cblx0Ly99KTtcblxufV0pOyIsIi8vY29udHJvbGxlcnMgZm9yIGxvZ2luXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnYXV0aFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBhdXRoU2VydmljZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKXtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL3NlYXJjaFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XSk7XG4iLCJcbi8vVGhpcyBzaG91bGQgZ2V0IHRoZSBzZWFyY2ggaXRlbVxuYXBwLmNvbnRyb2xsZXIoJ3NlYXJjaEZ1bmN0aW9uJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnUmVzdWx0U2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBSZXN1bHRTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcblxuICAgICRzY29wZS5zZWFyY2hCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICBSZXN1bHRTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgkc2NvcGUuZm9ybUlucHV0LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyB0aGUgaW5wdXQgdGV4dCcsICRzY29wZS5mb3JtSW5wdXQpO1xuICAgICAgICAvL2VtcHR5cyB0aGUgc2VhcmNoIGJveFxuICAgICAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuICAgIH07XG5cbn1dKTtcbiIsIi8vVGhpcyBzZXJ2aWNlIHNob3VsZCBwYXNzIGRhdGEgYmV0d2VlbiBjb250cm9sbGVyc1xuYXBwLmZhY3RvcnkoJ1Jlc3VsdFNlcnZpY2UnLCBbJyRodHRwJyxmdW5jdGlvbigkaHR0cCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIGFkdWx0cyA9IFtdO1xuICAgIHZhciBjb21wYW5pZXMgPSBbXTtcbiAgICB2YXIga2lkcyA9IFtdO1xuXG4gICAgdmFyIG1ha2VEYXRhQ2FsbCA9IGZ1bmN0aW9uKHBhc3NlZERhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9zZWFyY2gnLFxuICAgICAgICAgICAgcGFyYW1zOntzZWFyY2g6cGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZ2V0Q29tcGFuaWVzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0S2lkcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEFkdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgZ2V0Q29tcGFuaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQxID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGNvbXBhbmllcy5zcGxpY2UoMCxjb21wYW5pZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY29tcGFueScpXG4gICAgICAgICAgICAgICAgY29tcGFuaWVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGdldEVsZW1lbnQxKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudDEnLGNvbXBhbmllcyk7XG4gICAgICAgIHJldHVybiBjb21wYW5pZXNcbiAgICB9O1xuXG4gICAgdmFyIGdldEFkdWx0cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBhZHVsdHMuc3BsaWNlKDAsYWR1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2FkdWx0JylcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MihhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIGdldEVsZW1lbnQyJywgYWR1bHRzKTtcbiAgICAgICAgcmV0dXJuIGFkdWx0c1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBraWRzLnNwbGljZSgwLGtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICBraWRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MyhhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnRzMycsIGtpZHMpO1xuICAgICAgICByZXR1cm4ga2lkc1xuICAgIH07XG5cbiAgICAvL3B1YmxpY1xuICAgIHZhciBwdWJsaWNBcGkgPSB7XG4gICAgICAgIGdldEtpZHM6IGdldEtpZHMsXG4gICAgICAgIGdldEFkdWx0czogZ2V0QWR1bHRzLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGwsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNvbXBhbmllczogY29tcGFuaWVzLFxuICAgICAgICBhZHVsdHM6IGFkdWx0cyxcbiAgICAgICAga2lkczoga2lkc1xuICAgIH07XG4gICAgcmV0dXJuIHB1YmxpY0FwaTtcbn1dKTsiLCIvLyBQbGVhc2Ugbm90ZSB0aGF0ICRtb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxuLy8gSXQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAkdWliTW9kYWwgc2VydmljZSB1c2VkIGFib3ZlLlxuXG4vL25lZWRlZCBmb3IgbW9kYWw/PyBwcmV0dHkgc3VyZVxuYXBwLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJyxbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgIH1cbn1dKTtcbiIsIi8vIEFqYXggZm9yIGNyZWF0aW5nIHRoZSBjb250YWN0IGxpc3QgaW4gY29uc3RhbnQgY29udGFjdFxuYXBwLmNvbnRyb2xsZXIoJ25ld0NvbnRhY3RMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCBmdW5jdGlvbihuZXdDb250YWN0TGlzdERhdGEsICRzY29wZSkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0bmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZSBsaXN0OiBcIiArICRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG4gICAgICAgIC8vcGFzc2VzIGxpc3QgbmFtZSBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3N0TGlzdCgkc2NvcGUubGlzdG5hbWUuaW5wdXQpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdsaXN0ICMnLG5ld0NvbnRhY3RMaXN0RGF0YS5saXN0TnVtKTtcblxuICAgICAgICAkc2NvcGUubGlzdG5hbWU9e307XG4gICAgfTtcbn1dKTtcblxuXG4iLCJcbmFwcC5zZXJ2aWNlKCduZXdDb250YWN0TGlzdERhdGEnLCBbJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnJGh0dHAnLFxuICAgIGZ1bmN0aW9uIChDb250YWN0TGlzdERhdGFTZXJ2aWNlLCAkaHR0cCkge1xuICAgICAgICB0aGlzLm5ld0NvbnRhY3RMaXN0ID0gW107XG4gICAgICAgIHRoaXMubGlzdE51bSA9IFwiMjAwNjA2NjI2N1wiO1xuICAgICAgICB0aGlzLmltcG9ydERhdGFBcnJheSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgIFwidXNlcjFAZXhhbXBsZS5jb21cIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6IFwiSm9oblwiLFxuICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IFwiU21pdGhcIixcbiAgICAgICAgICAgICAgICBcImNvbXBhbnlfbmFtZVwiOiBcIkNvbXBhbnkgWFwiLFxuICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IFwiYW55dG93blwiXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJlbWFpbF9hZGRyZXNzZXNcIjogW1xuICAgICAgICAgICAgICAgICAgICBcInVzZXIyQGV4YW1wbGUuY29tXCJcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFwiZmlyc3RfbmFtZVwiOiBcIkphbmVcIixcbiAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBcIlNtaXRoeVwiLFxuICAgICAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IFwiQ29tcGFueSBZXCIsXG4gICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgY2l0eTogXCJzb21ldG93blwiXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRpZCB0aGUgbmFtZSBtYWtlIGl0IHRvIHRoZSBzZXJ2aWNlPyBcIiArIG5hbWUgKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IHRoaXMuaW1wb3J0RGF0YUFycmF5LFxuICAgICAgICAgICAgICAgIFwibGlzdE51bVwiOiB0aGlzLmxpc3ROdW1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ290IHRvIHBvcExpc3QnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgZ2V0Q2hlY2tlZChsaXN0KTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9wb3B1bGF0ZUNvbnRhY3RMaXN0JywgdGhpcy5kYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0ZWQnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW1wb3J0RGF0YUFycmF5OiAnLHRoaXMuaW1wb3J0RGF0YUFycmF5LCAnXFxudHlwZTogJywgdHlwZW9mIHRoaXMuaW1wb3J0RGF0YUFycmF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvL2dldCBhbGwgdGhlIGNoZWNrZWQgZWxlbWVudHMgYW5kIHN0dWZmIHRoZW0gaW4gYW4gYXJyYXlcbiAgICAgICAgdmFyIGdldENoZWNrZWQgPSBmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgJChcIjpjaGVja2VkXCIpLmVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT0gbC5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhY3RPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6ICQodGhpcykuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6ICQodGhpcykubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogJCh0aGlzKS5jb21wYW55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6ICQodGhpcykuY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2goY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbi8vYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4vLyAgICBmdW5jdGlvbiAoQ29udGFjdExpc3REYXRhU2VydmljZSwgJGh0dHApIHtcbi8vICAgICAgICB0aGlzLm5ld0NvbnRhY3RMaXN0ID0gW107XG4vLyAgICAgICAgdGhpcy5saXN0TnVtID0gXCIwXCI7XG4vLyAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlkIHRoZSBuYW1lIG1ha2UgaXQgdG8gdGhlIHNlcnZpY2U/IFwiICsgbmFtZSApO1xuLy8gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL25ld0NvbnRhY3RMaXN0Jywge25hbWU6IG5hbWV9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4vLyAgICAgICAgICAgICAgICBsaXN0TnVtID0gcmVzcG9uc2UuZGF0YTtcbi8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSWQ/IFwiLCBsaXN0TnVtKTtcbi8vICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy9lcnJvclxuLy8gICAgICAgICAgICB9KTtcbi8vICAgICAgICB9O1xuLy8gICAgICAgIHRoaXMuaW1wb3J0RGF0YUFycmF5ID0gW1xuLy8gICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4vLyAgICAgICAgICAgICAgICAgICAgXCJ1c2VyMUBleGFtcGxlLmNvbVwiXG4vLyAgICAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6IFwiSm9oblwiLFxuLy8gICAgICAgICAgICAgICAgXCJsYXN0X25hbWVcIjogXCJTbWl0aFwiLFxuLy8gICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogXCJDb21wYW55IFhcIixcbi8vICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4vLyAgICAgICAgICAgICAgICAgICAgY2l0eTogXCJhbnl0b3duXCJcbi8vICAgICAgICAgICAgICAgIH1dXG4vLyAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgIHtcbi8vICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbi8vICAgICAgICAgICAgICAgICAgICBcInVzZXIyQGV4YW1wbGUuY29tXCJcbi8vICAgICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgICAgICBcImZpcnN0X25hbWVcIjogXCJKYW5lXCIsXG4vLyAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBcIlNtaXRoeVwiLFxuLy8gICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogXCJDb21wYW55IFlcIixcbi8vICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4vLyAgICAgICAgICAgICAgICAgICAgY2l0eTogXCJzb21ldG93blwiXG4vLyAgICAgICAgICAgICAgICB9XVxuLy8gICAgICAgICAgICB9XG4vLyAgICAgICAgXTtcbi8vICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgIGdldENoZWNrZWQoKTtcbi8vICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QuanMnLCBpbXBvcnREYXRhQXJyYXksIGxpc3ROdW0pLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4vLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbi8vICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuLy8gICAgICAgIH07XG4vLyAgICAgICAgLy9nZXQgYWxsIHRoZSBjaGVja2VkIGVsZW1lbnRzIGFuZCBzdHVmZiB0aGVtIGluIGFuIGFycmF5XG4vLyAgICAgICAgdmFyIGdldENoZWNrZWQgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICQoXCI6Y2hlY2tlZC50eXBlLWVsZW1lbnRcIikuZWFjaChcbi8vICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT0gQ29udGFjdExpc3REYXRhU2VydmljZS5yZXN1bHRzLmlkKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250YWN0T2JqZWN0ID1cbi8vICAgICAgICAgICAgICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJlbWFpbF9hZGRyZXNzZXNcIjogW1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZW1haWxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZpcnN0X25hbWVcIjogJCh0aGlzKS5maXJzdE5hbWUsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiAkKHRoaXMpLmxhc3ROYW1lLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogJCh0aGlzKS5jb21wYW55LFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiAkKHRoaXMpLmNpdHlcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIH07XG4vLyAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydERhdGFBcnJheS5wdXNoKGNvbnRhY3RPYmplY3QpO1xuLy8gICAgICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgKTtcbi8vICAgICAgICB9XG4vLyAgICB9XSk7XG4vLyBzZXJ2aWNlIGZvciBhamF4IGNhbGxzIHRvIGNvbnN0YW50IGNvbnRhY3Rcbi8vXG4vL2FwcC5zZXJ2aWNlKCduZXdDb250YWN0TGlzdERhdGEnLCBbJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnJGh0dHAnLFxuLy8gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4vL1xuLy8gICAgdmFyIG5ld0NvbnRhY3RMaXN0ID0gW107XG4vLyAgICB2YXIgbGlzdE51bSA9IFwiMTQ5OTUyMzYxMFwiO1xuLy9cbi8vICAgIHRoaXMucG9zdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgJGh0dHAucG9zdCgnL25ld0NvbnRhY3RMaXN0JykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbi8vICAgICAgICAgICAgbGlzdE51bSA9IGRhdGEuaWRcbi8vXG4vLyAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL2Vycm9yXG4vLyAgICAgICAgfSk7XG4vLyAgICAgICAgY29uc29sZS5sb2cob3B0aW9ucylcbi8vICAgIH07XG4vL1xuLy8gICAgdmFyIGltcG9ydERhdGFBcnJheSA9IFtcbi8vICAgICAgICB7XG4vLyAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbi8vICAgICAgICAgICAgICAgIFwidXNlcjFAZXhhbXBsZS5jb21cIlxuLy8gICAgICAgICAgICBdLFxuLy8gICAgICAgICAgICBcImZpcnN0X25hbWVcIjogXCJKb2huXCIsXG4vLyAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IFwiU21pdGhcIixcbi8vICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogXCJDb21wYW55IFhcIixcbi8vICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbi8vICAgICAgICAgICAgICAgIGNpdHk6IFwiYW55dG93blwiXG4vLyAgICAgICAgICAgIH1dXG4vLyAgICAgICAgfSxcbi8vICAgICAgICB7XG4vLyAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbi8vICAgICAgICAgICAgICAgIFwidXNlcjJAZXhhbXBsZS5jb21cIlxuLy8gICAgICAgICAgICBdLFxuLy8gICAgICAgICAgICBcImZpcnN0X25hbWVcIjogXCJKYW5lXCIsXG4vLyAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IFwiU21pdGh5XCIsXG4vLyAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IFwiQ29tcGFueSBZXCIsXG4vLyAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4vLyAgICAgICAgICAgICAgICBjaXR5OiBcInNvbWV0b3duXCJcbi8vICAgICAgICAgICAgfV1cbi8vICAgICAgICB9XG4vLyAgICBdO1xuLy9cbi8vICAgIC8vdmFyIGNvbnRhY3RMaXN0T2JqZWN0ID0oe1xuLy8gICAgLy8gICAgXCJJbXBvcnQgRGF0YVwiIDogaW1wb3J0RGF0YUFycmF5LFxuLy8gICAgLy8gICAgXCJsaXN0XCI6IFtsaXN0TnVtXSxcbi8vICAgIC8vICAgIFwiY29sdW1uX25hbWVzXCI6W1wiRU1BSUxcIixcIkZJUlNUIE5BTUVcIiwgXCJMQVNUIE5BTUVcIiwgXCJDSVRZXCIsXCJDT01QQU5ZIE5BTUVcIl19KTtcbi8vXG4vL1xuLy8gICAgdGhpcy5wb3BMaXN0ID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgIGdldENoZWNrZWQoKTtcbi8vICAgICAgICAkaHR0cC5wb3N0KCcvcG9wdWxhdGVDb250YWN0TGlzdC5qcycsIGltcG9ydERhdGFBcnJheSwgbGlzdE51bSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4vLyAgICAgICAgfSk7XG4vLyAgICAgICAgY29uc29sZS5sb2cob3B0aW9ucyk7XG4vL1xuLy8gICAgfTtcbi8vXG4vLyAgICAvL2dldCBhbGwgdGhlIGNoZWNrZWQgZWxlbWVudHMgYW5kIHN0dWZmIHRoZW0gaW4gYW4gYXJyYXlcbi8vICAgIHZhciBnZXRDaGVja2VkID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAkKFwiOmNoZWNrZWQudHlwZS1lbGVtZW50XCIpLmVhY2goXG4vLyAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UucmVzdWx0cy5pZCkge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFjdE9iamVjdCA9XG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmVtYWlsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6ICQodGhpcykuZmlyc3ROYW1lLFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsYXN0X25hbWVcIjogJCh0aGlzKS5sYXN0TmFtZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6ICQodGhpcykuY29tcGFueSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogJCh0aGlzKS5jaXR5XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuLy8gICAgICAgICAgICAgICAgICAgICAgICB9O1xuLy8gICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnREYXRhQXJyYXkucHVzaChjb250YWN0T2JqZWN0KTtcbi8vICAgICAgICAgICAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICApO1xuLy8gICAgICAgIH1cbi8vfV0pOyIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZHJlc3NcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSYtXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eWzAtOVxccy4vKCktXSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4dFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHM6LV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXjIwWzAtOV17Mn1bLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDE5OVswLTldfDIwWzAtOV17Mn0pWy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFtb3VudFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXltcXCRdP1tcXGRdKyhbLl1bXFxkXXsyfSk/JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBjbGFzcyBzZWFyY2hcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmVxdWlyZWQgb3IgdHJpbW1lZCBsZW5ndGggaXMgbm90IDAsIHRoZW4gdmFsaWRhdGUgaW5mb1xuICAgICAgICBpZigkb2JqLmF0dHIoJ3JlcXVpcmVkJykgfHwgJG9iai52YWwoKS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHZhbHVlIG1hdGNoZXMgcmVnZXggZm9yIGZpZWxkIHR5cGVcbiAgICAgICAgICAgIGlmKCFwYXR0ZXJuLnRlc3QoJG9iai52YWwoKS50cmltKCkpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZmFpbHMsIGFkZHMgaW52YWxpZCBjbGFzcyAoaGlnaGxpZ2h0aW5nKSwgY2hhbmdlcyBwbGFjZWhvbGRlciB0byB3aGF0IHNob3VsZCBiZSBlbnRlcmVkXG4gICAgICAgICAgICAgICAgJG9iai5hZGRDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdpbnZhbGlkJykpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBmYWlsZWQgdGVzdCcsIHBhdHRlcm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXNzZXMsIHJlbW92ZXMgaW52YWxpZCBjbGFzcywgcmVzZXRzIHBsYWNlaG9sZGVyIHRvIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAkb2JqLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgcGFzc2VkIHRlc3QnLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0XG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
