function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr","angular-momentjs"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],o=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService","dateService",function(t,e,a,o,n,i,l){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={info:{},contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(e){t.corp={info:{},contact:{},donations:[]},t.newDonation={},e.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){t.corp=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.corp}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?i.validateForm(["EditCorpInfoForm","EditCorpContactForm"])?(console.log("update corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):console.log("Edit corp input tests failed"):i.validateForm(["AddCorpInfoForm","AddCorpContactForm"])?n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}}):console.log("Add corp input tests failed")},t.addDonation=function(){var e=t.newDonation;e.date=l.toDB(e.date),t.corp.donations.push(t.newDonation),t.newDonation={},console.log("added donation",e,t.corp.donations)}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr","$rootScope",function(t,e,a,o,n,i){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}if("fam"==t.type){var o=a.makeDataCall("family","");o.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}if("corp"==t.type){var i=a.makeDataCall("company","");i.then(function(e){t.emailList=e,t.totalResults=e.length,n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)?n.success("Successfully deployed contact list."):n.error("Failed to deploy contact list.")},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],a.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,o){var n=e.defer();return console.log("this is in the make data call",a,o),t({method:"GET",url:"../createMailList",params:{type:a,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:a}}]),app.service("dateService",["MomentJS",function(t){var e="YYYY-MM-DD",a=function(a){return t(a).format(e)};return{toDB:a}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService","toastr","dateService",function(t,e,a,o,n,i,l,s){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(e){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},e.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){t.family=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),l.success("Information saved!"),t.family.id?i.validateForm(["EditFamInfoForm","EditFamEmerForm"])?(console.log("update family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):console.log("Edit family failed input tests"):i.validateForm(["AddFamInfoForm","AddFamEmerForm"])?n({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]}):console.log("Add family failed input tests")},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1,l.success("Child updated!")):(t.family.children.push(t.newChild),l.success("Child added!")),t.newChild={}},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){var e=t.newDonation;e.date=s.toDB(e.date),t.family.donations.push(t.newDonation),t.newDonation={},console.log("added donation",e,t.family.donations)}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,a,o,n){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),n.user=a.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],o=[],n=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),r(e),s(e)})},l=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return e(t),console.log("this is getElement1",o),o},s=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},r=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return e(t),console.log("this is getElements3",n),n},c={getKids:r,getAdults:s,getCompanies:l,makeDataCall:i,results:e,companies:o,adults:a,kids:n};return c}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,o){a.user=t.getUser(),a.user&&a.user.username&&o.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope","$rootScope","toastr",function(t,e,a,o){e.hide=function(){console.log("hide"),a.hide=!0},e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input)?(console.log("list #",t.listNum),e.listname={},o.success("Successfully created list"),hide()):(console.log("failed to create list"),o.error("Failed to create list"))}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,e){var a="",o=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),!1},this.popList=function(t){this.dataObject={importDataArray:o,listNum:a},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),n(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,o){return console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),!0},function(){return!1})};var n=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email||""],first_name:t.firstName||"",last_name:t.lastName||"",company_name:t.company||"",addresses:[{city:t.city||""}]},console.log(this.contactObject),o.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("edit password:",t.form),e.put("/admin",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.service("validService",[function(){var t=function(t,e){var a,o=e?$("#"+e):!1;switch(console.log("object is ",o,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]{0,28}/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]{0,75}/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]{0,50}/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]{0,250}/;break;case"ext":a=/^[a-zA-Z0-9\s:-]+$/;break;case"date":a=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":a=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":a=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}return o.attr("required")||o.val()?!a.test(o.val().trim())||0==o.val().trim().length&&o.attr("required")?(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",a),!1):(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",a),!0):void 0},e=function(e){var a=!0;return e.forEach(function(e,o,n){$("#"+e+" .js-validate").each(function(){0==t($(this).data("type"),$(this).attr("id"))&&(console.log($(this).attr("id")+" failed the test "+$(this).data("type")+" entered info: "+$(this).val()),a=!1)})}),a};return{validateInput:t,validateForm:e}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJkYXRlU2VydmljZS5qcyIsImZhbWlseUNvbnRyb2xsZXIuanMiLCJsb2dpbkNvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoQ29udHJvbGxlci5qcyIsIm1haW5TZWFyY2hTZXJ2aWNlLmpzIiwibW9kYWxJbnN0YW5jZUNvbnRyb2xsZXIuanMiLCJuYXZDb250cm9sbGVyLmpzIiwibmV3Q29udGFjdExpc3RDb250cm9sbGVyLmpzIiwibmV3Q29udGFjdExpc3RTZXJ2aWNlLmpzIiwicG9wTGlzdENvbnRyb2xsZXIuanMiLCJyZWdpc3RlckNvbnRyb2xsZXIuanMiLCJyZXNldENvbnRyb2xsZXIuanMiLCJ2YWxpZFNlcnZpY2UuanMiXSwibmFtZXMiOlsiZm9ybWF0RGF0ZXMiLCJkYXRlIiwiZnVsbCIsIm1vbWVudCIsImZvcm1hdCIsImZ1bGxEYXRlIiwicHJldHR5IiwicHJldHR5RGF0ZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSIsIiRxIiwiJGxvY2F0aW9uIiwiYXV0aFNlcnZpY2UiLCJyZXF1ZXN0IiwiaGVhZGVycyIsImlzQXV0aGVkIiwiQXV0aG9yaXphdGlvbiIsImdldFRva2VuIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJwYXRoIiwicmVzcG9uc2VFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJyZWplY3QiLCJzZXJ2aWNlIiwiJHdpbmRvdyIsInRoaXMiLCJwYXJzZUp3dCIsInRva2VuIiwiYmFzZTY0VXJsIiwic3BsaXQiLCJiYXNlNjQiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiYXRvYiIsInNhdmVUb2tlbiIsImxvY2FsU3RvcmFnZSIsImp3dFRva2VuIiwicGFyYW1zIiwibm90RXhwaXJlZCIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnZXRUaW1lIiwiZXhwIiwibG9nb3V0IiwiZ2V0VXNlciIsIiRzY29wZSIsIiR1aWJNb2RhbCIsIiRsb2ciLCJSZXN1bHRTZXJ2aWNlIiwiJGh0dHAiLCJ2YWxpZFNlcnZpY2UiLCJkYXRlU2VydmljZSIsInZhbGlkYXRlSW5wdXQiLCJjb21wYW5pZXMiLCJjb3JwIiwiaW5mbyIsImNvbnRhY3QiLCJkb25hdGlvbnMiLCJuZXdEb25hdGlvbiIsImFuaW1hdGlvbnNFbmFibGVkIiwiY2xlYXJDb3JwIiwiZm9ybXNBcnJheSIsImZvckVhY2giLCJ2IiwiJCIsImVhY2giLCJyZW1vdmVDbGFzcyIsImF0dHIiLCJkYXRhIiwib3BlbiIsInNpemUiLCJpZCIsIm1ldGhvZCIsInVybCIsInRoZW4iLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsInRvZ2dsZUFuaW1hdGlvbiIsInNhdmUiLCJ2YWxpZGF0ZUZvcm0iLCJyZXMiLCJsZW5ndGgiLCJhZGREb25hdGlvbiIsInRlbXAiLCJ0b0RCIiwicHVzaCIsIkNvbnRhY3RMaXN0RGF0YVNlcnZpY2UiLCJuZXdDb250YWN0TGlzdERhdGEiLCJ0b2FzdHIiLCIkcm9vdFNjb3BlIiwidHlwZSIsImFnZSIsInppcCIsImVtYWlscyIsImluY2x1ZGVkRW1haWxzIiwidG90YWxEaXNwbGF5ZWQiLCJ0b3RhbFJlc3VsdHMiLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwic3VjY2VzcyIsImVycm9yIiwiZmFtIiwiY29tcCIsInBvcHVsYXRlTGlzdCIsInBvcExpc3QiLCJsb2FkTW9yZSIsInNob3dBbGwiLCJjaGVja0FsbCIsImV2ZW50IiwiJGJ1dHRvbiIsImVsZW1lbnQiLCJ0YXJnZXQiLCJ2YWwiLCJjb3B5IiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwiZGJGb3JtYXQiLCJ0b0RiRm9ybWF0IiwiYWR1bHRzIiwia2lkcyIsImZhbWlseSIsImFkdWx0T25lIiwiYWR1bHRUd28iLCJlbWVyZ2VuY3kiLCJjaGlsZHJlbiIsIm5ld0NoaWxkIiwiY2xlYXJGYW1pbHkiLCJhZGRDaGlsZCIsImVkaXRpbmdDaGlsZCIsImVkaXRDaGlsZCIsImluZGV4IiwicmVtb3ZlQ2hpbGQiLCJzcGxpY2UiLCJjbGVhckNoaWxkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aGRhdGUiLCJzY2hvb2wiLCJub3RlcyIsInN1Ym1pdCIsInBvc3QiLCJmb3JtIiwidXNlciIsImZvcm1JbnB1dCIsInNlYXJjaEJ0biIsInJlc3VsdHMiLCJnZXRDb21wYW5pZXMiLCJnZXRLaWRzIiwiZ2V0QWR1bHRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MSIsImdldEVsZW1lbnQyIiwiZ2V0RWxlbWVudDMiLCJwdWJsaWNBcGkiLCIkbW9kYWxJbnN0YW5jZSIsIm9rIiwiY2xvc2UiLCJpdGVtIiwiY2FuY2VsIiwiZGlzbWlzcyIsInVzZXJuYW1lIiwiaGlkZSIsImxpc3RuYW1lIiwiY3JlYXRlTGlzdCIsImlucHV0IiwicG9zdExpc3QiLCJsaXN0TnVtIiwiaW1wb3J0RGF0YUFycmF5IiwibmFtZSIsImxpc3QiLCJkYXRhT2JqZWN0IiwiZ2V0Q2hlY2tlZCIsImwiLCJvYmplY3QiLCJjb250YWN0T2JqZWN0IiwiZW1haWxfYWRkcmVzc2VzIiwiZW1haWwiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueSIsImFkZHJlc3NlcyIsImNpdHkiLCJsaXN0TmFtZSIsInB1dCIsInBhdHRlcm4iLCIkb2JqIiwidGVzdCIsInRyaW0iLCJhZGRDbGFzcyIsImZvcm1zIiwicGFzcyIsImkiLCJhIl0sIm1hcHBpbmdz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QSxPQUlBQSxFQUdBLFFBQ0FySixjQUFBQSxFQUNBaUMsYUFBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbGVvJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnLCAnY2hlY2tsaXN0LW1vZGVsJywgJ3RvYXN0cicsICdhbmd1bGFyLW1vbWVudGpzJ10pO1xuXG52YXIgcHJldHR5RGF0ZSA9IFwiTU0vREQvWVlnWVlcIjtcbnZhciBmdWxsRGF0ZSA9IFwiTU0vREQvWVlZWSBoOm1tOnNzIGFcIjtcblxuZnVuY3Rpb24gZm9ybWF0RGF0ZXMgKGRhdGUpIHtcblx0cmV0dXJuIHtcblx0XHRmdWxsOiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZ1bGxEYXRlKSxcblx0XHRwcmV0dHk6IG1vbWVudChkYXRlKS5mb3JtYXQocHJldHR5RGF0ZSlcblx0fTtcbn1cblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRGYW1pbHlDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRDb3JwQ3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RsaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvc2VhcmNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pO1xuXG5cblxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBjb3Jwb3JhdGlvbiBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRDb3JwQ3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgJ2RhdGVTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlLCBkYXRlU2VydmljZSkge1xuXG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBjb21wYW5pZXMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuY29tcGFuaWVzID0gUmVzdWx0U2VydmljZS5jb21wYW5pZXM7XG5cdCRzY29wZS5jb3JwID0ge1xuXHRcdGluZm86IHt9LFxuXHRcdGNvbnRhY3Q6IHt9LFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cblx0JHNjb3BlLmNsZWFyQ29ycCA9IGZ1bmN0aW9uIChmb3Jtc0FycmF5KSB7XG5cdFx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0XHRpbmZvOnt9LFxuXHRcdFx0Y29udGFjdDp7fSxcblx0XHRcdGRvbmF0aW9uczpbXVxuXHRcdH07XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdFx0Zm9ybXNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG5cdFx0XHQkKCcjJysgdiArJyAuanMtdmFsaWRhdGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJCh0aGlzKS5kYXRhKCdwbGFjZWhvbGRlcicpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2NvcnAgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2NvcnBvcmF0aW9uJyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHQkc2NvcGUuY29ycCA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0Y29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmNvcnA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGNvcnBcblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJTYXZlIHN1Ym1pdHRlZFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0Ly9hbGVydChcIlN1Ym1pdHRlZFwiKTtcblx0XHQvLyBpZiBoYXMgaWQsIHRoZW4gcHV0XG5cdFx0aWYoISRzY29wZS5jb3JwLmlkKSB7XG5cdFx0XHRpZih2YWxpZFNlcnZpY2UudmFsaWRhdGVGb3JtKFtcIkFkZENvcnBJbmZvRm9ybVwiLCBcIkFkZENvcnBDb250YWN0Rm9ybVwiXSkpIHtcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmluZm8gPSAocmVzLmRhdGEuaW5mbykgPyByZXMuZGF0YS5pbmZvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmNvbnRhY3QgPSAocmVzLmRhdGEuY29udGFjdCkgPyByZXMuZGF0YS5jb250YWN0IDoge307XG5cdFx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHRcdH0pO1xuXHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkFkZCBjb3JwIGlucHV0IHRlc3RzIGZhaWxlZFwiKTtcblx0XHRcdH1cblx0XHR9ZWxzZSB7XG5cdFx0XHRpZih2YWxpZFNlcnZpY2UudmFsaWRhdGVGb3JtKFtcIkVkaXRDb3JwSW5mb0Zvcm1cIiwgXCJFZGl0Q29ycENvbnRhY3RGb3JtXCJdKSkge1xuXHRcdFx0XHQvLyBpbnNlcnQgY29ycCAtIGhhcyBubyBpZFxuXHRcdFx0XHRjb25zb2xlLmxvZyhcInVwZGF0ZSBjb3JwXCIsICRzY29wZS5jb3JwKTtcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0XHRkYXRhOiB7Y29ycDogJHNjb3BlLmNvcnB9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5jb250YWN0ID0gKHJlcy5kYXRhLmNvbnRhY3QpID8gcmVzLmRhdGEuY29udGFjdCA6IHt9O1xuXHRcdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFZGl0IGNvcnAgaW5wdXQgdGVzdHMgZmFpbGVkXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3Rcblx0JHNjb3BlLmFkZERvbmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0ZW1wID0gJHNjb3BlLm5ld0RvbmF0aW9uO1xuXHRcdHRlbXAuZGF0ZSA9IGRhdGVTZXJ2aWNlLnRvREIodGVtcC5kYXRlKTtcblx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHRcdGNvbnNvbGUubG9nKFwiYWRkZWQgZG9uYXRpb25cIiwgdGVtcCwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0fTtcblxufV0pOyIsImFwcC5jb250cm9sbGVyKCdjcmVhdGVMaXN0U2VhcmNoJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnQ29udGFjdExpc3REYXRhU2VydmljZScsICduZXdDb250YWN0TGlzdERhdGEnLCAndG9hc3RyJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgQ29udGFjdExpc3REYXRhU2VydmljZSxuZXdDb250YWN0TGlzdERhdGEsIHRvYXN0ciwgJHJvb3RTY29wZSkge1xuICAgICRzY29wZS50eXBlID17fTtcbiAgICAkc2NvcGUuYWdlPXt9O1xuICAgICRzY29wZS56aXA9e307XG5cdC8vIGluY2x1ZGUgbGlzdCBuZWVkcyB0byBiZSB3aXRoaW4gYW4gb2JqZWN0IGR1ZSB0byB0aGUgY2hlY2tib3hlcyBiZWluZyBpbiBhIHRhYmxlXG5cdCRzY29wZS5lbWFpbHMgPSB7fTtcbiAgICAkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzID0gW107XG5cdCRzY29wZS5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgPSA1MDtcblx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IDA7XG4gICAgLy8kcm9vdFNjb3BlLmhpZGUgPSB0cnVlO1xuXG5cblxuICAgICRzY29wZS5lbWFpbExpc3QgPSBbIF07XG4gICAgJHNjb3BlLnNlYXJjaExpc3RCdG4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmVtYWlsTGlzdCA9IFtdO1xuXG5cbiAgICAgICAgLy9USElTIFdPUktTICAtLSB3aWxsIHNlYXJjaCBieSB6aXBcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICd6aXBDaycpIHtcblxuICAgICAgICAgICAgQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ3ppcCcsICRzY29wZS56aXAuZGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCAnKyAkc2NvcGUudG90YWxSZXN1bHRzICsnIHJlc3VsdHMnKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCByZXN1bHRzJyk7XG5cdFx0XHRcdH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgLSB3aWxsIHNlYXJjaCBieSBhZ2VcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdhZ2VDaycpIHtcbiAgICAgICAgICAgIHZhciBhZ2UgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnYWdlJywgJHNjb3BlLmFnZS5kYXRhKTtcbiAgICAgICAgICAgIGFnZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuXHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTG9hZGVkICcrICRzY29wZS50b3RhbFJlc3VsdHMgKycgcmVzdWx0cycpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHJlc3VsdHMnKTtcblx0XHRcdH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9USElTIFdPUktTIC0tZ2V0IGFsbCBmYW1pbGllcyBpZiBmYW0gaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2ZhbScpIHtcbiAgICAgICAgICAgIHZhciBmYW0gPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnZmFtaWx5JywgJycpO1xuICAgICAgICAgICAgZmFtLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdMb2FkZWQgJysgJHNjb3BlLnRvdGFsUmVzdWx0cyArJyByZXN1bHRzJyk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdWx0cycpO1xuXHRcdFx0fSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2dldCBhbGwgY29ycCBpZiBjb3JwIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdjb3JwJykge1xuICAgICAgICAgICAgdmFyIGNvbXAgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnY29tcGFueScsICcnKTtcbiAgICAgICAgICAgIGNvbXAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcblx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCAnKyAkc2NvcGUudG90YWxSZXN1bHRzICsnIHJlc3VsdHMnKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCByZXN1bHRzJyk7XG5cdFx0XHR9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZW1wdHkgdGhlIHNlYXJjaCBib3hcbiAgICAgICAkc2NvcGUudHlwZT17fTtcbiAgICAgICAgJHNjb3BlLmFnZT17fTtcbiAgICAgICAgJHNjb3BlLnppcD17fTtcblxuICAgIH07XG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vYWxlcnQoJ3dvcmtpbmcnKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgIGlmKG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMpKSB7XG5cdFx0XHR0b2FzdHIuc3VjY2VzcygnU3VjY2Vzc2Z1bGx5IGRlcGxveWVkIGNvbnRhY3QgbGlzdC4nKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHR0b2FzdHIuZXJyb3IoJ0ZhaWxlZCB0byBkZXBsb3kgY29udGFjdCBsaXN0LicpO1xuXHRcdH1cbiAgfTtcblxuXHQkc2NvcGUubG9hZE1vcmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkICs9IDUwO1xuXHR9O1xuXG5cdCRzY29wZS5zaG93QWxsID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50b3RhbERpc3BsYXllZCA9ICRzY29wZS50b3RhbFJlc3VsdHM7XG5cdH07XG5cblx0JHNjb3BlLmNoZWNrQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgJGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpO1xuXHRcdGlmKCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMubGVuZ3RoID09ICRzY29wZS50b3RhbFJlc3VsdHMpIHtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0XHRcdCRidXR0b24udmFsKFwiQ2hlY2sgQWxsXCIpO1xuXHRcdH1lbHNle1xuXHRcdFx0JHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdCRidXR0b24udmFsKFwiVW5jaGVjayBBbGxcIik7XG5cdFx0fVxuXHR9O1xufV0pO1xuXG5cbiIsImFwcC5mYWN0b3J5KCdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcblxuICAgIGZ1bmN0aW9uIG1ha2VEYXRhQ2FsbCh0eXBlLCBwYXNzZWREYXRhKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIHRoZSBtYWtlIGRhdGEgY2FsbCcsIHR5cGUsIHBhc3NlZERhdGEpO1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vY3JlYXRlTWFpbExpc3QnLFxuICAgICAgICAgICAgcGFyYW1zOiB7dHlwZTogdHlwZSwgc2VhcmNoOiBwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsXG4gICAgfTtcblxuXG59XSk7IiwiYXBwLnNlcnZpY2UoJ2RhdGVTZXJ2aWNlJywgWydNb21lbnRKUycsIGZ1bmN0aW9uIChtb21lbnQpIHtcblx0dmFyIGRiRm9ybWF0ID0gXCJZWVlZLU1NLUREXCI7XG5cblx0dmFyIHRvRGJGb3JtYXQgPSBmdW5jdGlvbiAoZGF0ZSkge1xuXHRcdHJldHVybiBtb21lbnQoZGF0ZSkuZm9ybWF0KGRiRm9ybWF0KTtcblx0fTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHRvREI6IHRvRGJGb3JtYXRcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBmYW1pbHkgbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0RmFtaWx5Q3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgJ3RvYXN0cicsJ2RhdGVTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlLCB0b2FzdHIsIGRhdGVTZXJ2aWNlKSB7XG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBhZHVsdHMgYW5kIGtpZHMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuYWR1bHRzID0gUmVzdWx0U2VydmljZS5hZHVsdHM7XG5cdCRzY29wZS5raWRzID0gUmVzdWx0U2VydmljZS5raWRzO1xuXHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdGFkdWx0T25lOiB7fSxcblx0XHRhZHVsdFR3bzoge30sXG5cdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRjaGlsZHJlbjogW10sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cblx0JHNjb3BlLmNsZWFyRmFtaWx5ID0gZnVuY3Rpb24gKGZvcm1zQXJyYXkpIHtcblx0XHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdFx0YWR1bHRPbmU6IHt9LFxuXHRcdFx0YWR1bHRUd286IHt9LFxuXHRcdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRcdGNoaWxkcmVuOiBbXSxcblx0XHRcdGRvbmF0aW9uczogW11cblx0XHR9O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHRcdGZvcm1zQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAodikge1xuXHRcdFx0JCgnIycrIHYgKycgLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICQodGhpcykuZGF0YSgncGxhY2Vob2xkZXInKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXG5cblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZmFtaWx5IGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9mYW1pbHknLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5mYW1pbHkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZhbWlseTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGZhbWlseVxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdHRvYXN0ci5zdWNjZXNzKCdJbmZvcm1hdGlvbiBzYXZlZCEnKTtcblxuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwb3N0XG5cblx0XHRpZighJHNjb3BlLmZhbWlseS5pZCkge1xuXG5cdFx0XHRpZih2YWxpZFNlcnZpY2UudmFsaWRhdGVGb3JtKFtcIkFkZEZhbUluZm9Gb3JtXCIsIFwiQWRkRmFtRW1lckZvcm1cIl0pKSB7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0T25lID0gKHJlcy5kYXRhLmFkdWx0T25lKSA/IHJlcy5kYXRhLmFkdWx0T25lIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiQWRkIGZhbWlseSBmYWlsZWQgaW5wdXQgdGVzdHNcIik7XG5cdFx0XHR9XG5cdFx0fWVsc2Uge1xuXHRcdFx0aWYodmFsaWRTZXJ2aWNlLnZhbGlkYXRlRm9ybShbXCJFZGl0RmFtSW5mb0Zvcm1cIiwgXCJFZGl0RmFtRW1lckZvcm1cIl0pKSB7XG5cdFx0XHRcdC8vIHVwZGF0ZSBmYW1pbHkgLSBoYXMgbm8gaWRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJ1cGRhdGUgZmFtaWx5XCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdFx0XHQkaHR0cCh7XG5cdFx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0T25lID0gKHJlcy5kYXRhLmFkdWx0T25lKSA/IHJlcy5kYXRhLmFkdWx0T25lIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRWRpdCBmYW1pbHkgZmFpbGVkIGlucHV0IHRlc3RzXCIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvLyBmb3IgYXBwZW5kaW5nIGNoaWxkcmVuIHRvIG1vZGVsIGJlZm9yZSBzYXZpbmcgbmV3IGZhbWlseVxuXHQkc2NvcGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJjaGlsZCBhZGRlZFwiLCAkc2NvcGUubmV3Q2hpbGQsICRzY29wZS5mYW1pbHkuY2hpbGRyZW4pO1xuXHRcdC8vIGlmIHRydWUsIHRoZW4gdXBkYXRlIHRoYXQgaW5kZXhcblx0XHRpZigkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuWyRzY29wZS5lZGl0aW5nQ2hpbGRdID0gJHNjb3BlLm5ld0NoaWxkO1xuXHRcdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0NoaWxkIHVwZGF0ZWQhJyk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gZWxzZSBwdXNoIHRvIGFycmF5XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnB1c2goJHNjb3BlLm5ld0NoaWxkKTtcblx0XHRcdHRvYXN0ci5zdWNjZXNzKCdDaGlsZCBhZGRlZCEnKTtcblx0XHR9XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdH07XG5cblx0Ly8gZWRpdCBjaGlsZCBvbiB0aGUgYWRkIGNoaWxkcmVuIHRhYiBvZiBhZGQgZmFtaWx5XG5cdCRzY29wZS5lZGl0Q2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHQvLyBzYXZlIGluZGV4IG9mIGNoaWxkIGVkaXRpbmdcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gaW5kZXg7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0gJHNjb3BlLmZhbWlseS5jaGlsZHJlbltpbmRleF07XG5cdH07XG5cblx0JHNjb3BlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiByZW1vdmUgY2hpbGQgaW5kZXhcIiwgaW5kZXgsIFwiIGVkaXQgXCIsICRzY29wZS5lZGl0aW5nQ2hpbGQpO1xuXHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihpbmRleCA9PSAkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImVkaXQgbWF0Y2hcIik7XG5cdFx0XHQkc2NvcGUuY2xlYXJDaGlsZCgpO1xuXHRcdH1lbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwibm8gZWRpdCBtYXRjaFwiKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gY2xlYXJzIHRleHQgYm94ZXMgaW4gYWRkIGZhbWlseS0+Y2hpbGRyZW4gdGFiXG5cdCRzY29wZS5jbGVhckNoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gY2xlYXIgY2hpbGRcIik7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge1xuXHRcdFx0Zmlyc3ROYW1lOiAnJyxcblx0XHRcdGxhc3ROYW1lOiAnJyxcblx0XHRcdGJpcnRoZGF0ZTogJycsXG5cdFx0XHRzY2hvb2w6ICcnLFxuXHRcdFx0bm90ZXM6ICcnXG5cdFx0fTtcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gZmFsc2U7XG5cdH07XG5cblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3RcblxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRlbXAgPSAkc2NvcGUubmV3RG9uYXRpb247XG5cdFx0dGVtcC5kYXRlID0gZGF0ZVNlcnZpY2UudG9EQih0ZW1wLmRhdGUpO1xuXHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsIHRlbXAsICRzY29wZS5mYW1pbHkuZG9uYXRpb25zKTtcblx0fTtcblxuXG5cdC8vLy8gcHJldmVudCBhY2NpZGVudGFsIGJhY2tzXG5cdC8vJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCBldmVudCwgb2xkVXJsICkge1xuXHQvL1x0Y29uc29sZS5sb2coXCJvbGQgdXJsOiBcIiwgb2xkVXJsKTtcblx0Ly9cdGlmKC8oYWRkZmFtaWx5KS8udGVzdChvbGRVcmwpKSB7XG5cdC8vXHRcdHZhciBhbnN3ZXIgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlIHRoaXMgcGFnZT9cIik7XG5cdC8vXHRcdGlmICghYW5zd2VyKSB7XG5cdC8vXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly9cdFx0fVxuXHQvL1x0fVxuXHQvL30pO1xuXG59XSk7IiwiLy9jb250cm9sbGVycyBmb3IgbG9naW5cbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvc2VhcmNoXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsIlxuLy9UaGlzIHNob3VsZCBnZXQgdGhlIHNlYXJjaCBpdGVtXG5hcHAuY29udHJvbGxlcignc2VhcmNoRnVuY3Rpb24nLCBbJyRzY29wZScsICckaHR0cCcsICdSZXN1bHRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIFJlc3VsdFNlcnZpY2UpIHtcbiAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuXG4gICAgJHNjb3BlLnNlYXJjaEJ0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgIFJlc3VsdFNlcnZpY2UubWFrZURhdGFDYWxsKCRzY29wZS5mb3JtSW5wdXQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBpbnB1dCB0ZXh0JywgJHNjb3BlLmZvcm1JbnB1dCk7XG4gICAgICAgIC8vZW1wdHlzIHRoZSBzZWFyY2ggYm94XG4gICAgICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG4gICAgfTtcblxufV0pO1xuIiwiLy9UaGlzIHNlcnZpY2Ugc2hvdWxkIHBhc3MgZGF0YSBiZXR3ZWVuIGNvbnRyb2xsZXJzXG5hcHAuZmFjdG9yeSgnUmVzdWx0U2VydmljZScsIFsnJGh0dHAnLGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgYWR1bHRzID0gW107XG4gICAgdmFyIGNvbXBhbmllcyA9IFtdO1xuICAgIHZhciBraWRzID0gW107XG5cbiAgICB2YXIgbWFrZURhdGFDYWxsID0gZnVuY3Rpb24ocGFzc2VkRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL3NlYXJjaCcsXG4gICAgICAgICAgICBwYXJhbXM6e3NlYXJjaDpwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRLaWRzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0QWR1bHRzKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBnZXRDb21wYW5pZXMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDEgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgY29tcGFuaWVzLnNwbGljZSgwLGNvbXBhbmllcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjb21wYW55JylcbiAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0RWxlbWVudDEoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50MScsY29tcGFuaWVzKTtcbiAgICAgICAgcmV0dXJuIGNvbXBhbmllc1xuICAgIH07XG5cbiAgICB2YXIgZ2V0QWR1bHRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQyID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGFkdWx0cy5zcGxpY2UoMCxhZHVsdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnYWR1bHQnKVxuICAgICAgICAgICAgICAgICAgICBhZHVsdHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQyKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gZ2V0RWxlbWVudDInLCBhZHVsdHMpO1xuICAgICAgICByZXR1cm4gYWR1bHRzXG4gICAgfTtcblxuICAgIHZhciBnZXRLaWRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGtpZHMuc3BsaWNlKDAsa2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjaGlsZCcpXG4gICAgICAgICAgICAgICAgICAgIGtpZHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudHMzJywga2lkcyk7XG4gICAgICAgIHJldHVybiBraWRzXG4gICAgfTtcblxuICAgIC8vcHVibGljXG4gICAgdmFyIHB1YmxpY0FwaSA9IHtcbiAgICAgICAgZ2V0S2lkczogZ2V0S2lkcyxcbiAgICAgICAgZ2V0QWR1bHRzOiBnZXRBZHVsdHMsXG4gICAgICAgIGdldENvbXBhbmllczogZ2V0Q29tcGFuaWVzLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbCxcbiAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgY29tcGFuaWVzOiBjb21wYW5pZXMsXG4gICAgICAgIGFkdWx0czogYWR1bHRzLFxuICAgICAgICBraWRzOiBraWRzXG4gICAgfTtcbiAgICByZXR1cm4gcHVibGljQXBpO1xufV0pOyIsIi8vIFBsZWFzZSBub3RlIHRoYXQgJG1vZGFsSW5zdGFuY2UgcmVwcmVzZW50cyBhIG1vZGFsIHdpbmRvdyAoaW5zdGFuY2UpIGRlcGVuZGVuY3kuXG4vLyBJdCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlICR1aWJNb2RhbCBzZXJ2aWNlIHVzZWQgYWJvdmUuXG5cbi8vbmVlZGVkIGZvciBtb2RhbD8/IHByZXR0eSBzdXJlXG5hcHAuY29udHJvbGxlcignTW9kYWxJbnN0YW5jZUN0cmwnLFsnJHNjb3BlJywnJG1vZGFsSW5zdGFuY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuXG4gICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUuc2VsZWN0ZWQuaXRlbSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgIH07XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ2F1dGhTZXJ2aWNlJywnJHNjb3BlJywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKGF1dGhTZXJ2aWNlLCAkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgfVxufV0pO1xuIiwiLy8gQWpheCBmb3IgY3JlYXRpbmcgdGhlIGNvbnRhY3QgbGlzdCBpbiBjb25zdGFudCBjb250YWN0XG5hcHAuY29udHJvbGxlcignbmV3Q29udGFjdExpc3RDb250cm9sbGVyJyxbJ25ld0NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsICckcm9vdFNjb3BlJywgJ3RvYXN0cicsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkcm9vdFNjb3BlLCB0b2FzdHIpIHtcbiAgICAvL2RhdGEgdG8gY3JlYXRlIGEgbmV3IGNvbnRhY3QgbGlzdFxuXG4gICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICBjb25zb2xlLmxvZygnaGlkZScpO1xuICAgICAgICAkcm9vdFNjb3BlLmhpZGUgPSB0cnVlO1xuICAgIH07XG5cbiAgICAkc2NvcGUubGlzdG5hbWUgPSB7fTtcblxuICAgICRzY29wZS5jcmVhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjcmVhdGUgbGlzdDogXCIgKyAkc2NvcGUubGlzdG5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBsaXN0IG5hbWUgc2VydmljZVxuICAgICAgICBpZihuZXdDb250YWN0TGlzdERhdGEucG9zdExpc3QoJHNjb3BlLmxpc3RuYW1lLmlucHV0KSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXHRcdFx0JHNjb3BlLmxpc3RuYW1lPXt9O1xuXHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ1N1Y2Nlc3NmdWxseSBjcmVhdGVkIGxpc3QnKTtcblx0XHRcdGhpZGUoKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImZhaWxlZCB0byBjcmVhdGUgbGlzdFwiKTtcblx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBsaXN0Jyk7XG5cdFx0fVxuXG4gICAgfTtcbn1dKTtcblxuXG4iLCJcbmFwcC5zZXJ2aWNlKCduZXdDb250YWN0TGlzdERhdGEnLCBbJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnJGh0dHAnLFxuICAgIGZ1bmN0aW9uIChDb250YWN0TGlzdERhdGFTZXJ2aWNlLCAkaHR0cCkge1xuICAgICAgICB2YXIgbGlzdE51bSA9IFwiXCI7XG4gICAgICAgIHZhciBpbXBvcnREYXRhQXJyYXkgPVtdO1xuXG4gICAgICAgIHRoaXMucG9zdExpc3QgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkaWQgdGhlIG5hbWUgbWFrZSBpdCB0byB0aGUgc2VydmljZT8gXCIgKyBuYW1lICk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL2Vycm9yXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVtYWlsIHx8ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IG9iamVjdC5sYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IG9iamVjdC5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBvYmplY3QuY2l0eSB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2godGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dezAsMjh9LztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb3JwTmFtZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOystXXswLDc1fS87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRkcmVzc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJi1dezAsNTB9LztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKFsoXVswLTldezN9WyldfFswLTldezN9KVtcXHNcXC0uXT9bMC05XXszfVtcXHNcXC0uXT9bMC05XXs0fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dezAsMjUwfS87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZXh0XCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxcczotXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eMjBbMC05XXsyfVstXSgwWzEtOV18MVswLTJdKVstXSgwWzEtOV18WzEtMl1bMC05XXwzWzAxXSkkLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJiaXJ0aGRhdGVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oMTk5WzAtOV18MjBbMC05XXsyfSlbLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYW1vdW50XCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW1xcJF0/W1xcZF0rKFsuXVtcXGRdezJ9KT8kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbnZhbGlkIGNsYXNzIHNlYXJjaFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiByZXF1aXJlZCBvciB0cmltbWVkIGxlbmd0aCBpcyBub3QgMCwgdGhlbiB2YWxpZGF0ZSBpbmZvXG4gICAgICAgIGlmKCRvYmouYXR0cigncmVxdWlyZWQnKSB8fCAkb2JqLnZhbCgpKSB7XG4gICAgICAgICAgICAvLyBjaGVja3MgaWYgdmFsdWUgbWF0Y2hlcyByZWdleCBmb3IgZmllbGQgdHlwZVxuICAgICAgICAgICAgaWYoIXBhdHRlcm4udGVzdCgkb2JqLnZhbCgpLnRyaW0oKSkgfHwgJG9iai52YWwoKS50cmltKCkubGVuZ3RoID09IDAgJiYgJG9iai5hdHRyKCdyZXF1aXJlZCcpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZmFpbHMsIGFkZHMgaW52YWxpZCBjbGFzcyAoaGlnaGxpZ2h0aW5nKSwgY2hhbmdlcyBwbGFjZWhvbGRlciB0byB3aGF0IHNob3VsZCBiZSBlbnRlcmVkXG4gICAgICAgICAgICAgICAgJG9iai5hZGRDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdpbnZhbGlkJykpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBmYWlsZWQgdGVzdCcsIHBhdHRlcm4pO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHBhc3NlcywgcmVtb3ZlcyBpbnZhbGlkIGNsYXNzLCByZXNldHMgcGxhY2Vob2xkZXIgdG8gZGVmYXVsdFxuICAgICAgICAgICAgICAgICRvYmoucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICRvYmouZGF0YSgncGxhY2Vob2xkZXInKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBwYXNzZWQgdGVzdCcsIHBhdHRlcm4pO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblx0dmFyIHZhbGlkYXRlRm9ybSA9IGZ1bmN0aW9uIChmb3Jtcykge1xuXHRcdHZhciBwYXNzID0gdHJ1ZTtcblx0XHRmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpLCBhKSB7XG5cdFx0XHQkKCcjJysgdiArJyAuanMtdmFsaWRhdGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYodmFsaWRhdGVJbnB1dCgkKHRoaXMpLmRhdGEoJ3R5cGUnKSwgJCh0aGlzKS5hdHRyKCdpZCcpKSA9PSBmYWxzZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCQodGhpcykuYXR0cignaWQnKSArXCIgZmFpbGVkIHRoZSB0ZXN0IFwiKyAkKHRoaXMpLmRhdGEoJ3R5cGUnKSArXCIgZW50ZXJlZCBpbmZvOiBcIisgJCh0aGlzKS52YWwoKSk7XG5cdFx0XHRcdFx0cGFzcyA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gcGFzcztcblx0fTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkYXRlSW5wdXQ6IHZhbGlkYXRlSW5wdXQsXG5cdFx0dmFsaWRhdGVGb3JtOiB2YWxpZGF0ZUZvcm1cbiAgICB9O1xufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
