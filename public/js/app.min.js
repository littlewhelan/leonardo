function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,a,e){return{request:function(t){return t.headers=t.headers||{},e.isAuthed()&&(t.headers.Authorization="Bearer "+e.getToken()),t},response:function(e){return 401===e.status&&a.path("/"),e||t.when(e)},responseError:function(e){return 401===e.status?a.path("/"):console.log(e.status),t.reject(e)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(a){if(a){var e=a.split(".")[1],o=e.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(a){t.localStorage.jwtToken=a},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var a=this.parseJwt(t),e=Math.round((new Date).getTime()/1e3)<=a.exp;return e||this.logout(),e}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,o,n,i){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={info:{},contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(a){t.corp={info:{},contact:{},donations:[]},t.newDonation={},a.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){t.corp=n.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.corp}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?i.validateForm(["EditCorpInfoForm","EditCorpContactForm"])?(console.log("update corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Put corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}})):console.log("Edit corp input tests failed"):i.validateForm(["AddCorpInfoForm","AddCorpContactForm"])?n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(a){console.log("Posted corp, got id ",a.data),t.corp.id=a.data.id,t.corp.info=a.data.info?a.data.info:{},t.contact=a.data.contact?a.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=a.data.donations?a.data.donations:{}}):console.log("Add corp input tests failed")},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr","$rootScope",function(t,a,e,o,n,i){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&e.makeDataCall("zip",t.zip.data).then(function(a){t.emailList=a,t.totalResults=a.length,console.log(t.emailList),n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var a=e.makeDataCall("age",t.age.data);a.then(function(a){console.log(a),t.emailList=a,t.totalResults=a.length})}if("fam"==t.type){var o=e.makeDataCall("family","");o.then(function(a){t.emailList=a,t.totalResults=a.length,console.log(a)})}if("corp"==t.type){var i=e.makeDataCall("company","");i.then(function(a){t.emailList=a,t.totalResults=a.length,console.log(a)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(a){var e=angular.element(a.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],e.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),e.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,a){function e(e,o){var n=a.defer();return console.log("this is in the make data call",e,o),t({method:"GET",url:"../createMailList",params:{type:e,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:e}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,a,e,o,n,i){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(a){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},a.forEach(function(t){$("#"+t+" .js-validate").each(function(){$(this).removeClass("invalid").attr("placeholder",$(this).data("placeholder"))})})},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){t.family=n.data;var i=a.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(a){t.selected=a},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?i.validateForm(["EditFamInfoForm","EditFamEmerForm"])?(console.log("insert family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(a){console.log("Put family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]})):console.log("Edit family failed input tests"):i.validateForm(["AddFamInfoForm","AddFamEmerForm"])?n({method:"POST",url:"/family",data:{family:t.family}}).then(function(a){console.log("Posted family, got id ",a.data),t.family.id=a.data.id,t.family.adultOne=a.data.adultOne?a.data.adultOne:{},t.family.adultTwo=a.data.adultTwo?a.data.adultTwo:{},t.family.emergency=a.data.emergency?a.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=a.data.children?a.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=a.data.donations?a.data.donations:[]}):console.log("Add family failed input tests")},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(a){t.editingChild=a,t.newChild=t.family.children[a]},t.removeChild=function(a){console.log("in remove child index",a," edit ",t.editingChild),t.family.children.splice(a,1),a==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,a,e,o,n){t.submit=function(){a.post("/login",t.form).then(function(t){e.saveToken(t.data),n.user=e.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,a,e){t.formInput={},t.searchBtn=function(){e.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var a=[],e=[],o=[],n=[],i=function(e){return t({method:"GET",url:"../search",params:{search:e}}).then(function(t){a=t.data,l(a),r(a),c(a)})},l=function(t){var a=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return a(t),console.log("this is getElement1",o),o},c=function(t){var a=function(t){e.splice(0,e.length),t.forEach(function(t){"adult"==t.type&&e.push(t)})};return a(t),console.log("this is in getElement2",e),e},r=function(t){var a=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return a(t),console.log("this is getElements3",n),n},s={getKids:r,getAdults:c,getCompanies:l,makeDataCall:i,results:a,companies:o,adults:e,kids:n};return s}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,a){t.ok=function(){a.close(t.selected.item)},t.cancel=function(){a.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,a,e,o){e.user=t.getUser(),e.user&&e.user.username&&o.path("/home"),a.logout=function(){t.logout(),e.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope","$rootScope",function(t,a,e){a.hide=function(){console.log("hide"),e.hide=!0},a.listname={},a.createList=function(){console.log("create list: "+a.listname.input),t.postList(a.listname.input),console.log("list #",t.listNum),a.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,a){var e="",o=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),a.post("/newContactList",{name:t}).then(function(t){console.log(t.data),e=t.data,console.log("Id? ",e)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:o,listNum:e},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),n(t),a.post("/populateContactList",this.dataObject).then(function(t,a,e,o){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var n=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),o.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,a,e){a.listName={},a.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),a.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),a.post("/register",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,a,e){t.submit=function(){console.log("edit password:",t.form),a.put("/admin",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.service("validService",[function(){var t=function(t,a){var e,o=a?$("#"+a):!1;switch(console.log("object is ",o,t,a),t){case"name":case"city":case"state":e=/^[a-zA-z\s,.'-]+$/;break;case"corpName":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":e=/^[0-9]{5}$/;break;case"phone":e=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":e=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":e=/^[a-zA-Z0-9\s:-]+$/;break;case"date":e=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":e=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":e=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}return o.attr("required")||o.val()?!e.test(o.val().trim())||0==o.val().trim().length&&o.attr("required")?(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",e),!1):(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",e),!0):void 0},a=function(a){var e=!0;return a.forEach(function(a,o,n){$("#"+a+" .js-validate").each(function(){0==t($(this).data("type"),$(this).attr("id"))&&(console.log($(this).attr("id")+" failed the test "+$(this).data("type")+" entered info: "+$(this).val()),e=!1)})}),e};return{validateInput:t,validateForm:a}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJpbmZvIiwiY29udGFjdCIsImRvbmF0aW9ucyIsIm5ld0RvbmF0aW9uIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJjbGVhckNvcnAiLCJmb3Jtc0FycmF5IiwiZm9yRWFjaCIsInYiLCIkIiwiZWFjaCIsInJlbW92ZUNsYXNzIiwiYXR0ciIsImRhdGEiLCJvcGVuIiwic2l6ZSIsImlkIiwibWV0aG9kIiwidXJsIiwidGhlbiIsIm1vZGFsSW5zdGFuY2UiLCJhbmltYXRpb24iLCJzY29wZSIsInJlc29sdmUiLCJpdGVtcyIsInJlc3VsdCIsInNlbGVjdGVkSXRlbSIsInNlbGVjdGVkIiwidG9nZ2xlQW5pbWF0aW9uIiwic2F2ZSIsInZhbGlkYXRlRm9ybSIsInJlcyIsImxlbmd0aCIsImFkZERvbmF0aW9uIiwicHVzaCIsIkNvbnRhY3RMaXN0RGF0YVNlcnZpY2UiLCJuZXdDb250YWN0TGlzdERhdGEiLCJ0b2FzdHIiLCIkcm9vdFNjb3BlIiwidHlwZSIsImFnZSIsInppcCIsImVtYWlscyIsImluY2x1ZGVkRW1haWxzIiwidG90YWxEaXNwbGF5ZWQiLCJ0b3RhbFJlc3VsdHMiLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwic3VjY2VzcyIsImVycm9yIiwiZmFtIiwiY29tcCIsInBvcHVsYXRlTGlzdCIsInBvcExpc3QiLCJsb2FkTW9yZSIsInNob3dBbGwiLCJjaGVja0FsbCIsImV2ZW50IiwiJGJ1dHRvbiIsImVsZW1lbnQiLCJ0YXJnZXQiLCJ2YWwiLCJjb3B5IiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwiYWR1bHRzIiwia2lkcyIsImZhbWlseSIsImFkdWx0T25lIiwiYWR1bHRUd28iLCJlbWVyZ2VuY3kiLCJjaGlsZHJlbiIsIm5ld0NoaWxkIiwiY2xlYXJGYW1pbHkiLCJhZGRDaGlsZCIsImVkaXRpbmdDaGlsZCIsImVkaXRDaGlsZCIsImluZGV4IiwicmVtb3ZlQ2hpbGQiLCJzcGxpY2UiLCJjbGVhckNoaWxkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aGRhdGUiLCJzY2hvb2wiLCJub3RlcyIsInN1Ym1pdCIsInBvc3QiLCJmb3JtIiwidXNlciIsImZvcm1JbnB1dCIsInNlYXJjaEJ0biIsInJlc3VsdHMiLCJnZXRDb21wYW5pZXMiLCJnZXRLaWRzIiwiZ2V0QWR1bHRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MSIsImdldEVsZW1lbnQyIiwiZ2V0RWxlbWVudDMiLCJwdWJsaWNBcGkiLCIkbW9kYWxJbnN0YW5jZSIsIm9rIiwiY2xvc2UiLCJpdGVtIiwiY2FuY2VsIiwiZGlzbWlzcyIsInVzZXJuYW1lIiwiaGlkZSIsImxpc3RuYW1lIiwiY3JlYXRlTGlzdCIsImlucHV0IiwicG9zdExpc3QiLCJsaXN0TnVtIiwiaW1wb3J0RGF0YUFycmF5IiwibmFtZSIsImxpc3QiLCJkYXRhT2JqZWN0IiwiZ2V0Q2hlY2tlZCIsImwiLCJvYmplY3QiLCJjb250YWN0T2JqZWN0IiwiZW1haWxfYWRkcmVzc2VzIiwiZW1haWwiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiY29tcGFueV9uYW1lIiwiY29tcGFueSIsImFkZHJlc3NlcyIsImNpdHkiLCJsaXN0TmFtZSIsInB1dCIsInBhdHRlcm4iLCIkb2JqIiwidGVzdCIsInRyaW0iLCJhZGRDbGFzcyIsImZvcm1zIiwicGFzcyIsImkiLCJhIl0sIm1hcHBpbmdzIjoiQUFLQSxRQUFBQSxhQUFBQyxHQUNBLE9BQ0FDLEtBQUFDLE9BQUFGLEdBQUFHLE9BQUFDLFVBQ0FDLE9BQUFILE9B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QkFDQWpELFFBQUFDLElBQUEwRSxFQUFBLGVBQUFpRyxJQUNBLEdBWEEsUUFnQkExRyxFQUFBLFNBQUErRyxHQUNBLEdBQUFDLElBQUEsQ0FTQSxPQVJBRCxHQUFBdEksUUFBQSxTQUFBQyxFQUFBdUksRUFBQUMsR0FDQXZJLEVBQUEsSUFBQUQsRUFBQSxpQkFBQUUsS0FBQSxXQUNBLEdBQUFiLEVBQUFZLEVBQUF4QyxNQUFBNEMsS0FBQSxRQUFBSixFQUFBeEMsTUFBQTJDLEtBQUEsU0FDQWhELFFBQUFDLElBQUE0QyxFQUFBeEMsTUFBQTJDLEtBQUEsTUFBQSxvQkFBQUgsRUFBQXhDLE1BQUE0QyxLQUFBLFFBQUEsa0JBQUFKLEVBQUF4QyxNQUFBNkYsT0FDQWdGLEdBQUEsT0FJQUEsRUFHQSxRQUNBakosY0FBQUEsRUFDQWlDLGFBQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2xlbycsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJywgJ2NoZWNrbGlzdC1tb2RlbCcsICd0b2FzdHInXSk7XG5cbnZhciBwcmV0dHlEYXRlID0gXCJNTS9ERC9ZWWdZWVwiO1xudmFyIGZ1bGxEYXRlID0gXCJNTS9ERC9ZWVlZIGg6bW06c3MgYVwiO1xuXG5mdW5jdGlvbiBmb3JtYXREYXRlcyAoZGF0ZSkge1xuXHRyZXR1cm4ge1xuXHRcdGZ1bGw6IG1vbWVudChkYXRlKS5mb3JtYXQoZnVsbERhdGUpLFxuXHRcdHByZXR0eTogbW9tZW50KGRhdGUpLmZvcm1hdChwcmV0dHlEYXRlKVxuXHR9O1xufVxuXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLFxuICAgIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLlxuICAgICAgICAgICAgd2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9sb2dpbi5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvc2VhcmNoJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9zZWFyY2guaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL3JlZ2lzdGVyLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9jb250YWN0TGlzdCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvY29udGFjdExpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2FkZGZhbWlseScsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkZmFtaWx5Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnZWRpdEZhbWlseUN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRjb3JwJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9hZGRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnZWRpdENvcnBDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdGxpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIG90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9zZWFyY2gnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSk7XG5cblxuXG5cbiIsImFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgfSwgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pIiwiYXBwLnNlcnZpY2UoJ2F1dGhTZXJ2aWNlJywgWyckd2luZG93JywgZnVuY3Rpb24gKCR3aW5kb3cpIHtcblxuICAgIHRoaXMucGFyc2VKd3QgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIHZhciBiYXNlNjQgPSBiYXNlNjRVcmwucmVwbGFjZSgnLScsICcrJykucmVwbGFjZSgnXycsICcvJyk7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgkd2luZG93LmF0b2IoYmFzZTY0KSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4ge307XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuID0gdG9rZW47XG4gICAgICAgIC8vY29uc29sZS5sb2coJ1NhdmVkIHRva2VuOicsJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIC8vIGV4cG9zZSB1c2VyIGFzIGFuIG9iamVjdFxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7IiwiLy9lZGl0IGNvcnBvcmF0aW9uIG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdENvcnBDdHJsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRsb2cnLCAnUmVzdWx0U2VydmljZScsICckaHR0cCcsICd2YWxpZFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwLCB2YWxpZFNlcnZpY2UpIHtcblxuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgY29tcGFuaWVzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmNvbXBhbmllcyA9IFJlc3VsdFNlcnZpY2UuY29tcGFuaWVzO1xuXHQkc2NvcGUuY29ycCA9IHtcblx0XHRpbmZvOiB7fSxcblx0XHRjb250YWN0OiB7fSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXG5cdCRzY29wZS5jbGVhckNvcnAgPSBmdW5jdGlvbiAoZm9ybXNBcnJheSkge1xuXHRcdCRzY29wZS5jb3JwID0ge1xuXHRcdFx0aW5mbzp7fSxcblx0XHRcdGNvbnRhY3Q6e30sXG5cdFx0XHRkb25hdGlvbnM6W11cblx0XHR9O1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHRcdGZvcm1zQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAodikge1xuXHRcdFx0JCgnIycrIHYgKycgLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICQodGhpcykuZGF0YSgncGxhY2Vob2xkZXInKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdjb3JwIGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9jb3Jwb3JhdGlvbicsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmNvcnAgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5jb3JwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBjb3JwXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmNvcnApO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuY29ycC5pZCkge1xuXHRcdFx0aWYodmFsaWRTZXJ2aWNlLnZhbGlkYXRlRm9ybShbXCJBZGRDb3JwSW5mb0Zvcm1cIiwgXCJBZGRDb3JwQ29udGFjdEZvcm1cIl0pKSB7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHRcdCRzY29wZS5jb250YWN0ID0gKHJlcy5kYXRhLmNvbnRhY3QpID8gcmVzLmRhdGEuY29udGFjdCA6IHt9O1xuXHRcdFx0XHRcdC8vIGluaXRpYWxpemUgZG9uYXRpb25zIGlmIHRoZXJlIGFyZSBhbnlcblx0XHRcdFx0XHRpZiAoJHNjb3BlLmNvcnAuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCRzY29wZS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IHt9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBZGQgY29ycCBpbnB1dCB0ZXN0cyBmYWlsZWRcIik7XG5cdFx0XHR9XG5cdFx0fWVsc2Uge1xuXHRcdFx0aWYodmFsaWRTZXJ2aWNlLnZhbGlkYXRlRm9ybShbXCJFZGl0Q29ycEluZm9Gb3JtXCIsIFwiRWRpdENvcnBDb250YWN0Rm9ybVwiXSkpIHtcblx0XHRcdFx0Ly8gaW5zZXJ0IGNvcnAgLSBoYXMgbm8gaWRcblx0XHRcdFx0Y29uc29sZS5sb2coXCJ1cGRhdGUgY29ycFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblxuXHRcdFx0XHRcdCRzY29wZS5jb3JwLmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuaW5mbyA9IChyZXMuZGF0YS5pbmZvKSA/IHJlcy5kYXRhLmluZm8gOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0XHQvLyBpbml0aWFsaXplIGRvbmF0aW9ucyBpZiB0aGVyZSBhcmUgYW55XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5jb3JwLmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiB7fTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRWRpdCBjb3JwIGlucHV0IHRlc3RzIGZhaWxlZFwiKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsICRzY29wZS5uZXdEb25hdGlvbiwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUxpc3RTZWFyY2gnLCBbJyRzY29wZScsICckaHR0cCcsICdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgJ25ld0NvbnRhY3RMaXN0RGF0YScsICd0b2FzdHInLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBDb250YWN0TGlzdERhdGFTZXJ2aWNlLG5ld0NvbnRhY3RMaXN0RGF0YSwgdG9hc3RyLCAkcm9vdFNjb3BlKSB7XG4gICAgJHNjb3BlLnR5cGUgPXt9O1xuICAgICRzY29wZS5hZ2U9e307XG4gICAgJHNjb3BlLnppcD17fTtcblx0Ly8gaW5jbHVkZSBsaXN0IG5lZWRzIHRvIGJlIHdpdGhpbiBhbiBvYmplY3QgZHVlIHRvIHRoZSBjaGVja2JveGVzIGJlaW5nIGluIGEgdGFibGVcblx0JHNjb3BlLmVtYWlscyA9IHt9O1xuICAgICRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0JHNjb3BlLmluY2x1ZGVkRW1haWxzID0gW107XG5cdCRzY29wZS50b3RhbERpc3BsYXllZCA9IDUwO1xuXHQkc2NvcGUudG90YWxSZXN1bHRzID0gMDtcbiAgICAvLyRyb290U2NvcGUuaGlkZSA9IHRydWU7XG5cblxuXG4gICAgJHNjb3BlLmVtYWlsTGlzdCA9IFsgXTtcbiAgICAkc2NvcGUuc2VhcmNoTGlzdEJ0biA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZW1haWxMaXN0ID0gW107XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgIC0tIHdpbGwgc2VhcmNoIGJ5IHppcFxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ3ppcENrJykge1xuXG4gICAgICAgICAgICBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnemlwJywgJHNjb3BlLnppcC5kYXRhKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCAnKyAkc2NvcGUudG90YWxSZXN1bHRzICsnIHJlc3VsdHMnKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCByZXN1bHRzJyk7XG5cdFx0XHRcdH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgLSB3aWxsIHNlYXJjaCBieSBhZ2VcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdhZ2VDaycpIHtcbiAgICAgICAgICAgIHZhciBhZ2UgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnYWdlJywgJHNjb3BlLmFnZS5kYXRhKTtcbiAgICAgICAgICAgIGFnZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9USElTIFdPUktTIC0tZ2V0IGFsbCBmYW1pbGllcyBpZiBmYW0gaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2ZhbScpIHtcbiAgICAgICAgICAgIHZhciBmYW0gPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnZmFtaWx5JywgJycpO1xuICAgICAgICAgICAgZmFtLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2dldCBhbGwgY29ycCBpZiBjb3JwIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdjb3JwJykge1xuICAgICAgICAgICAgdmFyIGNvbXAgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnY29tcGFueScsICcnKTtcbiAgICAgICAgICAgIGNvbXAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZW1wdHkgdGhlIHNlYXJjaCBib3hcbiAgICAgICAkc2NvcGUudHlwZT17fTtcbiAgICAgICAgJHNjb3BlLmFnZT17fTtcbiAgICAgICAgJHNjb3BlLnppcD17fTtcblxuICAgIH07XG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vYWxlcnQoJ3dvcmtpbmcnKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMpO1xuICAgICAgICAgICAgLy8udGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICQoXCIuc2VhcmNoXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vICAgICQoXCIuZW5kTWVzc2FnZVwiKS5hcHBlbmQoXCI8aDI+c2VudDwvaDI+XCIpO1xuICAgICAgICAgICAgLy99KTtcbiAgfTtcblxuXHQkc2NvcGUubG9hZE1vcmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkICs9IDUwO1xuXHR9O1xuXG5cdCRzY29wZS5zaG93QWxsID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50b3RhbERpc3BsYXllZCA9ICRzY29wZS50b3RhbFJlc3VsdHM7XG5cdH07XG5cblx0JHNjb3BlLmNoZWNrQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgJGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpO1xuXHRcdGlmKCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMubGVuZ3RoID09ICRzY29wZS50b3RhbFJlc3VsdHMpIHtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0XHRcdCRidXR0b24udmFsKFwiQ2hlY2sgQWxsXCIpO1xuXHRcdH1lbHNle1xuXHRcdFx0JHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdCRidXR0b24udmFsKFwiVW5jaGVjayBBbGxcIik7XG5cdFx0fVxuXHR9O1xufV0pO1xuXG5cbiIsImFwcC5mYWN0b3J5KCdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcblxuICAgIGZ1bmN0aW9uIG1ha2VEYXRhQ2FsbCh0eXBlLCBwYXNzZWREYXRhKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIHRoZSBtYWtlIGRhdGEgY2FsbCcsIHR5cGUsIHBhc3NlZERhdGEpO1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vY3JlYXRlTWFpbExpc3QnLFxuICAgICAgICAgICAgcGFyYW1zOiB7dHlwZTogdHlwZSwgc2VhcmNoOiBwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsXG4gICAgfTtcblxuXG59XSk7IiwiLy9lZGl0IGZhbWlseSBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRGYW1pbHlDdHJsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRsb2cnLCAnUmVzdWx0U2VydmljZScsICckaHR0cCcsICd2YWxpZFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwLCB2YWxpZFNlcnZpY2UpIHtcblx0Ly8gc2V0cyB2YWxpZGF0aW9uIGZyb20gc2VydmljZSBmb3IgZG9tIGNhbGxzXG5cdCRzY29wZS52YWxpZGF0ZUlucHV0ID0gdmFsaWRTZXJ2aWNlLnZhbGlkYXRlSW5wdXQ7XG5cdC8vc2VuZHMgdGhlIGFkdWx0cyBhbmQga2lkcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5hZHVsdHMgPSBSZXN1bHRTZXJ2aWNlLmFkdWx0cztcblx0JHNjb3BlLmtpZHMgPSBSZXN1bHRTZXJ2aWNlLmtpZHM7XG5cdCRzY29wZS5mYW1pbHkgPSB7XG5cdFx0YWR1bHRPbmU6IHt9LFxuXHRcdGFkdWx0VHdvOiB7fSxcblx0XHRlbWVyZ2VuY3k6IHt9LFxuXHRcdGNoaWxkcmVuOiBbXSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblxuXHQkc2NvcGUuY2xlYXJGYW1pbHkgPSBmdW5jdGlvbiAoZm9ybXNBcnJheSkge1xuXHRcdCRzY29wZS5mYW1pbHkgPSB7XG5cdFx0XHRhZHVsdE9uZToge30sXG5cdFx0XHRhZHVsdFR3bzoge30sXG5cdFx0XHRlbWVyZ2VuY3k6IHt9LFxuXHRcdFx0Y2hpbGRyZW46IFtdLFxuXHRcdFx0ZG9uYXRpb25zOiBbXVxuXHRcdH07XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdFx0Zm9ybXNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG5cdFx0XHQkKCcjJysgdiArJyAuanMtdmFsaWRhdGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJCh0aGlzKS5kYXRhKCdwbGFjZWhvbGRlcicpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cblxuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdmYW1pbHkgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2ZhbWlseScsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmZhbWlseSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0ZmFtaWx5Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmFtaWx5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgZmFtaWx5XG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0Ly9hbGVydChcIlN1Ym1pdHRlZFwiKTtcblx0XHQvLyBpZiBoYXMgaWQsIHRoZW4gcHV0XG5cdFx0aWYoISRzY29wZS5mYW1pbHkuaWQpIHtcblx0XHRcdGlmKHZhbGlkU2VydmljZS52YWxpZGF0ZUZvcm0oW1wiQWRkRmFtSW5mb0Zvcm1cIiwgXCJBZGRGYW1FbWVyRm9ybVwiXSkpIHtcblx0XHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBZGQgZmFtaWx5IGZhaWxlZCBpbnB1dCB0ZXN0c1wiKTtcblx0XHRcdH1cblx0XHR9ZWxzZSB7XG5cdFx0XHRpZih2YWxpZFNlcnZpY2UudmFsaWRhdGVGb3JtKFtcIkVkaXRGYW1JbmZvRm9ybVwiLCBcIkVkaXRGYW1FbWVyRm9ybVwiXSkpIHtcblx0XHRcdFx0Ly8gaW5zZXJ0IGZhbWlseSAtIGhhcyBubyBpZFxuXHRcdFx0XHRjb25zb2xlLmxvZyhcImluc2VydCBmYW1pbHlcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0XHRcdCRodHRwKHtcblx0XHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdFx0aWYgKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1lbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFZGl0IGZhbWlseSBmYWlsZWQgaW5wdXQgdGVzdHNcIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGZvciBhcHBlbmRpbmcgY2hpbGRyZW4gdG8gbW9kZWwgYmVmb3JlIHNhdmluZyBuZXcgZmFtaWx5XG5cdCRzY29wZS5hZGRDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImNoaWxkIGFkZGVkXCIsICRzY29wZS5uZXdDaGlsZCwgJHNjb3BlLmZhbWlseS5jaGlsZHJlbik7XG5cdFx0Ly8gaWYgdHJ1ZSwgdGhlbiB1cGRhdGUgdGhhdCBpbmRleFxuXHRcdGlmKCRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW5bJHNjb3BlLmVkaXRpbmdDaGlsZF0gPSAkc2NvcGUubmV3Q2hpbGQ7XG5cdFx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gZmFsc2U7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gZWxzZSBwdXNoIHRvIGFycmF5XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnB1c2goJHNjb3BlLm5ld0NoaWxkKTtcblx0XHR9XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdH07XG5cblx0Ly8gZWRpdCBjaGlsZCBvbiB0aGUgYWRkIGNoaWxkcmVuIHRhYiBvZiBhZGQgZmFtaWx5XG5cdCRzY29wZS5lZGl0Q2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHQvLyBzYXZlIGluZGV4IG9mIGNoaWxkIGVkaXRpbmdcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gaW5kZXg7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0gJHNjb3BlLmZhbWlseS5jaGlsZHJlbltpbmRleF07XG5cdH07XG5cblx0JHNjb3BlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiByZW1vdmUgY2hpbGQgaW5kZXhcIiwgaW5kZXgsIFwiIGVkaXQgXCIsICRzY29wZS5lZGl0aW5nQ2hpbGQpO1xuXHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRpZihpbmRleCA9PSAkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImVkaXQgbWF0Y2hcIik7XG5cdFx0XHQkc2NvcGUuY2xlYXJDaGlsZCgpO1xuXHRcdH1lbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwibm8gZWRpdCBtYXRjaFwiKTtcblx0XHR9XG5cdH07XG5cblx0Ly8gY2xlYXJzIHRleHQgYm94ZXMgaW4gYWRkIGZhbWlseS0+Y2hpbGRyZW4gdGFiXG5cdCRzY29wZS5jbGVhckNoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gY2xlYXIgY2hpbGRcIik7XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge1xuXHRcdFx0Zmlyc3ROYW1lOiAnJyxcblx0XHRcdGxhc3ROYW1lOiAnJyxcblx0XHRcdGJpcnRoZGF0ZTogJycsXG5cdFx0XHRzY2hvb2w6ICcnLFxuXHRcdFx0bm90ZXM6ICcnXG5cdFx0fTtcblx0XHQkc2NvcGUuZWRpdGluZ0NoaWxkID0gZmFsc2U7XG5cdH07XG5cblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3Rcblx0JHNjb3BlLmFkZERvbmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxuXHQvLy8vIHByZXZlbnQgYWNjaWRlbnRhbCBiYWNrc1xuXHQvLyRzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiggZXZlbnQsIG9sZFVybCApIHtcblx0Ly9cdGNvbnNvbGUubG9nKFwib2xkIHVybDogXCIsIG9sZFVybCk7XG5cdC8vXHRpZigvKGFkZGZhbWlseSkvLnRlc3Qob2xkVXJsKSkge1xuXHQvL1x0XHR2YXIgYW5zd2VyID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsZWF2ZSB0aGlzIHBhZ2U/XCIpO1xuXHQvL1x0XHRpZiAoIWFuc3dlcikge1xuXHQvL1x0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdC8vXHRcdH1cblx0Ly9cdH1cblx0Ly99KTtcblxufV0pOyIsIi8vY29udHJvbGxlcnMgZm9yIGxvZ2luXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnYXV0aFNlcnZpY2UnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBhdXRoU2VydmljZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKXtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJGh0dHAucG9zdCgnL2xvZ2luJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5zYXZlVG9rZW4ocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL3NlYXJjaFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG59XSk7XG4iLCJcbi8vVGhpcyBzaG91bGQgZ2V0IHRoZSBzZWFyY2ggaXRlbVxuYXBwLmNvbnRyb2xsZXIoJ3NlYXJjaEZ1bmN0aW9uJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnUmVzdWx0U2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBSZXN1bHRTZXJ2aWNlKSB7XG4gICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcblxuICAgICRzY29wZS5zZWFyY2hCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICBSZXN1bHRTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgkc2NvcGUuZm9ybUlucHV0LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyB0aGUgaW5wdXQgdGV4dCcsICRzY29wZS5mb3JtSW5wdXQpO1xuICAgICAgICAvL2VtcHR5cyB0aGUgc2VhcmNoIGJveFxuICAgICAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuICAgIH07XG5cbn1dKTtcbiIsIi8vVGhpcyBzZXJ2aWNlIHNob3VsZCBwYXNzIGRhdGEgYmV0d2VlbiBjb250cm9sbGVyc1xuYXBwLmZhY3RvcnkoJ1Jlc3VsdFNlcnZpY2UnLCBbJyRodHRwJyxmdW5jdGlvbigkaHR0cCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgdmFyIGFkdWx0cyA9IFtdO1xuICAgIHZhciBjb21wYW5pZXMgPSBbXTtcbiAgICB2YXIga2lkcyA9IFtdO1xuXG4gICAgdmFyIG1ha2VEYXRhQ2FsbCA9IGZ1bmN0aW9uKHBhc3NlZERhdGEpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6ICcuLi9zZWFyY2gnLFxuICAgICAgICAgICAgcGFyYW1zOntzZWFyY2g6cGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZ2V0Q29tcGFuaWVzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0S2lkcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEFkdWx0cyhyZXN1bHRzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgZ2V0Q29tcGFuaWVzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQxID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGNvbXBhbmllcy5zcGxpY2UoMCxjb21wYW5pZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY29tcGFueScpXG4gICAgICAgICAgICAgICAgY29tcGFuaWVzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGdldEVsZW1lbnQxKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudDEnLGNvbXBhbmllcyk7XG4gICAgICAgIHJldHVybiBjb21wYW5pZXNcbiAgICB9O1xuXG4gICAgdmFyIGdldEFkdWx0cyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBhZHVsdHMuc3BsaWNlKDAsYWR1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2FkdWx0JylcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MihhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIGdldEVsZW1lbnQyJywgYWR1bHRzKTtcbiAgICAgICAgcmV0dXJuIGFkdWx0c1xuICAgIH07XG5cbiAgICB2YXIgZ2V0S2lkcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBraWRzLnNwbGljZSgwLGtpZHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICBraWRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBnZXRFbGVtZW50MyhhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnRzMycsIGtpZHMpO1xuICAgICAgICByZXR1cm4ga2lkc1xuICAgIH07XG5cbiAgICAvL3B1YmxpY1xuICAgIHZhciBwdWJsaWNBcGkgPSB7XG4gICAgICAgIGdldEtpZHM6IGdldEtpZHMsXG4gICAgICAgIGdldEFkdWx0czogZ2V0QWR1bHRzLFxuICAgICAgICBnZXRDb21wYW5pZXM6IGdldENvbXBhbmllcyxcbiAgICAgICAgbWFrZURhdGFDYWxsOiBtYWtlRGF0YUNhbGwsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNvbXBhbmllczogY29tcGFuaWVzLFxuICAgICAgICBhZHVsdHM6IGFkdWx0cyxcbiAgICAgICAga2lkczoga2lkc1xuICAgIH07XG4gICAgcmV0dXJuIHB1YmxpY0FwaTtcbn1dKTsiLCIvLyBQbGVhc2Ugbm90ZSB0aGF0ICRtb2RhbEluc3RhbmNlIHJlcHJlc2VudHMgYSBtb2RhbCB3aW5kb3cgKGluc3RhbmNlKSBkZXBlbmRlbmN5LlxuLy8gSXQgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAkdWliTW9kYWwgc2VydmljZSB1c2VkIGFib3ZlLlxuXG4vL25lZWRlZCBmb3IgbW9kYWw/PyBwcmV0dHkgc3VyZVxuYXBwLmNvbnRyb2xsZXIoJ01vZGFsSW5zdGFuY2VDdHJsJyxbJyRzY29wZScsJyRtb2RhbEluc3RhbmNlJywgZnVuY3Rpb24gKCRzY29wZSwgJG1vZGFsSW5zdGFuY2UpIHtcblxuICAgICRzY29wZS5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJHNjb3BlLnNlbGVjdGVkLml0ZW0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcbiAgICB9O1xufV0pOyIsImFwcC5jb250cm9sbGVyKCduYXZDdHJsJywgWydhdXRoU2VydmljZScsJyRzY29wZScsJyRyb290U2NvcGUnLCckbG9jYXRpb24nLCBmdW5jdGlvbihhdXRoU2VydmljZSwgJHNjb3BlLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcblxuICAgIGlmKCRyb290U2NvcGUudXNlciAmJiAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUpe1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2hvbWUnKTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgYXV0aFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgIH1cbn1dKTtcbiIsIi8vIEFqYXggZm9yIGNyZWF0aW5nIHRoZSBjb250YWN0IGxpc3QgaW4gY29uc3RhbnQgY29udGFjdFxuYXBwLmNvbnRyb2xsZXIoJ25ld0NvbnRhY3RMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkcm9vdFNjb3BlKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2hpZGUnKTtcbiAgICAgICAgJHJvb3RTY29wZS5oaWRlID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxpc3RuYW1lID0ge307XG5cbiAgICAkc2NvcGUuY3JlYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgbGlzdCBuYW1lIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvc3RMaXN0KCRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXG4gICAgICAgICRzY29wZS5saXN0bmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG5cbiIsIlxuYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4gICAgICAgIHZhciBsaXN0TnVtID0gXCJcIjtcbiAgICAgICAgdmFyIGltcG9ydERhdGFBcnJheSA9W107XG5cbiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRpZCB0aGUgbmFtZSBtYWtlIGl0IHRvIHRoZSBzZXJ2aWNlPyBcIiArIG5hbWUgKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqZWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBvYmplY3QubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogb2JqZWN0LmNvbXBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogb2JqZWN0LmNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydERhdGFBcnJheS5wdXNoKHRoaXMuY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZHJlc3NcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSYtXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKFsoXVswLTldezN9WyldfFswLTldezN9KVtcXHNcXC0uXT9bMC05XXszfVtcXHNcXC0uXT9bMC05XXs0fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4dFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHM6LV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXjIwWzAtOV17Mn1bLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDE5OVswLTldfDIwWzAtOV17Mn0pWy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFtb3VudFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXltcXCRdP1tcXGRdKyhbLl1bXFxkXXsyfSk/JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBjbGFzcyBzZWFyY2hcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmVxdWlyZWQgb3IgdHJpbW1lZCBsZW5ndGggaXMgbm90IDAsIHRoZW4gdmFsaWRhdGUgaW5mb1xuICAgICAgICBpZigkb2JqLmF0dHIoJ3JlcXVpcmVkJykgfHwgJG9iai52YWwoKSkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHZhbHVlIG1hdGNoZXMgcmVnZXggZm9yIGZpZWxkIHR5cGVcbiAgICAgICAgICAgIGlmKCFwYXR0ZXJuLnRlc3QoJG9iai52YWwoKS50cmltKCkpIHx8ICRvYmoudmFsKCkudHJpbSgpLmxlbmd0aCA9PSAwICYmICRvYmouYXR0cigncmVxdWlyZWQnKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGZhaWxzLCBhZGRzIGludmFsaWQgY2xhc3MgKGhpZ2hsaWdodGluZyksIGNoYW5nZXMgcGxhY2Vob2xkZXIgdG8gd2hhdCBzaG91bGQgYmUgZW50ZXJlZFxuICAgICAgICAgICAgICAgICRvYmouYWRkQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICRvYmouZGF0YSgnaW52YWxpZCcpKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgZmFpbGVkIHRlc3QnLCBwYXR0ZXJuKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXNzZXMsIHJlbW92ZXMgaW52YWxpZCBjbGFzcywgcmVzZXRzIHBsYWNlaG9sZGVyIHRvIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAkb2JqLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgcGFzc2VkIHRlc3QnLCBwYXR0ZXJuKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdHZhciB2YWxpZGF0ZUZvcm0gPSBmdW5jdGlvbiAoZm9ybXMpIHtcblx0XHR2YXIgcGFzcyA9IHRydWU7XG5cdFx0Zm9ybXMuZm9yRWFjaChmdW5jdGlvbiAodiwgaSwgYSkge1xuXHRcdFx0JCgnIycrIHYgKycgLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmKHZhbGlkYXRlSW5wdXQoJCh0aGlzKS5kYXRhKCd0eXBlJyksICQodGhpcykuYXR0cignaWQnKSkgPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygkKHRoaXMpLmF0dHIoJ2lkJykgK1wiIGZhaWxlZCB0aGUgdGVzdCBcIisgJCh0aGlzKS5kYXRhKCd0eXBlJykgK1wiIGVudGVyZWQgaW5mbzogXCIrICQodGhpcykudmFsKCkpO1xuXHRcdFx0XHRcdHBhc3MgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBhc3M7XG5cdH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0LFxuXHRcdHZhbGlkYXRlRm9ybTogdmFsaWRhdGVGb3JtXG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
