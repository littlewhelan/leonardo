function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],o=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,o,n,i){t.validateInput=i.validateInput,t.companies=o.companies,t.corp={info:{},contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(){t.corp={},t.newDonation={}},t.open=function(o,i){return console.log("corp call",i),n({method:"GET",url:"../corporation",params:{id:i}}).then(function(n){t.corp=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.corp}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("update corp",t.corp),n({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):n({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr",function(t,e,a,o,n){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,console.log(t.emailList),n.success("Loaded "+t.totalResults+" results")})["catch"](function(){n.error("Failed to load results")}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){console.log(e),t.emailList=e,t.totalResults=e.length})}if("fam"==t.type){var o=a.makeDataCall("family","");o.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}if("corp"==t.type){var i=a.makeDataCall("company","");i.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),o.popList(t.emails.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],a.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,o){var n=e.defer();return console.log("this is in the make data call",a,o),t({method:"GET",url:"../createMailList",params:{type:a,search:o}}).then(function(t){data=t.data,n.resolve(t.data)}),n.promise}return{data:[],makeDataCall:a}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,o,n,i){t.validateInput=i.validateInput,t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={}},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),n({method:"GET",url:"../family",params:{id:i}}).then(function(n){t.family=n.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),n({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):n({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,a,o,n){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),n.user=a.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],o=[],n=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),s(e),c(e)})},l=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return e(t),console.log("this is getElement1",o),o},c=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},s=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"child"==t.type&&n.push(t)})};return e(t),console.log("this is getElements3",n),n},r={getKids:s,getAdults:c,getCompanies:l,makeDataCall:i,results:e,companies:o,adults:a,kids:n};return r}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,o){a.user=t.getUser(),a.user&&a.user.username&&o.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,e){e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input),console.log("list #",t.listNum),e.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,e){var a="",o=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),e.post("/newContactList",{name:t}).then(function(t){console.log(t.data),a=t.data,console.log("Id? ",a)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:o,listNum:a},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),n(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,o){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var n=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),o.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("edit password:",t.form),e.put("/admin",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.service("validService",[function(){var t=function(t,e){var a,o=e?$("#"+e):!1;switch(console.log("object is ",o,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]+$/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":a=/^[a-zA-Z0-9\s:-]+$/;break;case"date":a=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":a=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":a=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}(o.attr("required")||o.val().trim().length>0)&&(a.test(o.val().trim())?(o.removeClass("invalid").attr("placeholder",o.data("placeholder")),console.log(t," passed test",a)):(o.addClass("invalid").attr("placeholder",o.data("invalid")).val(""),console.log(t," failed test",a)))};return{validateInput:t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJpbmZvIiwiY29udGFjdCIsImRvbmF0aW9ucyIsIm5ld0RvbmF0aW9uIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJjbGVhckNvcnAiLCJvcGVuIiwic2l6ZSIsImlkIiwibWV0aG9kIiwidXJsIiwidGhlbiIsImRhdGEiLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsInRvZ2dsZUFuaW1hdGlvbiIsInNhdmUiLCJyZXMiLCJsZW5ndGgiLCJhZGREb25hdGlvbiIsInB1c2giLCJDb250YWN0TGlzdERhdGFTZXJ2aWNlIiwibmV3Q29udGFjdExpc3REYXRhIiwidG9hc3RyIiwidHlwZSIsImFnZSIsInppcCIsImVtYWlscyIsImluY2x1ZGVkRW1haWxzIiwidG90YWxEaXNwbGF5ZWQiLCJ0b3RhbFJlc3VsdHMiLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwic3VjY2VzcyIsImVycm9yIiwiZmFtIiwiY29tcCIsInBvcHVsYXRlTGlzdCIsInBvcExpc3QiLCJsb2FkTW9yZSIsInNob3dBbGwiLCJjaGVja0FsbCIsImV2ZW50IiwiJGJ1dHRvbiIsImVsZW1lbnQiLCJ0YXJnZXQiLCJ2YWwiLCJjb3B5IiwicGFzc2VkRGF0YSIsImRlZmVycmVkIiwiZGVmZXIiLCJzZWFyY2giLCJwcm9taXNlIiwiYWR1bHRzIiwia2lkcyIsImZhbWlseSIsImFkdWx0T25lIiwiYWR1bHRUd28iLCJlbWVyZ2VuY3kiLCJjaGlsZHJlbiIsIm5ld0NoaWxkIiwiY2xlYXJGYW1pbHkiLCJhZGRDaGlsZCIsImVkaXRpbmdDaGlsZCIsImVkaXRDaGlsZCIsImluZGV4IiwicmVtb3ZlQ2hpbGQiLCJzcGxpY2UiLCJjbGVhckNoaWxkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJiaXJ0aGRhdGUiLCJzY2hvb2wiLCJub3RlcyIsIiRyb290U2NvcGUiLCJzdWJtaXQiLCJwb3N0IiwiZm9ybSIsInVzZXIiLCJmb3JtSW5wdXQiLCJzZWFyY2hCdG4iLCJyZXN1bHRzIiwiZ2V0Q29tcGFuaWVzIiwiZ2V0S2lkcyIsImdldEFkdWx0cyIsImFycmF5IiwiZ2V0RWxlbWVudDEiLCJmb3JFYWNoIiwiZ2V0RWxlbWVudDIiLCJnZXRFbGVtZW50MyIsInB1YmxpY0FwaSIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJjbG9zZSIsIml0ZW0iLCJjYW5jZWwiLCJkaXNtaXNzIiwidXNlcm5hbWUiLCJsaXN0bmFtZSIsImNyZWF0ZUxpc3QiLCJpbnB1dCIsInBvc3RMaXN0IiwibGlzdE51bSIsImltcG9ydERhdGFBcnJheSIsIm5hbWUiLCJsaXN0IiwiZGF0YU9iamVjdCIsImdldENoZWNrZWQiLCJsIiwib2JqZWN0IiwiY29udGFjdE9iamVjdCIsImVtYWlsX2FkZHJlc3NlcyIsImVtYWlsIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImNvbXBhbnlfbmFtZSIsImNvbXBhbnkiLCJhZGRyZXNzZXMiLCJjaXR5IiwibGlzdE5hbWUiLCJwdXQiLCJwYXR0ZXJuIiwiJG9iaiIsIiQiLCJhdHRyIiwidHJpbSIsInRlc3QiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFLQSxRQUFBQSxhQUFBQyxHQUNBLE9BQ0FDLEtBQUFDLE9BQUFGLEdBQUFHLE9BQUFDLFVBQ0FDLE9BQUFILE9BQUFGLEdBQUFHLE9BQUFHLGFBUkEsR0FBQUMsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxlQUFBLGtCQUFB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QUFLLEtBQUFKLEVBQUE1RSxNQUFBK0UsU0FNQUgsRUFBQUssWUFBQSxXQUFBSCxLQUFBLGNBQUFGLEVBQUFySCxLQUFBLGdCQUNBaEQsUUFBQUMsSUFBQWlFLEVBQUEsZUFBQWtHLEtBTEFDLEVBQUFNLFNBQUEsV0FBQUosS0FBQSxjQUFBRixFQUFBckgsS0FBQSxZQUFBeUMsSUFBQSxJQUNBekYsUUFBQUMsSUFBQWlFLEVBQUEsZUFBQWtHLEtBU0EsUUFDQW5JLGNBQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2xlbycsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJywgJ2NoZWNrbGlzdC1tb2RlbCcsICd0b2FzdHInXSk7XG5cbnZhciBwcmV0dHlEYXRlID0gXCJNTS9ERC9ZWWdZWVwiO1xudmFyIGZ1bGxEYXRlID0gXCJNTS9ERC9ZWVlZIGg6bW06c3MgYVwiO1xuXG5mdW5jdGlvbiBmb3JtYXREYXRlcyAoZGF0ZSkge1xuXHRyZXR1cm4ge1xuXHRcdGZ1bGw6IG1vbWVudChkYXRlKS5mb3JtYXQoZnVsbERhdGUpLFxuXHRcdHByZXR0eTogbW9tZW50KGRhdGUpLmZvcm1hdChwcmV0dHlEYXRlKVxuXHR9O1xufVxuXG5hcHAuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLFxuICAgIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLlxuICAgICAgICAgICAgd2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9sb2dpbi5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvc2VhcmNoJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9zZWFyY2guaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL3JlZ2lzdGVyLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9jb250YWN0TGlzdCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvY29udGFjdExpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2FkZGZhbWlseScsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkZmFtaWx5Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnZWRpdEZhbWlseUN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRjb3JwJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9hZGRjb3JwLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnZWRpdENvcnBDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdGxpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RsaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIG90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy9zZWFyY2gnXG4gICAgICAgICAgICB9KTtcbiAgICB9XSk7XG5cblxuXG5cbiIsImFwcC5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLCBbJyRxJywgJyRsb2NhdGlvbicsICdhdXRoU2VydmljZScsIGZ1bmN0aW9uICgkcSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG4gICAgICAgICAgICBpZiAoYXV0aFNlcnZpY2UuaXNBdXRoZWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyBhdXRoU2VydmljZS5nZXRUb2tlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgfSwgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcblxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pIiwiYXBwLnNlcnZpY2UoJ2F1dGhTZXJ2aWNlJywgWyckd2luZG93JywgZnVuY3Rpb24gKCR3aW5kb3cpIHtcblxuICAgIHRoaXMucGFyc2VKd3QgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgYmFzZTY0VXJsID0gdG9rZW4uc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgICAgIHZhciBiYXNlNjQgPSBiYXNlNjRVcmwucmVwbGFjZSgnLScsICcrJykucmVwbGFjZSgnXycsICcvJyk7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSgkd2luZG93LmF0b2IoYmFzZTY0KSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4ge307XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuID0gdG9rZW47XG4gICAgICAgIC8vY29uc29sZS5sb2coJ1NhdmVkIHRva2VuOicsJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIHRoaXMuaXNBdXRoZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXJzZUp3dCh0b2tlbik7XG4gICAgICAgICAgICB2YXIgbm90RXhwaXJlZCA9IE1hdGgucm91bmQobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKSA8PSBwYXJhbXMuZXhwO1xuICAgICAgICAgICAgaWYgKCFub3RFeHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub3RFeHBpcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBkZWxldGUgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW47XG4gICAgfTtcblxuICAgIC8vIGV4cG9zZSB1c2VyIGFzIGFuIG9iamVjdFxuICAgIHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VKd3QodGhpcy5nZXRUb2tlbigpKVxuICAgIH07XG59XSk7IiwiLy9lZGl0IGNvcnBvcmF0aW9uIG1vZGFsIHRlbXBsYXRlXG5hcHAuY29udHJvbGxlcignZWRpdENvcnBDdHJsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRsb2cnLCAnUmVzdWx0U2VydmljZScsICckaHR0cCcsICd2YWxpZFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwLCB2YWxpZFNlcnZpY2UpIHtcblxuXHQvLyBzZXRzIHZhbGlkYXRpb24gZnJvbSBzZXJ2aWNlIGZvciBkb20gY2FsbHNcblx0JHNjb3BlLnZhbGlkYXRlSW5wdXQgPSB2YWxpZFNlcnZpY2UudmFsaWRhdGVJbnB1dDtcblx0Ly9zZW5kcyB0aGUgY29tcGFuaWVzIGFmdGVyIHRoZSByZXN1bHRzIGhhdmUgYmVlbiBvcmdhbml6ZWRcblx0JHNjb3BlLmNvbXBhbmllcyA9IFJlc3VsdFNlcnZpY2UuY29tcGFuaWVzO1xuXHQkc2NvcGUuY29ycCA9IHtcblx0XHRpbmZvOiB7fSxcblx0XHRjb250YWN0OiB7fSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXG5cdCRzY29wZS5jbGVhckNvcnAgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmNvcnAgPSB7fTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdjb3JwIGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9jb3Jwb3JhdGlvbicsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmNvcnAgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5jb3JwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBjb3JwXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmNvcnApO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuY29ycC5pZCkge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBpbnNlcnQgY29ycCAtIGhhcyBubyBpZFxuXHRcdFx0Y29uc29sZS5sb2coXCJ1cGRhdGUgY29ycFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblxuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsICRzY29wZS5uZXdEb25hdGlvbiwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUxpc3RTZWFyY2gnLCBbJyRzY29wZScsICckaHR0cCcsICdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgJ25ld0NvbnRhY3RMaXN0RGF0YScsICd0b2FzdHInLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgQ29udGFjdExpc3REYXRhU2VydmljZSxuZXdDb250YWN0TGlzdERhdGEsIHRvYXN0cikge1xuICAgICRzY29wZS50eXBlID17fTtcbiAgICAkc2NvcGUuYWdlPXt9O1xuICAgICRzY29wZS56aXA9e307XG5cdC8vIGluY2x1ZGUgbGlzdCBuZWVkcyB0byBiZSB3aXRoaW4gYW4gb2JqZWN0IGR1ZSB0byB0aGUgY2hlY2tib3hlcyBiZWluZyBpbiBhIHRhYmxlXG5cdCRzY29wZS5lbWFpbHMgPSB7fTtcbiAgICAkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzID0gW107XG5cdCRzY29wZS5pbmNsdWRlZEVtYWlscyA9IFtdO1xuXHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgPSA1MDtcblx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IDA7XG5cbiAgICAkc2NvcGUuZW1haWxMaXN0ID0gWyBdO1xuXG4gICAgJHNjb3BlLnNlYXJjaExpc3RCdG4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmVtYWlsTGlzdCA9IFtdO1xuXG5cbiAgICAgICAgLy9USElTIFdPUktTICAtLSB3aWxsIHNlYXJjaCBieSB6aXBcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICd6aXBDaycpIHtcblxuICAgICAgICAgICAgQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ3ppcCcsICRzY29wZS56aXAuZGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lbWFpbExpc3QpO1xuXHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdMb2FkZWQgJysgJHNjb3BlLnRvdGFsUmVzdWx0cyArJyByZXN1bHRzJyk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcignRmFpbGVkIHRvIGxvYWQgcmVzdWx0cycpO1xuXHRcdFx0XHR9KTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9USElTIFdPUktTIC0gd2lsbCBzZWFyY2ggYnkgYWdlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnYWdlQ2snKSB7XG4gICAgICAgICAgICB2YXIgYWdlID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2FnZScsICRzY29wZS5hZ2UuZGF0YSk7XG4gICAgICAgICAgICBhZ2UudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVEhJUyBXT1JLUyAtLWdldCBhbGwgZmFtaWxpZXMgaWYgZmFtIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdmYW0nKSB7XG4gICAgICAgICAgICB2YXIgZmFtID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2ZhbWlseScsICcnKTtcbiAgICAgICAgICAgIGZhbS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9nZXQgYWxsIGNvcnAgaWYgY29ycCBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnY29ycCcpIHtcbiAgICAgICAgICAgIHZhciBjb21wID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2NvbXBhbnknLCAnJyk7XG4gICAgICAgICAgICBjb21wLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2VtcHR5IHRoZSBzZWFyY2ggYm94XG4gICAgICAgJHNjb3BlLnR5cGU9e307XG4gICAgICAgICRzY29wZS5hZ2U9e307XG4gICAgICAgICRzY29wZS56aXA9e307XG5cbiAgICB9O1xuICAgICRzY29wZS5wb3B1bGF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL2FsZXJ0KCd3b3JraW5nJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMpO1xuICAgICAgICBuZXdDb250YWN0TGlzdERhdGEucG9wTGlzdCgkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzKTtcbiAgICAgICAgICAgIC8vLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAkKFwiLnNlYXJjaFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAvLyAgICAkKFwiLmVuZE1lc3NhZ2VcIikuYXBwZW5kKFwiPGgyPnNlbnQ8L2gyPlwiKTtcbiAgICAgICAgICAgIC8vfSk7XG4gIH07XG5cblx0JHNjb3BlLmxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50b3RhbERpc3BsYXllZCArPSA1MDtcblx0fTtcblxuXHQkc2NvcGUuc2hvd0FsbCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUudG90YWxEaXNwbGF5ZWQgPSAkc2NvcGUudG90YWxSZXN1bHRzO1xuXHR9O1xuXG5cdCRzY29wZS5jaGVja0FsbCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0dmFyICRidXR0b24gPSBhbmd1bGFyLmVsZW1lbnQoZXZlbnQudGFyZ2V0KTtcblx0XHRpZigkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzLmxlbmd0aCA9PSAkc2NvcGUudG90YWxSZXN1bHRzKSB7XG5cdFx0XHQkc2NvcGUuZW1haWxzLmluY2x1ZGVkRW1haWxzID0gW107XG5cdFx0XHQkYnV0dG9uLnZhbChcIkNoZWNrIEFsbFwiKTtcblx0XHR9ZWxzZXtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHQkYnV0dG9uLnZhbChcIlVuY2hlY2sgQWxsXCIpO1xuXHRcdH1cblx0fTtcbn1dKTtcblxuXG4iLCJhcHAuZmFjdG9yeSgnQ29udGFjdExpc3REYXRhU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlRGF0YUNhbGwodHlwZSwgcGFzc2VkRGF0YSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiB0aGUgbWFrZSBkYXRhIGNhbGwnLCB0eXBlLCBwYXNzZWREYXRhKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL2NyZWF0ZU1haWxMaXN0JyxcbiAgICAgICAgICAgIHBhcmFtczoge3R5cGU6IHR5cGUsIHNlYXJjaDogcGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbFxuICAgIH07XG5cblxufV0pOyIsIi8vZWRpdCBmYW1pbHkgbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0RmFtaWx5Q3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCAndmFsaWRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJHVpYk1vZGFsLCAkbG9nLCBSZXN1bHRTZXJ2aWNlLCAkaHR0cCwgdmFsaWRTZXJ2aWNlKSB7XG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBhZHVsdHMgYW5kIGtpZHMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuYWR1bHRzID0gUmVzdWx0U2VydmljZS5hZHVsdHM7XG5cdCRzY29wZS5raWRzID0gUmVzdWx0U2VydmljZS5raWRzO1xuXHQkc2NvcGUuZmFtaWx5ID0ge1xuXHRcdGFkdWx0T25lOiB7fSxcblx0XHRhZHVsdFR3bzoge30sXG5cdFx0ZW1lcmdlbmN5OiB7fSxcblx0XHRjaGlsZHJlbjogW10sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cblx0JHNjb3BlLmNsZWFyRmFtaWx5ID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5mYW1pbHkgPSB7XG5cdFx0XHRhZHVsdE9uZToge30sXG5cdFx0XHRhZHVsdFR3bzoge30sXG5cdFx0XHRlbWVyZ2VuY3k6IHt9LFxuXHRcdFx0Y2hpbGRyZW46IFtdLFxuXHRcdFx0ZG9uYXRpb25zOiBbXVxuXHRcdH07XG5cdFx0JHNjb3BlLm5ld0NoaWxkID0ge307XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdH07XG5cblxuXG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2ZhbWlseSBjYWxsJywgaWQpO1xuXHRcdHJldHVybiAkaHR0cCh7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0dXJsOiAnLi4vZmFtaWx5Jyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHQkc2NvcGUuZmFtaWx5ID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJHVpYk1vZGFsLm9wZW4oe1xuXHRcdFx0XHRhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwcml2YXRlL2VkaXRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5mYW1pbHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBmYW1pbHlcblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJTYXZlIHN1Ym1pdHRlZFwiLCAkc2NvcGUuZmFtaWx5KTtcblx0XHQvL2FsZXJ0KFwiU3VibWl0dGVkXCIpO1xuXHRcdC8vIGlmIGhhcyBpZCwgdGhlbiBwdXRcblx0XHRpZighJHNjb3BlLmZhbWlseS5pZCkge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2ZhbWlseScsXG5cdFx0XHRcdGRhdGE6IHtmYW1pbHk6ICRzY29wZS5mYW1pbHl9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgZmFtaWx5LCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0T25lID0gKHJlcy5kYXRhLmFkdWx0T25lKSA/IHJlcy5kYXRhLmFkdWx0T25lIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRUd28gPSAocmVzLmRhdGEuYWR1bHRUd28pID8gcmVzLmRhdGEuYWR1bHRUd28gOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5lbWVyZ2VuY3kgPSAocmVzLmRhdGEuZW1lcmdlbmN5KSA/IHJlcy5kYXRhLmVtZXJnZW5jeSA6IHt9O1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gKHJlcy5kYXRhLmNoaWxkcmVuKSA/IHJlcy5kYXRhLmNoaWxkcmVuIDogW107XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSAocmVzLmRhdGEuZG9uYXRpb25zKSA/IHJlcy5kYXRhLmRvbmF0aW9ucyA6IFtdO1xuXHRcdFx0fSk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Ly8gaW5zZXJ0IGZhbWlseSAtIGhhcyBubyBpZFxuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNlcnQgZmFtaWx5XCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gZm9yIGFwcGVuZGluZyBjaGlsZHJlbiB0byBtb2RlbCBiZWZvcmUgc2F2aW5nIG5ldyBmYW1pbHlcblx0JHNjb3BlLmFkZENoaWxkID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiY2hpbGQgYWRkZWRcIiwgJHNjb3BlLm5ld0NoaWxkLCAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuKTtcblx0XHQvLyBpZiB0cnVlLCB0aGVuIHVwZGF0ZSB0aGF0IGluZGV4XG5cdFx0aWYoJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlblskc2NvcGUuZWRpdGluZ0NoaWxkXSA9ICRzY29wZS5uZXdDaGlsZDtcblx0XHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBlbHNlIHB1c2ggdG8gYXJyYXlcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ucHVzaCgkc2NvcGUubmV3Q2hpbGQpO1xuXHRcdH1cblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0fTtcblxuXHQvLyBlZGl0IGNoaWxkIG9uIHRoZSBhZGQgY2hpbGRyZW4gdGFiIG9mIGFkZCBmYW1pbHlcblx0JHNjb3BlLmVkaXRDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdC8vIHNhdmUgaW5kZXggb2YgY2hpbGQgZWRpdGluZ1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBpbmRleDtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuW2luZGV4XTtcblx0fTtcblxuXHQkc2NvcGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIHJlbW92ZSBjaGlsZCBpbmRleFwiLCBpbmRleCwgXCIgZWRpdCBcIiwgJHNjb3BlLmVkaXRpbmdDaGlsZCk7XG5cdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdGlmKGluZGV4ID09ICRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZWRpdCBtYXRjaFwiKTtcblx0XHRcdCRzY29wZS5jbGVhckNoaWxkKCk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJubyBlZGl0IG1hdGNoXCIpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBjbGVhcnMgdGV4dCBib3hlcyBpbiBhZGQgZmFtaWx5LT5jaGlsZHJlbiB0YWJcblx0JHNjb3BlLmNsZWFyQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiBjbGVhciBjaGlsZFwiKTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7XG5cdFx0XHRmaXJzdE5hbWU6ICcnLFxuXHRcdFx0bGFzdE5hbWU6ICcnLFxuXHRcdFx0YmlydGhkYXRlOiAnJyxcblx0XHRcdHNjaG9vbDogJycsXG5cdFx0XHRub3RlczogJydcblx0XHR9O1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0fTtcblxuXG5cdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHQkc2NvcGUuYWRkRG9uYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG5cdC8vLy8gcHJldmVudCBhY2NpZGVudGFsIGJhY2tzXG5cdC8vJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCBldmVudCwgb2xkVXJsICkge1xuXHQvL1x0Y29uc29sZS5sb2coXCJvbGQgdXJsOiBcIiwgb2xkVXJsKTtcblx0Ly9cdGlmKC8oYWRkZmFtaWx5KS8udGVzdChvbGRVcmwpKSB7XG5cdC8vXHRcdHZhciBhbnN3ZXIgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlIHRoaXMgcGFnZT9cIik7XG5cdC8vXHRcdGlmICghYW5zd2VyKSB7XG5cdC8vXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly9cdFx0fVxuXHQvL1x0fVxuXHQvL30pO1xuXG59XSk7IiwiLy9jb250cm9sbGVycyBmb3IgbG9naW5cbmFwcC5jb250cm9sbGVyKCdsb2dpbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsICdhdXRoU2VydmljZScsICckbG9jYXRpb24nLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIGF1dGhTZXJ2aWNlLCAkbG9jYXRpb24sICRyb290U2NvcGUpe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkaHR0cC5wb3N0KCcvbG9naW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnNhdmVUb2tlbihyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvc2VhcmNoXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsIlxuLy9UaGlzIHNob3VsZCBnZXQgdGhlIHNlYXJjaCBpdGVtXG5hcHAuY29udHJvbGxlcignc2VhcmNoRnVuY3Rpb24nLCBbJyRzY29wZScsICckaHR0cCcsICdSZXN1bHRTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIFJlc3VsdFNlcnZpY2UpIHtcbiAgICAkc2NvcGUuZm9ybUlucHV0PXt9O1xuXG4gICAgJHNjb3BlLnNlYXJjaEJ0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgIFJlc3VsdFNlcnZpY2UubWFrZURhdGFDYWxsKCRzY29wZS5mb3JtSW5wdXQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIHRoZSBpbnB1dCB0ZXh0JywgJHNjb3BlLmZvcm1JbnB1dCk7XG4gICAgICAgIC8vZW1wdHlzIHRoZSBzZWFyY2ggYm94XG4gICAgICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG4gICAgfTtcblxufV0pO1xuIiwiLy9UaGlzIHNlcnZpY2Ugc2hvdWxkIHBhc3MgZGF0YSBiZXR3ZWVuIGNvbnRyb2xsZXJzXG5hcHAuZmFjdG9yeSgnUmVzdWx0U2VydmljZScsIFsnJGh0dHAnLGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICB2YXIgYWR1bHRzID0gW107XG4gICAgdmFyIGNvbXBhbmllcyA9IFtdO1xuICAgIHZhciBraWRzID0gW107XG5cbiAgICB2YXIgbWFrZURhdGFDYWxsID0gZnVuY3Rpb24ocGFzc2VkRGF0YSkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL3NlYXJjaCcsXG4gICAgICAgICAgICBwYXJhbXM6e3NlYXJjaDpwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBnZXRDb21wYW5pZXMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRLaWRzKHJlc3VsdHMpO1xuICAgICAgICAgICAgZ2V0QWR1bHRzKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBnZXRDb21wYW5pZXMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDEgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgY29tcGFuaWVzLnNwbGljZSgwLGNvbXBhbmllcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjb21wYW55JylcbiAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0RWxlbWVudDEoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50MScsY29tcGFuaWVzKTtcbiAgICAgICAgcmV0dXJuIGNvbXBhbmllc1xuICAgIH07XG5cbiAgICB2YXIgZ2V0QWR1bHRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQyID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGFkdWx0cy5zcGxpY2UoMCxhZHVsdHMubGVuZ3RoKTtcbiAgICAgICAgICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCl7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PSAnYWR1bHQnKVxuICAgICAgICAgICAgICAgICAgICBhZHVsdHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQyKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgaW4gZ2V0RWxlbWVudDInLCBhZHVsdHMpO1xuICAgICAgICByZXR1cm4gYWR1bHRzXG4gICAgfTtcblxuICAgIHZhciBnZXRLaWRzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgdmFyIGdldEVsZW1lbnQzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICAgICAgICAgIGtpZHMuc3BsaWNlKDAsa2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdjaGlsZCcpXG4gICAgICAgICAgICAgICAgICAgIGtpZHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGdldEVsZW1lbnQzKGFycmF5KTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgZ2V0RWxlbWVudHMzJywga2lkcyk7XG4gICAgICAgIHJldHVybiBraWRzXG4gICAgfTtcblxuICAgIC8vcHVibGljXG4gICAgdmFyIHB1YmxpY0FwaSA9IHtcbiAgICAgICAgZ2V0S2lkczogZ2V0S2lkcyxcbiAgICAgICAgZ2V0QWR1bHRzOiBnZXRBZHVsdHMsXG4gICAgICAgIGdldENvbXBhbmllczogZ2V0Q29tcGFuaWVzLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbCxcbiAgICAgICAgcmVzdWx0czogcmVzdWx0cyxcbiAgICAgICAgY29tcGFuaWVzOiBjb21wYW5pZXMsXG4gICAgICAgIGFkdWx0czogYWR1bHRzLFxuICAgICAgICBraWRzOiBraWRzXG4gICAgfTtcbiAgICByZXR1cm4gcHVibGljQXBpO1xufV0pOyIsIi8vIFBsZWFzZSBub3RlIHRoYXQgJG1vZGFsSW5zdGFuY2UgcmVwcmVzZW50cyBhIG1vZGFsIHdpbmRvdyAoaW5zdGFuY2UpIGRlcGVuZGVuY3kuXG4vLyBJdCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlICR1aWJNb2RhbCBzZXJ2aWNlIHVzZWQgYWJvdmUuXG5cbi8vbmVlZGVkIGZvciBtb2RhbD8/IHByZXR0eSBzdXJlXG5hcHAuY29udHJvbGxlcignTW9kYWxJbnN0YW5jZUN0cmwnLFsnJHNjb3BlJywnJG1vZGFsSW5zdGFuY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xuXG4gICAgJHNjb3BlLm9rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgkc2NvcGUuc2VsZWN0ZWQuaXRlbSk7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgIH07XG59XSk7IiwiYXBwLmNvbnRyb2xsZXIoJ25hdkN0cmwnLCBbJ2F1dGhTZXJ2aWNlJywnJHNjb3BlJywnJHJvb3RTY29wZScsJyRsb2NhdGlvbicsIGZ1bmN0aW9uKGF1dGhTZXJ2aWNlLCAkc2NvcGUsICRyb290U2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuXG4gICAgaWYoJHJvb3RTY29wZS51c2VyICYmICRyb290U2NvcGUudXNlci51c2VybmFtZSl7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvaG9tZScpO1xuICAgIH1cblxuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKTtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0gYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgfVxufV0pO1xuIiwiLy8gQWpheCBmb3IgY3JlYXRpbmcgdGhlIGNvbnRhY3QgbGlzdCBpbiBjb25zdGFudCBjb250YWN0XG5hcHAuY29udHJvbGxlcignbmV3Q29udGFjdExpc3RDb250cm9sbGVyJyxbJ25ld0NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuXG4gICAgJHNjb3BlLmxpc3RuYW1lID0ge307XG5cbiAgICAkc2NvcGUuY3JlYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgbGlzdCBuYW1lIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvc3RMaXN0KCRzY29wZS5saXN0bmFtZS5pbnB1dCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2xpc3QgIycsbmV3Q29udGFjdExpc3REYXRhLmxpc3ROdW0pO1xuXG4gICAgICAgICRzY29wZS5saXN0bmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG5cbiIsIlxuYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4gICAgICAgIHZhciBsaXN0TnVtID0gXCJcIjtcbiAgICAgICAgdmFyIGltcG9ydERhdGFBcnJheSA9W107XG5cbiAgICAgICAgdGhpcy5wb3N0TGlzdCA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImRpZCB0aGUgbmFtZSBtYWtlIGl0IHRvIHRoZSBzZXJ2aWNlPyBcIiArIG5hbWUgKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvbmV3Q29udGFjdExpc3QnLCB7bmFtZTogbmFtZX0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgbGlzdE51bSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJZD8gXCIsIGxpc3ROdW0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcExpc3QgPSBmdW5jdGlvbiAobGlzdCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIFwiaW1wb3J0RGF0YUFycmF5XCI6IGltcG9ydERhdGFBcnJheSxcbiAgICAgICAgICAgICAgICBcImxpc3ROdW1cIjogbGlzdE51bVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnb3QgdG8gcG9wTGlzdCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICBnZXRDaGVja2VkKGxpc3QpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QnLCB0aGlzLmRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbXBvcnREYXRhQXJyYXk6ICcsdGhpcy5pbXBvcnREYXRhQXJyYXksICdcXG50eXBlOiAnLCB0eXBlb2YgdGhpcy5pbXBvcnREYXRhQXJyYXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vZ2V0IGFsbCB0aGUgY2hlY2tlZCBlbGVtZW50cyBhbmQgc3R1ZmYgdGhlbSBpbiBhbiBhcnJheVxuICAgICAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0Q2hlY2tlZCBpcyBydW5uaW5nJyk7XG4gICAgICAgICAgICBsLmZvckVhY2goXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWN0T2JqZWN0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6b2JqZWN0LmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBvYmplY3QubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogb2JqZWN0LmNvbXBhbnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRyZXNzZXNcIjogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogb2JqZWN0LmNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydERhdGFBcnJheS5wdXNoKHRoaXMuY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG5cbiIsImFwcC5jb250cm9sbGVyKCdwb3BMaXN0Q29udHJvbGxlcicsWyduZXdDb250YWN0TGlzdERhdGEnLCckc2NvcGUnLCckaHR0cCcsIGZ1bmN0aW9uKG5ld0NvbnRhY3RMaXN0RGF0YSwgJHNjb3BlLCAkaHR0cCkge1xuICAgIC8vZGF0YSB0byBjcmVhdGUgYSBuZXcgY29udGFjdCBsaXN0XG5cblxuICAgICRzY29wZS5saXN0TmFtZSA9IHt9O1xuXG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3JlYXRlIGxpc3Q6IFwiICsgc2NvcGUubGlzdE5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCk7XG4gICAgICAgIC8vdmFyIGxpc3RFbmQgPSB7XG4gICAgICAgIC8vICAgIFwibGlzdHNcIjogW2xpc3ROdW1dLFxuICAgICAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOiBbXG4gICAgICAgIC8vICAgIFwiRU1BSUxcIixcbiAgICAgICAgLy8gICAgXCJGSVJTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiTEFTVCBOQU1FXCIsXG4gICAgICAgIC8vICAgIFwiQ0lUWVwiLFxuICAgICAgICAvLyAgICBcIkNPTVBBTlkgTkFNRVwiXG4gICAgICAgIC8vXX1cblxuXG4gICAgICAgICRzY29wZS5saXN0TmFtZT17fTtcbiAgICB9O1xufV0pO1xuXG4iLCJcbi8vcmVnaXN0ZXIgY29udHJvbGxlclxuYXBwLmNvbnRyb2xsZXIoJ3JlZ2lzdGVyQ3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVnaXN0ZXJDdHJsXCIpO1xuICAgICAgICBjb25zb2xlLmxvZygncmVnaXN0ZXJDb250cm9sbGVyIHN1Ym1pdDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnBvc3QoJy9yZWdpc3RlcicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuY29udHJvbGxlcigncmVzZXRDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2VkaXQgcGFzc3dvcmQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wdXQoJy9hZG1pbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2luZGV4XCIpXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XSk7XG4iLCJhcHAuc2VydmljZSgndmFsaWRTZXJ2aWNlJywgW2Z1bmN0aW9uICgpIHtcblxuICAgIHZhciB2YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ2YWxpZGF0ZUlucHV0KClcIik7XG4gICAgICAgIC8vIHN0b3JlcyB0aGUgZm9ybSBiZWluZyBjYWxsZWQgb25cbiAgICAgICAgdmFyIHBhdHRlcm47XG4gICAgICAgIHZhciAkb2JqID0gKGlkKSA/ICQoJyMnKyBpZCkgOiBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3QgaXMgXCIsICRvYmosIHR5cGUsIGlkKTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwibmFtZVwiOlxuICAgICAgICAgICAgY2FzZSBcImNpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgIC8vIGFsbG93cyBhbmQgYWxwaGEgY2hhcnMsIGFzIHdlbGwgYXMgd2hpdGUgc3BhY2UgYW5kIGEgZmV3IGV4dHJhIGNoYXJzXG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtelxccywuJy1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvcnBOYW1lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87Ky1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFkZHJlc3NcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrOigpJSYtXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJ6aXBcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bMC05XXs1fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInBob25lXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKFsoXVswLTldezN9WyldfFswLTldezN9KVtcXHNcXC0uXT9bMC05XXszfVtcXHNcXC0uXT9bMC05XXs0fSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVtYWlsXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3Rlc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJjw+XFxbXFxde31cXC09XCJ8YFxcXFxcXC9dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImV4dFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHM6LV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXjIwWzAtOV17Mn1bLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYmlydGhkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eKDE5OVswLTldfDIwWzAtOV17Mn0pWy1dKDBbMS05XXwxWzAtMl0pWy1dKDBbMS05XXxbMS0yXVswLTldfDNbMDFdKSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImFtb3VudFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXltcXCRdP1tcXGRdKyhbLl1bXFxkXXsyfSk/JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW52YWxpZCBjbGFzcyBzZWFyY2hcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgcmVxdWlyZWQgb3IgdHJpbW1lZCBsZW5ndGggaXMgbm90IDAsIHRoZW4gdmFsaWRhdGUgaW5mb1xuICAgICAgICBpZigkb2JqLmF0dHIoJ3JlcXVpcmVkJykgfHwgJG9iai52YWwoKS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gY2hlY2tzIGlmIHZhbHVlIG1hdGNoZXMgcmVnZXggZm9yIGZpZWxkIHR5cGVcbiAgICAgICAgICAgIGlmKCFwYXR0ZXJuLnRlc3QoJG9iai52YWwoKS50cmltKCkpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZmFpbHMsIGFkZHMgaW52YWxpZCBjbGFzcyAoaGlnaGxpZ2h0aW5nKSwgY2hhbmdlcyBwbGFjZWhvbGRlciB0byB3aGF0IHNob3VsZCBiZSBlbnRlcmVkXG4gICAgICAgICAgICAgICAgJG9iai5hZGRDbGFzcygnaW52YWxpZCcpLmF0dHIoJ3BsYWNlaG9sZGVyJywgJG9iai5kYXRhKCdpbnZhbGlkJykpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBmYWlsZWQgdGVzdCcsIHBhdHRlcm4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXNzZXMsIHJlbW92ZXMgaW52YWxpZCBjbGFzcywgcmVzZXRzIHBsYWNlaG9sZGVyIHRvIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAkb2JqLnJlbW92ZUNsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGUsICcgcGFzc2VkIHRlc3QnLCBwYXR0ZXJuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZGF0ZUlucHV0OiB2YWxpZGF0ZUlucHV0XG4gICAgfTtcbn1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
