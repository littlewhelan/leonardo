function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap","checklist-model","toastr"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,e,a){return{request:function(t){return t.headers=t.headers||{},a.isAuthed()&&(t.headers.Authorization="Bearer "+a.getToken()),t},response:function(a){return 401===a.status&&e.path("/"),a||t.when(a)},responseError:function(a){return 401===a.status?e.path("/"):console.log(a.status),t.reject(a)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(e){if(e){var a=e.split(".")[1],n=a.replace("-","+").replace("_","/");return JSON.parse(t.atob(n))}return{}},this.saveToken=function(e){t.localStorage.jwtToken=e},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var e=this.parseJwt(t),a=Math.round((new Date).getTime()/1e3)<=e.exp;return a||this.logout(),a}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,n,o,i){t.validateInput=i.validateInput,t.companies=n.companies,t.corp={contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.clearCorp=function(){t.corp={},t.newDonation={}},t.open=function(n,i){return console.log("corp call",i),o({method:"GET",url:"../corporation",params:{id:i}}).then(function(o){t.company=o.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.company}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("insert corp",t.corp),o({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Put corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})):o({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(e){console.log("Posted corp, got id ",e.data),t.corp.id=e.data.id,t.corp.info=e.data.info?e.data.info:{},t.contact=e.data.contact?e.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=e.data.donations?e.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService","newContactListData","toastr",function(t,e,a,n,o){t.type={},t.age={},t.zip={},t.emails={},t.emails.includedEmails=[],t.includedEmails=[],t.totalDisplayed=50,t.totalResults=0,t.emailList=[],t.searchListBtn=function(){if(t.emailList=[],"zipCk"==t.type&&a.makeDataCall("zip",t.zip.data).then(function(e){t.emailList=e,t.totalResults=e.length,console.log(t.emailList),o.success("Loaded "+t.totalResults+" results")})["catch"](function(){o.error("Failed to load results")}),"ageCk"==t.type){var e=a.makeDataCall("age",t.age.data);e.then(function(e){console.log(e),t.emailList=e,t.totalResults=e.length})}if("fam"==t.type){var n=a.makeDataCall("family","");n.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}if("corp"==t.type){var i=a.makeDataCall("company","");i.then(function(e){t.emailList=e,t.totalResults=e.length,console.log(e)})}t.type={},t.age={},t.zip={}},t.populateList=function(){console.log(t.emails.includedEmails),n.popList(t.emails.includedEmails)},t.loadMore=function(){t.totalDisplayed+=50},t.showAll=function(){t.totalDisplayed=t.totalResults},t.checkAll=function(e){var a=angular.element(e.target);t.emails.includedEmails.length==t.totalResults?(t.emails.includedEmails=[],a.val("Check All")):(t.emails.includedEmails=angular.copy(t.emailList),a.val("Uncheck All"))}}]),app.factory("ContactListDataService",["$http","$q",function(t,e){function a(a,n){var o=e.defer();return console.log("this is in the make data call",a,n),t({method:"GET",url:"../createMailList",params:{type:a,search:n}}).then(function(t){data=t.data,o.resolve(t.data)}),o.promise}return{data:[],makeDataCall:a}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http","validService",function(t,e,a,n,o,i){t.validateInput=i.validateInput,t.adults=n.adults,t.kids=n.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.clearFamily=function(){t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={}},t.animationsEnabled=!0,t.open=function(n,i){return console.log("family call",i),o({method:"GET",url:"../family",params:{id:i}}).then(function(o){t.family=o.data;var i=e.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:n,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(e){t.selected=e},function(){a.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),o({method:"PUT",url:"/family",data:{family:t.family}}).then(function(e){console.log("Put family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})):o({method:"POST",url:"/family",data:{family:t.family}}).then(function(e){console.log("Posted family, got id ",e.data),t.family.id=e.data.id,t.family.adultOne=e.data.adultOne?e.data.adultOne:{},t.family.adultTwo=e.data.adultTwo?e.data.adultTwo:{},t.family.emergency=e.data.emergency?e.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=e.data.children?e.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=e.data.donations?e.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(e){t.editingChild=e,t.newChild=t.family.children[e]},t.removeChild=function(e){console.log("in remove child index",e," edit ",t.editingChild),t.family.children.splice(e,1),e==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,e,a,n,o){t.submit=function(){e.post("/login",t.form).then(function(t){a.saveToken(t.data),o.user=a.getUser(),n.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,e,a){t.formInput={},t.searchBtn=function(){a.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var e=[],a=[],n=[],o=[],i=function(a){return t({method:"GET",url:"../search",params:{search:a}}).then(function(t){e=t.data,l(e),s(e),c(e)})},l=function(t){var e=function(t){n.splice(0,n.length),t.forEach(function(t){"company"==t.type&&n.push(t)})};return e(t),console.log("this is getElement1",n),n},c=function(t){var e=function(t){a.splice(0,a.length),t.forEach(function(t){"adult"==t.type&&a.push(t)})};return e(t),console.log("this is in getElement2",a),a},s=function(t){var e=function(t){o.splice(0,o.length),t.forEach(function(t){"child"==t.type&&o.push(t)})};return e(t),console.log("this is getElements3",o),o},r={getKids:s,getAdults:c,getCompanies:l,makeDataCall:i,results:e,companies:n,adults:a,kids:o};return r}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,e,a,n){a.user=t.getUser(),a.user&&a.user.username&&n.path("/home"),e.logout=function(){t.logout(),a.user=t.getUser(),n.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,e){e.listname={},e.createList=function(){console.log("create list: "+e.listname.input),t.postList(e.listname.input),console.log("list #",t.listNum),e.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,e){var a="",n=[];this.postList=function(t){return console.log("did the name make it to the service? "+t),e.post("/newContactList",{name:t}).then(function(t){console.log(t.data),a=t.data,console.log("Id? ",a)},function(t){console.log(t)})},this.popList=function(t){this.dataObject={importDataArray:n,listNum:a},console.log("got to popList"),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray),o(t),e.post("/populateContactList",this.dataObject).then(function(t,e,a,n){console.log("posted"),console.log(t),console.log("importDataArray: ",this.importDataArray,"\ntype: ",typeof this.importDataArray)})};var o=function(t){console.log("getChecked is running"),t.forEach(function(t){this.contactObject={email_addresses:[t.email],first_name:t.firstName,last_name:t.lastName,company_name:t.company,addresses:[{city:t.city}]},console.log(this.contactObject),n.push(this.contactObject)})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,e,a){e.listName={},e.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),e.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),e.post("/register",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,e,a){t.submit=function(){console.log("edit password:",t.form),e.put("/admin",t.form).then(function(t){console.log(t),a.path("/index")})}}]),app.service("validService",[function(){var t=function(t,e){var a,n=e?$("#"+e):!1;switch(console.log("object is ",n,t,e),t){case"name":case"city":case"state":a=/^[a-zA-z\s,.'-]+$/;break;case"corpName":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+-]+$/;break;case"address":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&-]+$/;break;case"zip":a=/^[0-9]{5}$/;break;case"phone":a=/^([(][0-9]{3}[)]|[0-9]{3})[\s\-.]?[0-9]{3}[\s\-.]?[0-9]{4}$/;break;case"email":a=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;break;case"notes":a=/^[a-zA-Z0-9\s,.?@!#'~*_;+:()%&<>\[\]{}\-="|`\\\/]+$/;break;case"ext":a=/^[a-zA-Z0-9\s:-]+$/;break;case"date":a=/^20[0-9]{2}[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"birthdate":a=/^(199[0-9]|20[0-9]{2})[-](0[1-9]|1[0-2])[-](0[1-9]|[1-2][0-9]|3[01])$/;break;case"amount":a=/^[\$]?[\d]+([.][\d]{2})?$/;break;default:return console.log("invalid class search"),!1}(n.attr("required")||n.val().trim().length>0)&&(a.test(n.val().trim())?(n.removeClass("invalid").attr("placeholder",n.data("placeholder")),console.log(t," passed test",a)):(n.addClass("invalid").attr("placeholder",n.data("invalid")).val(""),console.log(t," failed test",a)))};return{validateInput:t}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIiwidmFsaWRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwidmFsaWRTZXJ2aWNlIiwidmFsaWRhdGVJbnB1dCIsImNvbXBhbmllcyIsImNvcnAiLCJjb250YWN0IiwiZG9uYXRpb25zIiwibmV3RG9uYXRpb24iLCJhbmltYXRpb25zRW5hYmxlZCIsImNsZWFyQ29ycCIsIm9wZW4iLCJzaXplIiwiaWQiLCJtZXRob2QiLCJ1cmwiLCJ0aGVuIiwiY29tcGFueSIsImRhdGEiLCJtb2RhbEluc3RhbmNlIiwiYW5pbWF0aW9uIiwic2NvcGUiLCJyZXNvbHZlIiwiaXRlbXMiLCJyZXN1bHQiLCJzZWxlY3RlZEl0ZW0iLCJzZWxlY3RlZCIsImluZm8iLCJ0b2dnbGVBbmltYXRpb24iLCJzYXZlIiwicmVzIiwibGVuZ3RoIiwiYWRkRG9uYXRpb24iLCJwdXNoIiwiQ29udGFjdExpc3REYXRhU2VydmljZSIsIm5ld0NvbnRhY3RMaXN0RGF0YSIsInRvYXN0ciIsInR5cGUiLCJhZ2UiLCJ6aXAiLCJlbWFpbHMiLCJpbmNsdWRlZEVtYWlscyIsInRvdGFsRGlzcGxheWVkIiwidG90YWxSZXN1bHRzIiwiZW1haWxMaXN0Iiwic2VhcmNoTGlzdEJ0biIsIm1ha2VEYXRhQ2FsbCIsInN1Y2Nlc3MiLCJlcnJvciIsImZhbSIsImNvbXAiLCJwb3B1bGF0ZUxpc3QiLCJwb3BMaXN0IiwibG9hZE1vcmUiLCJzaG93QWxsIiwiY2hlY2tBbGwiLCJldmVudCIsIiRidXR0b24iLCJlbGVtZW50IiwidGFyZ2V0IiwidmFsIiwiY29weSIsInBhc3NlZERhdGEiLCJkZWZlcnJlZCIsImRlZmVyIiwic2VhcmNoIiwicHJvbWlzZSIsImFkdWx0cyIsImtpZHMiLCJmYW1pbHkiLCJhZHVsdE9uZSIsImFkdWx0VHdvIiwiZW1lcmdlbmN5IiwiY2hpbGRyZW4iLCJuZXdDaGlsZCIsImNsZWFyRmFtaWx5IiwiYWRkQ2hpbGQiLCJlZGl0aW5nQ2hpbGQiLCJlZGl0Q2hpbGQiLCJpbmRleCIsInJlbW92ZUNoaWxkIiwic3BsaWNlIiwiY2xlYXJDaGlsZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYmlydGhkYXRlIiwic2Nob29sIiwibm90ZXMiLCIkcm9vdFNjb3BlIiwic3VibWl0IiwicG9zdCIsImZvcm0iLCJ1c2VyIiwiZm9ybUlucHV0Iiwic2VhcmNoQnRuIiwicmVzdWx0cyIsImdldENvbXBhbmllcyIsImdldEtpZHMiLCJnZXRBZHVsdHMiLCJhcnJheSIsImdldEVsZW1lbnQxIiwiZm9yRWFjaCIsImdldEVsZW1lbnQyIiwiZ2V0RWxlbWVudDMiLCJwdWJsaWNBcGkiLCIkbW9kYWxJbnN0YW5jZSIsIm9rIiwiY2xvc2UiLCJpdGVtIiwiY2FuY2VsIiwiZGlzbWlzcyIsInVzZXJuYW1lIiwibGlzdG5hbWUiLCJjcmVhdGVMaXN0IiwiaW5wdXQiLCJwb3N0TGlzdCIsImxpc3ROdW0iLCJpbXBvcnREYXRhQXJyYXkiLCJuYW1lIiwibGlzdCIsImRhdGFPYmplY3QiLCJnZXRDaGVja2VkIiwibCIsIm9iamVjdCIsImNvbnRhY3RPYmplY3QiLCJlbWFpbF9hZGRyZXNzZXMiLCJlbWFpbCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJjb21wYW55X25hbWUiLCJhZGRyZXNzZXMiLCJjaXR5IiwibGlzdE5hbWUiLCJwdXQiLCJwYXR0ZXJuIiwiJG9iaiIsIiQiLCJhdHRyIiwidHJpbSIsInRlc3QiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiQUFLQSxRQUFBQSxhQUFBQyxHQUNBLE9BQ0FDLEtBQUFDLE9BQUFGLEdBQUFHLE9BQUFDLFVBQ0FDLE9BQUFILE9BQUFGLEdBQUFHLE9BQUFHLGFBUkEsR0FBQUMsS0FBQUMsUUFBQUMsT0FBQSxPQUFBLFVBQUEsWUFBQSxlQUFBLGtCQUFB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QUVBdUcsRUFBQUssS0FBQUosRUFBQTNFLE1BQUE4RSxTQU1BSCxFQUFBSyxZQUFBLFdBQUFILEtBQUEsY0FBQUYsRUFBQXJILEtBQUEsZ0JBQ0FoRCxRQUFBQyxJQUFBa0UsRUFBQSxlQUFBaUcsS0FMQUMsRUFBQU0sU0FBQSxXQUFBSixLQUFBLGNBQUFGLEVBQUFySCxLQUFBLFlBQUEwQyxJQUFBLElBQ0ExRixRQUFBQyxJQUFBa0UsRUFBQSxlQUFBaUcsS0FTQSxRQUNBbkksY0FBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbGVvJywgWyduZ1JvdXRlJywgJ25nQW5pbWF0ZScsICd1aS5ib290c3RyYXAnLCAnY2hlY2tsaXN0LW1vZGVsJywgJ3RvYXN0ciddKTtcblxudmFyIHByZXR0eURhdGUgPSBcIk1NL0REL1lZZ1lZXCI7XG52YXIgZnVsbERhdGUgPSBcIk1NL0REL1lZWVkgaDptbTpzcyBhXCI7XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVzIChkYXRlKSB7XG5cdHJldHVybiB7XG5cdFx0ZnVsbDogbW9tZW50KGRhdGUpLmZvcm1hdChmdWxsRGF0ZSksXG5cdFx0cHJldHR5OiBtb21lbnQoZGF0ZSkuZm9ybWF0KHByZXR0eURhdGUpXG5cdH07XG59XG5cbmFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsXG4gICAgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIuXG4gICAgICAgICAgICB3aGVuKCcvJywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3RhdGljL2xvZ2luLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9zZWFyY2gnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL3NlYXJjaC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvcmVnaXN0ZXInLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RMaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0TGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkZmFtaWx5Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9hZGRmYW1pbHkuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0RmFtaWx5Q3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2FkZGNvcnAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdlZGl0Q29ycEN0cmwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9jb250YWN0bGlzdCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvY29udGFjdGxpc3QuaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgb3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiAnL3NlYXJjaCdcbiAgICAgICAgICAgIH0pO1xuICAgIH1dKTtcblxuXG5cblxuIiwiYXBwLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgJ2F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArIGF1dGhTZXJ2aWNlLmdldFRva2VuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgICB9LCByZXNwb25zZUVycm9yOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG59XSkiLCJhcHAuc2VydmljZSgnYXV0aFNlcnZpY2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHdpbmRvdykge1xuXG4gICAgdGhpcy5wYXJzZUp3dCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJhc2U2NFVybC5yZXBsYWNlKCctJywgJysnKS5yZXBsYWNlKCdfJywgJy8nKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKCR3aW5kb3cuYXRvYihiYXNlNjQpKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiB7fTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuand0VG9rZW4gPSB0b2tlbjtcbiAgICAgICAgLy9jb25zb2xlLmxvZygnU2F2ZWQgdG9rZW46Jywkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbik7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0F1dGhlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRva2VuID0gdGhpcy5nZXRUb2tlbigpO1xuICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLnBhcnNlSnd0KHRva2VuKTtcbiAgICAgICAgICAgIHZhciBub3RFeHBpcmVkID0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApIDw9IHBhcmFtcy5leHA7XG4gICAgICAgICAgICBpZiAoIW5vdEV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vdEV4cGlyZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbjtcbiAgICB9O1xuXG4gICAgLy8gZXhwb3NlIHVzZXIgYXMgYW4gb2JqZWN0XG4gICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUp3dCh0aGlzLmdldFRva2VuKCkpXG4gICAgfTtcbn1dKTsiLCIvL2VkaXQgY29ycG9yYXRpb24gbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0Q29ycEN0cmwnLCBbJyRzY29wZScsICckdWliTW9kYWwnLCAnJGxvZycsICdSZXN1bHRTZXJ2aWNlJywgJyRodHRwJywgJ3ZhbGlkU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbCwgJGxvZywgUmVzdWx0U2VydmljZSwgJGh0dHAsIHZhbGlkU2VydmljZSkge1xuXG5cdC8vIHNldHMgdmFsaWRhdGlvbiBmcm9tIHNlcnZpY2UgZm9yIGRvbSBjYWxsc1xuXHQkc2NvcGUudmFsaWRhdGVJbnB1dCA9IHZhbGlkU2VydmljZS52YWxpZGF0ZUlucHV0O1xuXHQvL3NlbmRzIHRoZSBjb21wYW5pZXMgYWZ0ZXIgdGhlIHJlc3VsdHMgaGF2ZSBiZWVuIG9yZ2FuaXplZFxuXHQkc2NvcGUuY29tcGFuaWVzID0gUmVzdWx0U2VydmljZS5jb21wYW5pZXM7XG5cdCRzY29wZS5jb3JwID0ge1xuXHRcdGNvbnRhY3Q6IHt9LFxuXHRcdGRvbmF0aW9uczogW11cblx0fTtcblx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9IHRydWU7XG5cblx0JHNjb3BlLmNsZWFyQ29ycCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuY29ycCA9IHt9O1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xuXG5cdCRzY29wZS5vcGVuID0gZnVuY3Rpb24gKHNpemUsIGlkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2NvcnAgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2NvcnBvcmF0aW9uJyxcblx0XHRcdHBhcmFtczoge2lkOiBpZH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG5cdFx0XHQkc2NvcGUuY29tcGFueSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0Y29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmNvbXBhbnk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGNvcnBcblx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJTYXZlIHN1Ym1pdHRlZFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0Ly9hbGVydChcIlN1Ym1pdHRlZFwiKTtcblx0XHQvLyBpZiBoYXMgaWQsIHRoZW4gcHV0XG5cdFx0aWYoISRzY29wZS5jb3JwLmlkKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvY29ycG9yYXRpb24nLFxuXHRcdFx0XHRkYXRhOiB7Y29ycDogJHNjb3BlLmNvcnB9XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJQb3N0ZWQgY29ycCwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5jb3JwLmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5jb3JwLmluZm8gPSAocmVzLmRhdGEuaW5mbykgPyByZXMuZGF0YS5pbmZvIDoge307XG5cdFx0XHRcdCRzY29wZS5jb250YWN0ID0gKHJlcy5kYXRhLmNvbnRhY3QpID8gcmVzLmRhdGEuY29udGFjdCA6IHt9O1xuXHRcdFx0XHQvLyBpbml0aWFsaXplIGRvbmF0aW9ucyBpZiB0aGVyZSBhcmUgYW55XG5cdFx0XHRcdGlmKCRzY29wZS5jb3JwLmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiB7fTtcblx0XHRcdH0pO1xuXHRcdH1lbHNlIHtcblx0XHRcdC8vIGluc2VydCBjb3JwIC0gaGFzIG5vIGlkXG5cdFx0XHRjb25zb2xlLmxvZyhcImluc2VydCBjb3JwXCIsICRzY29wZS5jb3JwKTtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUFVUJyxcblx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXG5cdFx0XHRcdCRzY29wZS5jb3JwLmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5jb3JwLmluZm8gPSAocmVzLmRhdGEuaW5mbykgPyByZXMuZGF0YS5pbmZvIDoge307XG5cdFx0XHRcdCRzY29wZS5jb250YWN0ID0gKHJlcy5kYXRhLmNvbnRhY3QpID8gcmVzLmRhdGEuY29udGFjdCA6IHt9O1xuXHRcdFx0XHQvLyBpbml0aWFsaXplIGRvbmF0aW9ucyBpZiB0aGVyZSBhcmUgYW55XG5cdFx0XHRcdGlmKCRzY29wZS5jb3JwLmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiB7fTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBhZGRzIGRvbmF0aW9uIHRvIGZhbWlseSBvYmplY3Rcblx0JHNjb3BlLmFkZERvbmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiYWRkZWQgZG9uYXRpb25cIiwgJHNjb3BlLm5ld0RvbmF0aW9uLCAkc2NvcGUuY29ycC5kb25hdGlvbnMpO1xuXHRcdCRzY29wZS5jb3JwLmRvbmF0aW9ucy5wdXNoKCRzY29wZS5uZXdEb25hdGlvbik7XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdH07XG5cbn1dKTsiLCJhcHAuY29udHJvbGxlcignY3JlYXRlTGlzdFNlYXJjaCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ0NvbnRhY3RMaXN0RGF0YVNlcnZpY2UnLCAnbmV3Q29udGFjdExpc3REYXRhJywgJ3RvYXN0cicsIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCBDb250YWN0TGlzdERhdGFTZXJ2aWNlLG5ld0NvbnRhY3RMaXN0RGF0YSwgdG9hc3RyKSB7XG4gICAgJHNjb3BlLnR5cGUgPXt9O1xuICAgICRzY29wZS5hZ2U9e307XG4gICAgJHNjb3BlLnppcD17fTtcblx0Ly8gaW5jbHVkZSBsaXN0IG5lZWRzIHRvIGJlIHdpdGhpbiBhbiBvYmplY3QgZHVlIHRvIHRoZSBjaGVja2JveGVzIGJlaW5nIGluIGEgdGFibGVcblx0JHNjb3BlLmVtYWlscyA9IHt9O1xuICAgICRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0JHNjb3BlLmluY2x1ZGVkRW1haWxzID0gW107XG5cdCRzY29wZS50b3RhbERpc3BsYXllZCA9IDUwO1xuXHQkc2NvcGUudG90YWxSZXN1bHRzID0gMDtcblxuICAgICRzY29wZS5lbWFpbExpc3QgPSBbIF07XG5cbiAgICAkc2NvcGUuc2VhcmNoTGlzdEJ0biA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZW1haWxMaXN0ID0gW107XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgIC0tIHdpbGwgc2VhcmNoIGJ5IHppcFxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ3ppcENrJykge1xuXG4gICAgICAgICAgICBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnemlwJywgJHNjb3BlLnppcC5kYXRhKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlsTGlzdCk7XG5cdFx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCAnKyAkc2NvcGUudG90YWxSZXN1bHRzICsnIHJlc3VsdHMnKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dG9hc3RyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCByZXN1bHRzJyk7XG5cdFx0XHRcdH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvL1RISVMgV09SS1MgLSB3aWxsIHNlYXJjaCBieSBhZ2VcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdhZ2VDaycpIHtcbiAgICAgICAgICAgIHZhciBhZ2UgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnYWdlJywgJHNjb3BlLmFnZS5kYXRhKTtcbiAgICAgICAgICAgIGFnZS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsTGlzdCA9IGRhdGE7XG5cdFx0XHRcdCRzY29wZS50b3RhbFJlc3VsdHMgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9USElTIFdPUktTIC0tZ2V0IGFsbCBmYW1pbGllcyBpZiBmYW0gaXMgdHJ1ZVxuICAgICAgICBpZiAoJHNjb3BlLnR5cGUgPT0gJ2ZhbScpIHtcbiAgICAgICAgICAgIHZhciBmYW0gPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnZmFtaWx5JywgJycpO1xuICAgICAgICAgICAgZmFtLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcblx0XHRcdFx0JHNjb3BlLnRvdGFsUmVzdWx0cyA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2dldCBhbGwgY29ycCBpZiBjb3JwIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdjb3JwJykge1xuICAgICAgICAgICAgdmFyIGNvbXAgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnY29tcGFueScsICcnKTtcbiAgICAgICAgICAgIGNvbXAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuXHRcdFx0XHQkc2NvcGUudG90YWxSZXN1bHRzID0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vZW1wdHkgdGhlIHNlYXJjaCBib3hcbiAgICAgICAkc2NvcGUudHlwZT17fTtcbiAgICAgICAgJHNjb3BlLmFnZT17fTtcbiAgICAgICAgJHNjb3BlLnppcD17fTtcblxuICAgIH07XG4gICAgJHNjb3BlLnBvcHVsYXRlTGlzdCAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vYWxlcnQoJ3dvcmtpbmcnKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyk7XG4gICAgICAgIG5ld0NvbnRhY3RMaXN0RGF0YS5wb3BMaXN0KCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMpO1xuICAgICAgICAgICAgLy8udGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICQoXCIuc2VhcmNoXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIC8vICAgICQoXCIuZW5kTWVzc2FnZVwiKS5hcHBlbmQoXCI8aDI+c2VudDwvaDI+XCIpO1xuICAgICAgICAgICAgLy99KTtcbiAgfTtcblxuXHQkc2NvcGUubG9hZE1vcmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLnRvdGFsRGlzcGxheWVkICs9IDUwO1xuXHR9O1xuXG5cdCRzY29wZS5zaG93QWxsID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS50b3RhbERpc3BsYXllZCA9ICRzY29wZS50b3RhbFJlc3VsdHM7XG5cdH07XG5cblx0JHNjb3BlLmNoZWNrQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0XHR2YXIgJGJ1dHRvbiA9IGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpO1xuXHRcdGlmKCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMubGVuZ3RoID09ICRzY29wZS50b3RhbFJlc3VsdHMpIHtcblx0XHRcdCRzY29wZS5lbWFpbHMuaW5jbHVkZWRFbWFpbHMgPSBbXTtcblx0XHRcdCRidXR0b24udmFsKFwiQ2hlY2sgQWxsXCIpO1xuXHRcdH1lbHNle1xuXHRcdFx0JHNjb3BlLmVtYWlscy5pbmNsdWRlZEVtYWlscyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuZW1haWxMaXN0KTtcblx0XHRcdCRidXR0b24udmFsKFwiVW5jaGVjayBBbGxcIik7XG5cdFx0fVxuXHR9O1xufV0pO1xuXG5cbiIsImFwcC5mYWN0b3J5KCdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgWyckaHR0cCcsICckcScsIGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcblxuICAgIGZ1bmN0aW9uIG1ha2VEYXRhQ2FsbCh0eXBlLCBwYXNzZWREYXRhKSB7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGluIHRoZSBtYWtlIGRhdGEgY2FsbCcsIHR5cGUsIHBhc3NlZERhdGEpO1xuICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vY3JlYXRlTWFpbExpc3QnLFxuICAgICAgICAgICAgcGFyYW1zOiB7dHlwZTogdHlwZSwgc2VhcmNoOiBwYXNzZWREYXRhfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogW10sXG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsXG4gICAgfTtcblxuXG59XSk7IiwiLy9lZGl0IGZhbWlseSBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRGYW1pbHlDdHJsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJyRsb2cnLCAnUmVzdWx0U2VydmljZScsICckaHR0cCcsICd2YWxpZFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwLCB2YWxpZFNlcnZpY2UpIHtcblx0Ly8gc2V0cyB2YWxpZGF0aW9uIGZyb20gc2VydmljZSBmb3IgZG9tIGNhbGxzXG5cdCRzY29wZS52YWxpZGF0ZUlucHV0ID0gdmFsaWRTZXJ2aWNlLnZhbGlkYXRlSW5wdXQ7XG5cdC8vc2VuZHMgdGhlIGFkdWx0cyBhbmQga2lkcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5hZHVsdHMgPSBSZXN1bHRTZXJ2aWNlLmFkdWx0cztcblx0JHNjb3BlLmtpZHMgPSBSZXN1bHRTZXJ2aWNlLmtpZHM7XG5cdCRzY29wZS5mYW1pbHkgPSB7XG5cdFx0YWR1bHRPbmU6IHt9LFxuXHRcdGFkdWx0VHdvOiB7fSxcblx0XHRlbWVyZ2VuY3k6IHt9LFxuXHRcdGNoaWxkcmVuOiBbXSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblxuXHQkc2NvcGUuY2xlYXJGYW1pbHkgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmZhbWlseSA9IHtcblx0XHRcdGFkdWx0T25lOiB7fSxcblx0XHRcdGFkdWx0VHdvOiB7fSxcblx0XHRcdGVtZXJnZW5jeToge30sXG5cdFx0XHRjaGlsZHJlbjogW10sXG5cdFx0XHRkb25hdGlvbnM6IFtdXG5cdFx0fTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0XHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0fTtcblxuXG5cblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblx0JHNjb3BlLm9wZW4gPSBmdW5jdGlvbiAoc2l6ZSwgaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZmFtaWx5IGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9mYW1pbHknLFxuXHRcdFx0cGFyYW1zOiB7aWQ6IGlkfVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cblx0XHRcdCRzY29wZS5mYW1pbHkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdFx0c2l6ZTogc2l6ZSxcblx0XHRcdFx0c2NvcGU6ICRzY29wZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGl0ZW1zOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZhbWlseTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbiAoc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZCA9IHNlbGVjdGVkSXRlbTtcblx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGxvZy5pbmZvKCdNb2RhbCBkaXNtaXNzZWQgYXQ6ICcgKyBuZXcgRGF0ZSgpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gISRzY29wZS5hbmltYXRpb25zRW5hYmxlZDtcblx0fTtcblxuXHQvLyBzYXZlIGZhbWlseVxuXHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcIlNhdmUgc3VibWl0dGVkXCIsICRzY29wZS5mYW1pbHkpO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuZmFtaWx5LmlkKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvZmFtaWx5Jyxcblx0XHRcdFx0ZGF0YToge2ZhbWlseTogJHNjb3BlLmZhbWlseX1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlBvc3RlZCBmYW1pbHksIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmlkID0gcmVzLmRhdGEuaWQ7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuYWR1bHRPbmUgPSAocmVzLmRhdGEuYWR1bHRPbmUpID8gcmVzLmRhdGEuYWR1bHRPbmUgOiB7fTtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdFR3byA9IChyZXMuZGF0YS5hZHVsdFR3bykgPyByZXMuZGF0YS5hZHVsdFR3byA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmVtZXJnZW5jeSA9IChyZXMuZGF0YS5lbWVyZ2VuY3kpID8gcmVzLmRhdGEuZW1lcmdlbmN5IDoge307XG5cdFx0XHRcdGlmKCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4gPSAocmVzLmRhdGEuY2hpbGRyZW4pID8gcmVzLmRhdGEuY2hpbGRyZW4gOiBbXTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmZhbWlseS5kb25hdGlvbnMgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDogW107XG5cdFx0XHR9KTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBpbnNlcnQgZmFtaWx5IC0gaGFzIG5vIGlkXG5cdFx0XHRjb25zb2xlLmxvZyhcImluc2VydCBmYW1pbHlcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBmb3IgYXBwZW5kaW5nIGNoaWxkcmVuIHRvIG1vZGVsIGJlZm9yZSBzYXZpbmcgbmV3IGZhbWlseVxuXHQkc2NvcGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJjaGlsZCBhZGRlZFwiLCAkc2NvcGUubmV3Q2hpbGQsICRzY29wZS5mYW1pbHkuY2hpbGRyZW4pO1xuXHRcdC8vIGlmIHRydWUsIHRoZW4gdXBkYXRlIHRoYXQgaW5kZXhcblx0XHRpZigkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuWyRzY29wZS5lZGl0aW5nQ2hpbGRdID0gJHNjb3BlLm5ld0NoaWxkO1xuXHRcdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHRcdH1lbHNlIHtcblx0XHRcdC8vIGVsc2UgcHVzaCB0byBhcnJheVxuXHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5wdXNoKCRzY29wZS5uZXdDaGlsZCk7XG5cdFx0fVxuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHR9O1xuXG5cdC8vIGVkaXQgY2hpbGQgb24gdGhlIGFkZCBjaGlsZHJlbiB0YWIgb2YgYWRkIGZhbWlseVxuXHQkc2NvcGUuZWRpdENoaWxkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdFx0Ly8gc2F2ZSBpbmRleCBvZiBjaGlsZCBlZGl0aW5nXG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGluZGV4O1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9ICRzY29wZS5mYW1pbHkuY2hpbGRyZW5baW5kZXhdO1xuXHR9O1xuXG5cdCRzY29wZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdGNvbnNvbGUubG9nKFwiaW4gcmVtb3ZlIGNoaWxkIGluZGV4XCIsIGluZGV4LCBcIiBlZGl0IFwiLCAkc2NvcGUuZWRpdGluZ0NoaWxkKTtcblx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSk7XG5cdFx0aWYoaW5kZXggPT0gJHNjb3BlLmVkaXRpbmdDaGlsZCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJlZGl0IG1hdGNoXCIpO1xuXHRcdFx0JHNjb3BlLmNsZWFyQ2hpbGQoKTtcblx0XHR9ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIm5vIGVkaXQgbWF0Y2hcIik7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIGNsZWFycyB0ZXh0IGJveGVzIGluIGFkZCBmYW1pbHktPmNoaWxkcmVuIHRhYlxuXHQkc2NvcGUuY2xlYXJDaGlsZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIGNsZWFyIGNoaWxkXCIpO1xuXHRcdCRzY29wZS5uZXdDaGlsZCA9IHtcblx0XHRcdGZpcnN0TmFtZTogJycsXG5cdFx0XHRsYXN0TmFtZTogJycsXG5cdFx0XHRiaXJ0aGRhdGU6ICcnLFxuXHRcdFx0c2Nob29sOiAnJyxcblx0XHRcdG5vdGVzOiAnJ1xuXHRcdH07XG5cdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHR9O1xuXG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5wdXNoKCRzY29wZS5uZXdEb25hdGlvbik7XG5cdFx0JHNjb3BlLm5ld0RvbmF0aW9uID0ge307XG5cdH07XG5cblx0Ly8vLyBwcmV2ZW50IGFjY2lkZW50YWwgYmFja3Ncblx0Ly8kc2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oIGV2ZW50LCBvbGRVcmwgKSB7XG5cdC8vXHRjb25zb2xlLmxvZyhcIm9sZCB1cmw6IFwiLCBvbGRVcmwpO1xuXHQvL1x0aWYoLyhhZGRmYW1pbHkpLy50ZXN0KG9sZFVybCkpIHtcblx0Ly9cdFx0dmFyIGFuc3dlciA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmUgdGhpcyBwYWdlP1wiKTtcblx0Ly9cdFx0aWYgKCFhbnN3ZXIpIHtcblx0Ly9cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQvL1x0XHR9XG5cdC8vXHR9XG5cdC8vfSk7XG5cbn1dKTsiLCIvL2NvbnRyb2xsZXJzIGZvciBsb2dpblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSl7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9zZWFyY2hcIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufV0pO1xuIiwiXG4vL1RoaXMgc2hvdWxkIGdldCB0aGUgc2VhcmNoIGl0ZW1cbmFwcC5jb250cm9sbGVyKCdzZWFyY2hGdW5jdGlvbicsIFsnJHNjb3BlJywgJyRodHRwJywgJ1Jlc3VsdFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgUmVzdWx0U2VydmljZSkge1xuICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG5cbiAgICAkc2NvcGUuc2VhcmNoQnRuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgUmVzdWx0U2VydmljZS5tYWtlRGF0YUNhbGwoJHNjb3BlLmZvcm1JbnB1dC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIGlucHV0IHRleHQnLCAkc2NvcGUuZm9ybUlucHV0KTtcbiAgICAgICAgLy9lbXB0eXMgdGhlIHNlYXJjaCBib3hcbiAgICAgICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcbiAgICB9O1xuXG59XSk7XG4iLCIvL1RoaXMgc2VydmljZSBzaG91bGQgcGFzcyBkYXRhIGJldHdlZW4gY29udHJvbGxlcnNcbmFwcC5mYWN0b3J5KCdSZXN1bHRTZXJ2aWNlJywgWyckaHR0cCcsZnVuY3Rpb24oJGh0dHApIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBhZHVsdHMgPSBbXTtcbiAgICB2YXIgY29tcGFuaWVzID0gW107XG4gICAgdmFyIGtpZHMgPSBbXTtcblxuICAgIHZhciBtYWtlRGF0YUNhbGwgPSBmdW5jdGlvbihwYXNzZWREYXRhKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vc2VhcmNoJyxcbiAgICAgICAgICAgIHBhcmFtczp7c2VhcmNoOnBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGdldENvbXBhbmllcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEtpZHMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRBZHVsdHMocmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdmFyIGdldENvbXBhbmllcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBjb21wYW5pZXMuc3BsaWNlKDAsY29tcGFuaWVzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NvbXBhbnknKVxuICAgICAgICAgICAgICAgIGNvbXBhbmllcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuICAgICAgICBnZXRFbGVtZW50MShhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnQxJyxjb21wYW5pZXMpO1xuICAgICAgICByZXR1cm4gY29tcGFuaWVzXG4gICAgfTtcblxuICAgIHZhciBnZXRBZHVsdHMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDIgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgYWR1bHRzLnNwbGljZSgwLGFkdWx0cy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdhZHVsdCcpXG4gICAgICAgICAgICAgICAgICAgIGFkdWx0cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgZ2V0RWxlbWVudDIoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiBnZXRFbGVtZW50MicsIGFkdWx0cyk7XG4gICAgICAgIHJldHVybiBhZHVsdHNcbiAgICB9O1xuXG4gICAgdmFyIGdldEtpZHMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAga2lkcy5zcGxpY2UoMCxraWRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NoaWxkJylcbiAgICAgICAgICAgICAgICAgICAga2lkcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgZ2V0RWxlbWVudDMoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50czMnLCBraWRzKTtcbiAgICAgICAgcmV0dXJuIGtpZHNcbiAgICB9O1xuXG4gICAgLy9wdWJsaWNcbiAgICB2YXIgcHVibGljQXBpID0ge1xuICAgICAgICBnZXRLaWRzOiBnZXRLaWRzLFxuICAgICAgICBnZXRBZHVsdHM6IGdldEFkdWx0cyxcbiAgICAgICAgZ2V0Q29tcGFuaWVzOiBnZXRDb21wYW5pZXMsXG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsLFxuICAgICAgICByZXN1bHRzOiByZXN1bHRzLFxuICAgICAgICBjb21wYW5pZXM6IGNvbXBhbmllcyxcbiAgICAgICAgYWR1bHRzOiBhZHVsdHMsXG4gICAgICAgIGtpZHM6IGtpZHNcbiAgICB9O1xuICAgIHJldHVybiBwdWJsaWNBcGk7XG59XSk7IiwiLy8gUGxlYXNlIG5vdGUgdGhhdCAkbW9kYWxJbnN0YW5jZSByZXByZXNlbnRzIGEgbW9kYWwgd2luZG93IChpbnN0YW5jZSkgZGVwZW5kZW5jeS5cbi8vIEl0IGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgJHVpYk1vZGFsIHNlcnZpY2UgdXNlZCBhYm92ZS5cblxuLy9uZWVkZWQgZm9yIG1vZGFsPz8gcHJldHR5IHN1cmVcbmFwcC5jb250cm9sbGVyKCdNb2RhbEluc3RhbmNlQ3RybCcsWyckc2NvcGUnLCckbW9kYWxJbnN0YW5jZScsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG5cbiAgICAkc2NvcGUub2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCRzY29wZS5zZWxlY3RlZC5pdGVtKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgfTtcbn1dKTsiLCJhcHAuY29udHJvbGxlcignbmF2Q3RybCcsIFsnYXV0aFNlcnZpY2UnLCckc2NvcGUnLCckcm9vdFNjb3BlJywnJGxvY2F0aW9uJywgZnVuY3Rpb24oYXV0aFNlcnZpY2UsICRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uKXtcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ob21lJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICB9XG59XSk7XG4iLCIvLyBBamF4IGZvciBjcmVhdGluZyB0aGUgY29udGFjdCBsaXN0IGluIGNvbnN0YW50IGNvbnRhY3RcbmFwcC5jb250cm9sbGVyKCduZXdDb250YWN0TGlzdENvbnRyb2xsZXInLFsnbmV3Q29udGFjdExpc3REYXRhJywnJHNjb3BlJywgZnVuY3Rpb24obmV3Q29udGFjdExpc3REYXRhLCAkc2NvcGUpIHtcbiAgICAvL2RhdGEgdG8gY3JlYXRlIGEgbmV3IGNvbnRhY3QgbGlzdFxuXG5cbiAgICAkc2NvcGUubGlzdG5hbWUgPSB7fTtcblxuICAgICRzY29wZS5jcmVhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjcmVhdGUgbGlzdDogXCIgKyAkc2NvcGUubGlzdG5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBsaXN0IG5hbWUgc2VydmljZVxuICAgICAgICBuZXdDb250YWN0TGlzdERhdGEucG9zdExpc3QoJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnbGlzdCAjJyxuZXdDb250YWN0TGlzdERhdGEubGlzdE51bSk7XG5cbiAgICAgICAgJHNjb3BlLmxpc3RuYW1lPXt9O1xuICAgIH07XG59XSk7XG5cblxuIiwiXG5hcHAuc2VydmljZSgnbmV3Q29udGFjdExpc3REYXRhJywgWydDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgJyRodHRwJyxcbiAgICBmdW5jdGlvbiAoQ29udGFjdExpc3REYXRhU2VydmljZSwgJGh0dHApIHtcbiAgICAgICAgdmFyIGxpc3ROdW0gPSBcIlwiO1xuICAgICAgICB2YXIgaW1wb3J0RGF0YUFycmF5ID1bXTtcblxuICAgICAgICB0aGlzLnBvc3RMaXN0ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGlkIHRoZSBuYW1lIG1ha2UgaXQgdG8gdGhlIHNlcnZpY2U/IFwiICsgbmFtZSApO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9uZXdDb250YWN0TGlzdCcsIHtuYW1lOiBuYW1lfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBsaXN0TnVtID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIklkPyBcIiwgbGlzdE51bSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy9lcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9wTGlzdCA9IGZ1bmN0aW9uIChsaXN0KSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFPYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgXCJpbXBvcnREYXRhQXJyYXlcIjogaW1wb3J0RGF0YUFycmF5LFxuICAgICAgICAgICAgICAgIFwibGlzdE51bVwiOiBsaXN0TnVtXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dvdCB0byBwb3BMaXN0Jyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW1wb3J0RGF0YUFycmF5OiAnLHRoaXMuaW1wb3J0RGF0YUFycmF5LCAnXFxudHlwZTogJywgdHlwZW9mIHRoaXMuaW1wb3J0RGF0YUFycmF5KTtcbiAgICAgICAgICAgIGdldENoZWNrZWQobGlzdCk7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvcG9wdWxhdGVDb250YWN0TGlzdCcsIHRoaXMuZGF0YU9iamVjdCkudGhlbihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncG9zdGVkJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ltcG9ydERhdGFBcnJheTogJyx0aGlzLmltcG9ydERhdGFBcnJheSwgJ1xcbnR5cGU6ICcsIHR5cGVvZiB0aGlzLmltcG9ydERhdGFBcnJheSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy9nZXQgYWxsIHRoZSBjaGVja2VkIGVsZW1lbnRzIGFuZCBzdHVmZiB0aGVtIGluIGFuIGFycmF5XG4gICAgICAgIHZhciBnZXRDaGVja2VkID0gZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRDaGVja2VkIGlzIHJ1bm5pbmcnKTtcbiAgICAgICAgICAgIGwuZm9yRWFjaChcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhY3RPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZpcnN0X25hbWVcIjpvYmplY3QuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6IG9iamVjdC5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBhbnlfbmFtZVwiOiBvYmplY3QuY29tcGFueSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZHJlc3Nlc1wiOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBvYmplY3QuY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbnRhY3RPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2godGhpcy5jb250YWN0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cblxuIiwiYXBwLmNvbnRyb2xsZXIoJ3BvcExpc3RDb250cm9sbGVyJyxbJ25ld0NvbnRhY3RMaXN0RGF0YScsJyRzY29wZScsJyRodHRwJywgZnVuY3Rpb24obmV3Q29udGFjdExpc3REYXRhLCAkc2NvcGUsICRodHRwKSB7XG4gICAgLy9kYXRhIHRvIGNyZWF0ZSBhIG5ldyBjb250YWN0IGxpc3RcblxuXG4gICAgJHNjb3BlLmxpc3ROYW1lID0ge307XG5cbiAgICAkc2NvcGUucG9wdWxhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjcmVhdGUgbGlzdDogXCIgKyBzY29wZS5saXN0TmFtZS5pbnB1dCk7XG4gICAgICAgIC8vcGFzc2VzIGluIHNlYXJjaCB0ZXh0IHRvIHNlcnZpY2VcbiAgICAgICAgbmV3Q29udGFjdExpc3REYXRhLnBvcExpc3QoKTtcbiAgICAgICAgLy92YXIgbGlzdEVuZCA9IHtcbiAgICAgICAgLy8gICAgXCJsaXN0c1wiOiBbbGlzdE51bV0sXG4gICAgICAgIC8vICAgIFwiY29sdW1uX25hbWVzXCI6IFtcbiAgICAgICAgLy8gICAgXCJFTUFJTFwiLFxuICAgICAgICAvLyAgICBcIkZJUlNUIE5BTUVcIixcbiAgICAgICAgLy8gICAgXCJMQVNUIE5BTUVcIixcbiAgICAgICAgLy8gICAgXCJDSVRZXCIsXG4gICAgICAgIC8vICAgIFwiQ09NUEFOWSBOQU1FXCJcbiAgICAgICAgLy9dfVxuXG5cbiAgICAgICAgJHNjb3BlLmxpc3ROYW1lPXt9O1xuICAgIH07XG59XSk7XG5cbiIsIlxuLy9yZWdpc3RlciBjb250cm9sbGVyXG5hcHAuY29udHJvbGxlcigncmVnaXN0ZXJDdHJsJywgWyAnJHNjb3BlJywgJyRodHRwJywgJyRsb2NhdGlvbicsICBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZWdpc3RlckN0cmxcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlckNvbnRyb2xsZXIgc3VibWl0OicsICRzY29wZS5mb3JtKTtcbiAgICAgICAgJGh0dHAucG9zdCgnL3JlZ2lzdGVyJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvaW5kZXhcIilcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1dKTtcbiIsImFwcC5jb250cm9sbGVyKCdyZXNldEN0cmwnLCBbICckc2NvcGUnLCAnJGh0dHAnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkbG9jYXRpb24pIHtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnZWRpdCBwYXNzd29yZDonLCAkc2NvcGUuZm9ybSk7XG4gICAgICAgICRodHRwLnB1dCgnL2FkbWluJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvaW5kZXhcIilcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1dKTtcbiIsImFwcC5zZXJ2aWNlKCd2YWxpZFNlcnZpY2UnLCBbZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIHZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbiAodHlwZSwgaWQpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInZhbGlkYXRlSW5wdXQoKVwiKTtcbiAgICAgICAgLy8gc3RvcmVzIHRoZSBmb3JtIGJlaW5nIGNhbGxlZCBvblxuICAgICAgICB2YXIgcGF0dGVybjtcbiAgICAgICAgdmFyICRvYmogPSAoaWQpID8gJCgnIycrIGlkKSA6IGZhbHNlO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm9iamVjdCBpcyBcIiwgJG9iaiwgdHlwZSwgaWQpO1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICBjYXNlIFwiY2l0eVwiOlxuICAgICAgICAgICAgY2FzZSBcInN0YXRlXCI6XG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIGFuZCBhbHBoYSBjaGFycywgYXMgd2VsbCBhcyB3aGl0ZSBzcGFjZSBhbmQgYSBmZXcgZXh0cmEgY2hhcnNcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS16XFxzLC4nLV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29ycE5hbWVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05XFxzLC4/QCEjJ34qXzsrLV0rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRkcmVzc1wiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlthLXpBLVowLTlcXHMsLj9AISMnfipfOys6KCklJi1dKyQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInppcFwiOlxuICAgICAgICAgICAgICAgIHBhdHRlcm4gPSAvXlswLTldezV9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicGhvbmVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oWyhdWzAtOV17M31bKV18WzAtOV17M30pW1xcc1xcLS5dP1swLTldezN9W1xcc1xcLS5dP1swLTldezR9JC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZW1haWxcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL15bYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfSQvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5vdGVzXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxccywuP0AhIyd+Kl87KzooKSUmPD5cXFtcXF17fVxcLT1cInxgXFxcXFxcL10rJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZXh0XCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW2EtekEtWjAtOVxcczotXSskLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eMjBbMC05XXsyfVstXSgwWzEtOV18MVswLTJdKVstXSgwWzEtOV18WzEtMl1bMC05XXwzWzAxXSkkLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJiaXJ0aGRhdGVcIjpcbiAgICAgICAgICAgICAgICBwYXR0ZXJuID0gL14oMTk5WzAtOV18MjBbMC05XXsyfSlbLV0oMFsxLTldfDFbMC0yXSlbLV0oMFsxLTldfFsxLTJdWzAtOV18M1swMV0pJC87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYW1vdW50XCI6XG4gICAgICAgICAgICAgICAgcGF0dGVybiA9IC9eW1xcJF0/W1xcZF0rKFsuXVtcXGRdezJ9KT8kLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbnZhbGlkIGNsYXNzIHNlYXJjaFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiByZXF1aXJlZCBvciB0cmltbWVkIGxlbmd0aCBpcyBub3QgMCwgdGhlbiB2YWxpZGF0ZSBpbmZvXG4gICAgICAgIGlmKCRvYmouYXR0cigncmVxdWlyZWQnKSB8fCAkb2JqLnZhbCgpLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBjaGVja3MgaWYgdmFsdWUgbWF0Y2hlcyByZWdleCBmb3IgZmllbGQgdHlwZVxuICAgICAgICAgICAgaWYoIXBhdHRlcm4udGVzdCgkb2JqLnZhbCgpLnRyaW0oKSkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBmYWlscywgYWRkcyBpbnZhbGlkIGNsYXNzIChoaWdobGlnaHRpbmcpLCBjaGFuZ2VzIHBsYWNlaG9sZGVyIHRvIHdoYXQgc2hvdWxkIGJlIGVudGVyZWRcbiAgICAgICAgICAgICAgICAkb2JqLmFkZENsYXNzKCdpbnZhbGlkJykuYXR0cigncGxhY2Vob2xkZXInLCAkb2JqLmRhdGEoJ2ludmFsaWQnKSkudmFsKCcnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCAnIGZhaWxlZCB0ZXN0JywgcGF0dGVybik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHBhc3NlcywgcmVtb3ZlcyBpbnZhbGlkIGNsYXNzLCByZXNldHMgcGxhY2Vob2xkZXIgdG8gZGVmYXVsdFxuICAgICAgICAgICAgICAgICRvYmoucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKS5hdHRyKCdwbGFjZWhvbGRlcicsICRvYmouZGF0YSgncGxhY2Vob2xkZXInKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSwgJyBwYXNzZWQgdGVzdCcsIHBhdHRlcm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkYXRlSW5wdXQ6IHZhbGlkYXRlSW5wdXRcbiAgICB9O1xufV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
