function formatDates(t){return{full:moment(t).format(fullDate),pretty:moment(t).format(prettyDate)}}var app=angular.module("leo",["ngRoute","ngAnimate","ui.bootstrap"]),prettyDate="MM/DD/YYgYY",fullDate="MM/DD/YYYY h:mm:ss a";app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"static/login.html"}).when("/search",{templateUrl:"private/search.html"}).when("/register",{templateUrl:"static/register.html"}).when("/contactList",{templateUrl:"private/contactList.html"}).when("/addfamily",{templateUrl:"private/addfamily.html",controller:"editFamilyCtrl"}).when("/addcorp",{templateUrl:"private/addcorp.html",controller:"editCorpCtrl"}).when("/contactlist",{templateUrl:"private/contactlist.html"}).otherwise({redirectTo:"/search"})}]),app.factory("authInterceptor",["$q","$location","authService",function(t,n,e){return{request:function(t){return t.headers=t.headers||{},e.isAuthed()&&(t.headers.Authorization="Bearer "+e.getToken()),t},response:function(e){return 401===e.status&&n.path("/"),e||t.when(e)},responseError:function(e){return 401===e.status?n.path("/"):console.log(e.status),t.reject(e)}}}]),app.service("authService",["$window",function(t){this.parseJwt=function(n){if(n){var e=n.split(".")[1],o=e.replace("-","+").replace("_","/");return JSON.parse(t.atob(o))}return{}},this.saveToken=function(n){t.localStorage.jwtToken=n},this.getToken=function(){return t.localStorage.jwtToken},this.isAuthed=function(){var t=this.getToken();if(t){var n=this.parseJwt(t),e=Math.round((new Date).getTime()/1e3)<=n.exp;return e||this.logout(),e}return!1},this.logout=function(){delete t.localStorage.jwtToken},this.getUser=function(){return this.parseJwt(this.getToken())}}]),app.controller("editCorpCtrl",["$scope","$uibModal","$log","ResultService","$http",function(t,n,e,o,a){t.companies=o.companies,t.corp={contact:{},donations:[]},t.newDonation={},t.animationsEnabled=!0,t.open=function(o,i){return console.log("corp call",i),a({method:"GET",url:"../corporation",params:{id:i}}).then(function(a){t.company=a.data;var i=n.open({animation:t.animationsEnabled,templateUrl:"private/editcorp.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.company}}});i.result.then(function(n){t.selected=n},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.corp),t.corp.id?(console.log("insert corp",t.corp),a({method:"PUT",url:"/corporation",data:{corp:t.corp}}).then(function(n){console.log("Put corp, got id ",n.data),t.corp.id=n.data.id,t.corp.info=n.data.info?n.data.info:{},t.contact=n.data.contact?n.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=n.data.donations?n.data.donations:{}})):a({method:"POST",url:"/corporation",data:{corp:t.corp}}).then(function(n){console.log("Posted corp, got id ",n.data),t.corp.id=n.data.id,t.corp.info=n.data.info?n.data.info:{},t.contact=n.data.contact?n.data.contact:{},t.corp.donations.length&&(t.corp.donations=[]),t.donations=n.data.donations?n.data.donations:{}})},t.addDonation=function(){console.log("added donation",t.newDonation,t.corp.donations),t.corp.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("createListSearch",["$scope","$http","ContactListDataService",function(t,n,e){t.type={},console.log("Where is this",t.corp,t.fam,t.zipCk,t.ageCk),t.emailList=[],t.searchListBtn=function(){if("zipCk"==t.type&&e.makeDataCall("zip",t.zip.data).then(function(n){t.emailList=n,console.log(t.emailList)}),"ageCk"==t.type){var n=e.makeDataCall("age",t.age.data);n.then(function(n){console.log(n),t.emailList=n})}if("fam"==t.type){var o=e.makeDataCall("family","");o.then(function(n){t.emailList=n,console.log(n)})}if("corp"==t.type){var a=e.makeDataCall("company","");a.then(function(n){t.emailList=n,console.log(n)})}t.type={}}}]),app.factory("ContactListDataService",["$http","$q",function(t,n){function e(e,o){var a=n.defer();return console.log("this is in the make data call",e,o),t({method:"GET",url:"../createMailList",params:{type:e,search:o}}).then(function(t){data=t.data,a.resolve(t.data)}),a.promise}return{data:[],makeDataCall:e}}]),app.controller("editFamilyCtrl",["$scope","$uibModal","$log","ResultService","$http",function(t,n,e,o,a){t.adults=o.adults,t.kids=o.kids,t.family={adultOne:{},adultTwo:{},emergency:{},children:[],donations:[]},t.newChild={},t.newDonation={},t.animationsEnabled=!0,t.open=function(o,i){return console.log("family call",i),a({method:"GET",url:"../family",params:{id:i}}).then(function(a){t.family=a.data;var i=n.open({animation:t.animationsEnabled,templateUrl:"private/editfamily.html",controller:"ModalInstanceCtrl",size:o,scope:t,resolve:{items:function(){return t.family}}});i.result.then(function(n){t.selected=n},function(){e.info("Modal dismissed at: "+new Date)})})},t.toggleAnimation=function(){t.animationsEnabled=!t.animationsEnabled},t.save=function(){console.log("Save submitted",t.family),t.family.id?(console.log("insert family",t.family),a({method:"PUT",url:"/family",data:{family:t.family}}).then(function(n){console.log("Put family, got id ",n.data),t.family.id=n.data.id,t.family.adultOne=n.data.adultOne?n.data.adultOne:{},t.family.adultTwo=n.data.adultTwo?n.data.adultTwo:{},t.family.emergency=n.data.emergency?n.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=n.data.children?n.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=n.data.donations?n.data.donations:[]})):a({method:"POST",url:"/family",data:{family:t.family}}).then(function(n){console.log("Posted family, got id ",n.data),t.family.id=n.data.id,t.family.adultOne=n.data.adultOne?n.data.adultOne:{},t.family.adultTwo=n.data.adultTwo?n.data.adultTwo:{},t.family.emergency=n.data.emergency?n.data.emergency:{},t.family.children.length&&(t.family.children=[]),t.family.children=n.data.children?n.data.children:[],t.family.donations.length&&(t.family.donations=[]),t.family.donations=n.data.donations?n.data.donations:[]})},t.addChild=function(){console.log("child added",t.newChild,t.family.children),t.editingChild?(t.family.children[t.editingChild]=t.newChild,t.editingChild=!1):t.family.children.push(t.newChild),t.newChild={}},t.editChild=function(n){t.editingChild=n,t.newChild=t.family.children[n]},t.removeChild=function(n){console.log("in remove child index",n," edit ",t.editingChild),t.family.children.splice(n,1),n==t.editingChild?(console.log("edit match"),t.clearChild()):console.log("no edit match")},t.clearChild=function(){console.log("in clear child"),t.newChild={firstName:"",lastName:"",birthdate:"",school:"",notes:""},t.editingChild=!1},t.addDonation=function(){t.family.donations.push(t.newDonation),t.newDonation={}}}]),app.controller("loginCtrl",["$scope","$http","authService","$location","$rootScope",function(t,n,e,o,a){t.submit=function(){n.post("/login",t.form).then(function(t){e.saveToken(t.data),a.user=e.getUser(),o.path("/search")})}}]),app.controller("searchFunction",["$scope","$http","ResultService",function(t,n,e){t.formInput={},t.searchBtn=function(){e.makeDataCall(t.formInput.data),console.log("this is the input text",t.formInput),t.formInput={}}}]),app.factory("ResultService",["$http",function(t){var n=[],e=[],o=[],a=[],i=function(e){return t({method:"GET",url:"../search",params:{search:e}}).then(function(t){n=t.data,l(n),r(n),c(n)})},l=function(t){var n=function(t){o.splice(0,o.length),t.forEach(function(t){"company"==t.type&&o.push(t)})};return n(t),console.log("this is getElement1",o),o},c=function(t){var n=function(t){e.splice(0,e.length),t.forEach(function(t){"adult"==t.type&&e.push(t)})};return n(t),console.log("this is in getElement2",e),e},r=function(t){var n=function(t){a.splice(0,a.length),t.forEach(function(t){"child"==t.type&&a.push(t)})};return n(t),console.log("this is getElements3",a),a},s={getKids:r,getAdults:c,getCompanies:l,makeDataCall:i,results:n,companies:o,adults:e,kids:a};return s}]),app.controller("ModalInstanceCtrl",["$scope","$modalInstance",function(t,n){t.ok=function(){n.close(t.selected.item)},t.cancel=function(){n.dismiss("cancel")}}]),app.controller("navCtrl",["authService","$scope","$rootScope","$location",function(t,n,e,o){e.user=t.getUser(),e.user&&e.user.username&&o.path("/home"),n.logout=function(){t.logout(),e.user=t.getUser(),o.path("/")}}]),app.controller("newContactListController",["newContactListData","$scope",function(t,n){n.listname={},n.createList=function(){console.log("create list: "+n.listname.input),t.postList(n.listname.input),console.log("list #",t.listNum),n.listname={}}}]),app.service("newContactListData",["ContactListDataService","$http",function(t,n){this.newContactList=[],this.listNum="0",this.postList=function(t){return console.log("did the name make it to the service? "+t),n.post("/newContactList",{name:t}).then(function(t){console.log(t.data),listNum=t.data,console.log("Id? ",listNum)},function(t){console.log(t)})},this.importDataArray=[{email_addresses:["user1@example.com"],first_name:"John",last_name:"Smith",company_name:"Company X",addresses:[{city:"anytown"}]},{email_addresses:["user2@example.com"],first_name:"Jane",last_name:"Smithy",company_name:"Company Y",addresses:[{city:"sometown"}]}],this.popList=function(){e(),n.post("/populateContactList.js",importDataArray,listNum).then(function(t,n,e,o){console.log(t)}),console.log(options)};var e=function(){$(":checked.type-element").each(function(){if(id==t.results.id){var n={email_addresses:[$(this).email],first_name:$(this).firstName,last_name:$(this).lastName,company_name:$(this).company,addresses:[{city:$(this).city}]};importDataArray.push(n)}})}}]),app.controller("popListController",["newContactListData","$scope","$http",function(t,n,e){n.listName={},n.populateList=function(){console.log("create list: "+scope.listName.input),t.popList(),n.listName={}}}]),app.controller("registerCtrl",["$scope","$http","$location",function(t,n,e){t.submit=function(){console.log("registerCtrl"),console.log("registerController submit:",t.form),n.post("/register",t.form).then(function(t){console.log(t),e.path("/index")})}}]),app.controller("resetCtrl",["$scope","$http","$location",function(t,n,e){t.submit=function(){console.log("edit password:",t.form),n.put("/admin",t.form).then(function(t){console.log(t),e.path("/index")})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGhJbnRlcmNlcHRvci5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiY29ycENvbnRyb2xsZXIuanMiLCJjcmVhdGVMaXN0Q29udG9sbGVyLmpzIiwiY3JlYXRlTGlzdFNlcnZpY2UuanMiLCJmYW1pbHlDb250cm9sbGVyLmpzIiwibG9naW5Db250cm9sbGVyLmpzIiwibWFpblNlYXJjaENvbnRyb2xsZXIuanMiLCJtYWluU2VhcmNoU2VydmljZS5qcyIsIm1vZGFsSW5zdGFuY2VDb250cm9sbGVyLmpzIiwibmF2Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0Q29udHJvbGxlci5qcyIsIm5ld0NvbnRhY3RMaXN0U2VydmljZS5qcyIsInBvcExpc3RDb250cm9sbGVyLmpzIiwicmVnaXN0ZXJDb250cm9sbGVyLmpzIiwicmVzZXRDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImZvcm1hdERhdGVzIiwiZGF0ZSIsImZ1bGwiLCJtb21lbnQiLCJmb3JtYXQiLCJmdWxsRGF0ZSIsInByZXR0eSIsInByZXR0eURhdGUiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiLCIkcSIsIiRsb2NhdGlvbiIsImF1dGhTZXJ2aWNlIiwicmVxdWVzdCIsImhlYWRlcnMiLCJpc0F1dGhlZCIsIkF1dGhvcml6YXRpb24iLCJnZXRUb2tlbiIsInJlc3BvbnNlIiwic3RhdHVzIiwicGF0aCIsInJlc3BvbnNlRXJyb3IiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0Iiwic2VydmljZSIsIiR3aW5kb3ciLCJ0aGlzIiwicGFyc2VKd3QiLCJ0b2tlbiIsImJhc2U2NFVybCIsInNwbGl0IiwiYmFzZTY0IiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSIsImF0b2IiLCJzYXZlVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJqd3RUb2tlbiIsInBhcmFtcyIsIm5vdEV4cGlyZWQiLCJNYXRoIiwicm91bmQiLCJEYXRlIiwiZ2V0VGltZSIsImV4cCIsImxvZ291dCIsImdldFVzZXIiLCIkc2NvcGUiLCIkdWliTW9kYWwiLCIkbG9nIiwiUmVzdWx0U2VydmljZSIsIiRodHRwIiwiY29tcGFuaWVzIiwiY29ycCIsImNvbnRhY3QiLCJkb25hdGlvbnMiLCJuZXdEb25hdGlvbiIsImFuaW1hdGlvbnNFbmFibGVkIiwib3BlbiIsInNpemUiLCJpZCIsIm1ldGhvZCIsInVybCIsInRoZW4iLCJjb21wYW55IiwiZGF0YSIsIm1vZGFsSW5zdGFuY2UiLCJhbmltYXRpb24iLCJzY29wZSIsInJlc29sdmUiLCJpdGVtcyIsInJlc3VsdCIsInNlbGVjdGVkSXRlbSIsInNlbGVjdGVkIiwiaW5mbyIsInRvZ2dsZUFuaW1hdGlvbiIsInNhdmUiLCJyZXMiLCJsZW5ndGgiLCJhZGREb25hdGlvbiIsInB1c2giLCJDb250YWN0TGlzdERhdGFTZXJ2aWNlIiwidHlwZSIsImZhbSIsInppcENrIiwiYWdlQ2siLCJlbWFpbExpc3QiLCJzZWFyY2hMaXN0QnRuIiwibWFrZURhdGFDYWxsIiwiemlwIiwiYWdlIiwiY29tcCIsInBhc3NlZERhdGEiLCJkZWZlcnJlZCIsImRlZmVyIiwic2VhcmNoIiwicHJvbWlzZSIsImFkdWx0cyIsImtpZHMiLCJmYW1pbHkiLCJhZHVsdE9uZSIsImFkdWx0VHdvIiwiZW1lcmdlbmN5IiwiY2hpbGRyZW4iLCJuZXdDaGlsZCIsImFkZENoaWxkIiwiZWRpdGluZ0NoaWxkIiwiZWRpdENoaWxkIiwiaW5kZXgiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImNsZWFyQ2hpbGQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoZGF0ZSIsInNjaG9vbCIsIm5vdGVzIiwiJHJvb3RTY29wZSIsInN1Ym1pdCIsInBvc3QiLCJmb3JtIiwidXNlciIsImZvcm1JbnB1dCIsInNlYXJjaEJ0biIsInJlc3VsdHMiLCJnZXRDb21wYW5pZXMiLCJnZXRLaWRzIiwiZ2V0QWR1bHRzIiwiYXJyYXkiLCJnZXRFbGVtZW50MSIsImZvckVhY2giLCJlbGVtZW50IiwiZ2V0RWxlbWVudDIiLCJnZXRFbGVtZW50MyIsInB1YmxpY0FwaSIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJjbG9zZSIsIml0ZW0iLCJjYW5jZWwiLCJkaXNtaXNzIiwidXNlcm5hbWUiLCJuZXdDb250YWN0TGlzdERhdGEiLCJsaXN0bmFtZSIsImNyZWF0ZUxpc3QiLCJpbnB1dCIsInBvc3RMaXN0IiwibGlzdE51bSIsIm5ld0NvbnRhY3RMaXN0IiwibmFtZSIsImltcG9ydERhdGFBcnJheSIsImVtYWlsX2FkZHJlc3NlcyIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJjb21wYW55X25hbWUiLCJhZGRyZXNzZXMiLCJjaXR5IiwicG9wTGlzdCIsImdldENoZWNrZWQiLCJvcHRpb25zIiwiJCIsImVhY2giLCJjb250YWN0T2JqZWN0IiwiZW1haWwiLCJsaXN0TmFtZSIsInBvcHVsYXRlTGlzdCIsInB1dCJdLCJtYXBwaW5ncyI6IkFBS0EsUUFBQUEsYUFBQUMsR0FDQSxPQUNBQyxLQUFBQyxPQUFBRixHQUFBRyxPQUFBQyxVQUNBQyxPQUFBSCxPQUFBRixHQUFBRyxPQUFBRyxhQVJBLEdBQUFDLEtBQUFDLFFBQUFDLE9BQUEsT0FBQSxVQUFBLFlBQUEsaUJBRUFILFdBQUEsY0FDQUYsU0FBQSxzQkFTQUcsS0FBQUcsUUFBQSxpQkFDQSxTQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEsc0JBRUFELEtBQUEsV0FDQUMsWUFBQSx3QkFFQUQsS0FBQSxhQUNBQyxZQUFBLHlCQUVBRCxLQUFBLGdCQUNBQyxZQUFBLDZCQUVBRCxLQUFBLGNBQ0FDLFlBQUEseUJBQ0FDLFdBQUEsbUJBRUFGLEtBQUEsWUFDQUMsWUFBQSx1QkFDQUMsV0FBQSxpQkFFQUYsS0FBQSxnQkFDQUMsWUFBQSw2QkFFQUUsV0FDQUMsV0FBQSxlQ3ZDQVQsSUFBQVUsUUFBQSxtQkFBQSxL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QXlFLE1BQ0F6RCxLQUFBLFNBQUEvQyxHQUNBSSxRQUFBQyxJQUFBTCxHQUNBUCxFQUFBUyxLQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2xlbycsIFsnbmdSb3V0ZScsICduZ0FuaW1hdGUnLCAndWkuYm9vdHN0cmFwJ10pO1xuXG52YXIgcHJldHR5RGF0ZSA9IFwiTU0vREQvWVlnWVlcIjtcbnZhciBmdWxsRGF0ZSA9IFwiTU0vREQvWVlZWSBoOm1tOnNzIGFcIjtcblxuZnVuY3Rpb24gZm9ybWF0RGF0ZXMgKGRhdGUpIHtcblx0cmV0dXJuIHtcblx0XHRmdWxsOiBtb21lbnQoZGF0ZSkuZm9ybWF0KGZ1bGxEYXRlKSxcblx0XHRwcmV0dHk6IG1vbWVudChkYXRlKS5mb3JtYXQocHJldHR5RGF0ZSlcblx0fTtcbn1cblxuYXBwLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlci5cbiAgICAgICAgICAgIHdoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGF0aWMvbG9naW4uaHRtbCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL3NlYXJjaCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvc2VhcmNoLmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9yZWdpc3RlcicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRpYy9yZWdpc3Rlci5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvY29udGFjdExpc3QnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2NvbnRhY3RMaXN0Lmh0bWwnXG4gICAgICAgICAgICB9KS5cbiAgICAgICAgICAgIHdoZW4oJy9hZGRmYW1pbHknLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcml2YXRlL2FkZGZhbWlseS5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRGYW1pbHlDdHJsJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICB3aGVuKCcvYWRkY29ycCcsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvYWRkY29ycC5odG1sJyxcblx0XHRcdFx0Y29udHJvbGxlcjogJ2VkaXRDb3JwQ3RybCdcbiAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgd2hlbignL2NvbnRhY3RsaXN0Jywge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9jb250YWN0bGlzdC5odG1sJ1xuICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICBvdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvc2VhcmNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgfV0pO1xuXG5cblxuXG4iLCJhcHAuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgWyckcScsICckbG9jYXRpb24nLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHEsICRsb2NhdGlvbiwgYXV0aFNlcnZpY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGF1dGhTZXJ2aWNlLmlzQXV0aGVkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgYXV0aFNlcnZpY2UuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICAgIH0sIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKSIsImFwcC5zZXJ2aWNlKCdhdXRoU2VydmljZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uICgkd2luZG93KSB7XG5cbiAgICB0aGlzLnBhcnNlSnd0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIGJhc2U2NFVybCA9IHRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICB2YXIgYmFzZTY0ID0gYmFzZTY0VXJsLnJlcGxhY2UoJy0nLCAnKycpLnJlcGxhY2UoJ18nLCAnLycpO1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoJHdpbmRvdy5hdG9iKGJhc2U2NCkpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIHt9O1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmVUb2tlbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5qd3RUb2tlbiA9IHRva2VuO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTYXZlZCB0b2tlbjonLCR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuKTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICB0aGlzLmlzQXV0aGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VKd3QodG9rZW4pO1xuICAgICAgICAgICAgdmFyIG5vdEV4cGlyZWQgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCkgPD0gcGFyYW1zLmV4cDtcbiAgICAgICAgICAgIGlmICghbm90RXhwaXJlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90RXhwaXJlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlICR3aW5kb3cubG9jYWxTdG9yYWdlLmp3dFRva2VuO1xuICAgIH07XG5cbiAgICAvLyBleHBvc2UgdXNlciBhcyBhbiBvYmplY3RcbiAgICB0aGlzLmdldFVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlSnd0KHRoaXMuZ2V0VG9rZW4oKSlcbiAgICB9O1xufV0pOyIsIi8vZWRpdCBjb3Jwb3JhdGlvbiBtb2RhbCB0ZW1wbGF0ZVxuYXBwLmNvbnRyb2xsZXIoJ2VkaXRDb3JwQ3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwKSB7XG5cdC8vc2VuZHMgdGhlIGNvbXBhbmllcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5jb21wYW5pZXMgPSBSZXN1bHRTZXJ2aWNlLmNvbXBhbmllcztcblx0JHNjb3BlLmNvcnAgPSB7XG5cdFx0Y29udGFjdDoge30sXG5cdFx0ZG9uYXRpb25zOiBbXVxuXHR9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblx0JHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcblxuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdjb3JwIGNhbGwnLCBpZCk7XG5cdFx0cmV0dXJuICRodHRwKHtcblx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHR1cmw6ICcuLi9jb3Jwb3JhdGlvbicsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmNvbXBhbnkgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG5cdFx0XHRcdGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3ByaXZhdGUvZWRpdGNvcnAuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0XHRcdHNpemU6IHNpemUsXG5cdFx0XHRcdHNjb3BlOiAkc2NvcGUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRpdGVtczogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5jb21wYW55O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHNlbGVjdGVkSXRlbSkge1xuXHRcdFx0XHQkc2NvcGUuc2VsZWN0ZWQgPSBzZWxlY3RlZEl0ZW07XG5cdFx0XHR9LCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRsb2cuaW5mbygnTW9kYWwgZGlzbWlzc2VkIGF0OiAnICsgbmV3IERhdGUoKSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcblxuXHQkc2NvcGUudG9nZ2xlQW5pbWF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5hbmltYXRpb25zRW5hYmxlZCA9ICEkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQ7XG5cdH07XG5cblx0Ly8gc2F2ZSBjb3JwXG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmNvcnApO1xuXHRcdC8vYWxlcnQoXCJTdWJtaXR0ZWRcIik7XG5cdFx0Ly8gaWYgaGFzIGlkLCB0aGVuIHB1dFxuXHRcdGlmKCEkc2NvcGUuY29ycC5pZCkge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL2NvcnBvcmF0aW9uJyxcblx0XHRcdFx0ZGF0YToge2NvcnA6ICRzY29wZS5jb3JwfVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGNvcnAsIGdvdCBpZCBcIiwgcmVzLmRhdGEpO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9ZWxzZSB7XG5cdFx0XHQvLyBpbnNlcnQgY29ycCAtIGhhcyBubyBpZFxuXHRcdFx0Y29uc29sZS5sb2coXCJpbnNlcnQgY29ycFwiLCAkc2NvcGUuY29ycCk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9jb3Jwb3JhdGlvbicsXG5cdFx0XHRcdGRhdGE6IHtjb3JwOiAkc2NvcGUuY29ycH1cblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlB1dCBjb3JwLCBnb3QgaWQgXCIsIHJlcy5kYXRhKTtcblxuXHRcdFx0XHQkc2NvcGUuY29ycC5pZCA9IHJlcy5kYXRhLmlkO1xuXHRcdFx0XHQkc2NvcGUuY29ycC5pbmZvID0gKHJlcy5kYXRhLmluZm8pID8gcmVzLmRhdGEuaW5mbyA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdCA9IChyZXMuZGF0YS5jb250YWN0KSA/IHJlcy5kYXRhLmNvbnRhY3QgOiB7fTtcblx0XHRcdFx0Ly8gaW5pdGlhbGl6ZSBkb25hdGlvbnMgaWYgdGhlcmUgYXJlIGFueVxuXHRcdFx0XHRpZigkc2NvcGUuY29ycC5kb25hdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmNvcnAuZG9uYXRpb25zID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmRvbmF0aW9ucyA9IChyZXMuZGF0YS5kb25hdGlvbnMpID8gcmVzLmRhdGEuZG9uYXRpb25zIDoge307XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cblx0Ly8gYWRkcyBkb25hdGlvbiB0byBmYW1pbHkgb2JqZWN0XG5cdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRjb25zb2xlLmxvZyhcImFkZGVkIGRvbmF0aW9uXCIsICRzY29wZS5uZXdEb25hdGlvbiwgJHNjb3BlLmNvcnAuZG9uYXRpb25zKTtcblx0XHQkc2NvcGUuY29ycC5kb25hdGlvbnMucHVzaCgkc2NvcGUubmV3RG9uYXRpb24pO1xuXHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHR9O1xufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2NyZWF0ZUxpc3RTZWFyY2gnLCBbJyRzY29wZScsICckaHR0cCcsICdDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsIENvbnRhY3RMaXN0RGF0YVNlcnZpY2UpIHtcbiAgICAkc2NvcGUudHlwZSA9e307XG4gICAgY29uc29sZS5sb2coJ1doZXJlIGlzIHRoaXMnLFxuICAgICAgICAkc2NvcGUuY29ycCxcbiAgICAgICAgJHNjb3BlLmZhbSxcbiAgICAgICAgJHNjb3BlLnppcENrLFxuICAgICAgICAkc2NvcGUuYWdlQ2tcbiAgICApO1xuXG4gICAgJHNjb3BlLmVtYWlsTGlzdCA9IFsgXTtcblxuICAgICRzY29wZS5zZWFyY2hMaXN0QnRuID0gZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgLy9USElTIFdPUktTICAtLSB3aWxsIHNlYXJjaCBieSB6aXBcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICd6aXBDaycpIHtcblxuICAgICAgICAgICAgQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ3ppcCcsICRzY29wZS56aXAuZGF0YSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW1haWxMaXN0ID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLmVtYWlsTGlzdCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9USElTIFdPUktTIC0gd2lsbCBzZWFyY2ggYnkgYWdlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnYWdlQ2snKSB7XG4gICAgICAgICAgICB2YXIgYWdlID0gQ29udGFjdExpc3REYXRhU2VydmljZS5tYWtlRGF0YUNhbGwoJ2FnZScsICRzY29wZS5hZ2UuZGF0YSk7XG4gICAgICAgICAgICBhZ2UudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL1RISVMgV09SS1MgLS1nZXQgYWxsIGZhbWlsaWVzIGlmIGZhbSBpcyB0cnVlXG4gICAgICAgIGlmICgkc2NvcGUudHlwZSA9PSAnZmFtJykge1xuICAgICAgICAgICAgdmFyIGZhbSA9IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UubWFrZURhdGFDYWxsKCdmYW1pbHknLCAnJyk7XG4gICAgICAgICAgICBmYW0udGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2dldCBhbGwgY29ycCBpZiBjb3JwIGlzIHRydWVcbiAgICAgICAgaWYgKCRzY29wZS50eXBlID09ICdjb3JwJykge1xuICAgICAgICAgICAgdmFyIGNvbXAgPSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLm1ha2VEYXRhQ2FsbCgnY29tcGFueScsICcnKTtcbiAgICAgICAgICAgIGNvbXAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lbWFpbExpc3QgPSBkYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2VtcHR5IHRoZSBzZWFyY2ggYm94XG4gICAgICAgJHNjb3BlLnR5cGU9e307XG5cbiAgICB9O1xuXG5cbn1dKTsiLCJhcHAuZmFjdG9yeSgnQ29udGFjdExpc3REYXRhU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlRGF0YUNhbGwodHlwZSwgcGFzc2VkRGF0YSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiB0aGUgbWFrZSBkYXRhIGNhbGwnLCB0eXBlLCBwYXNzZWREYXRhKTtcbiAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogJy4uL2NyZWF0ZU1haWxMaXN0JyxcbiAgICAgICAgICAgIHBhcmFtczoge3R5cGU6IHR5cGUsIHNlYXJjaDogcGFzc2VkRGF0YX1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBtYWtlRGF0YUNhbGw6IG1ha2VEYXRhQ2FsbFxuICAgIH07XG5cblxufV0pOyIsIi8vZWRpdCBmYW1pbHkgbW9kYWwgdGVtcGxhdGVcbmFwcC5jb250cm9sbGVyKCdlZGl0RmFtaWx5Q3RybCcsIFsnJHNjb3BlJywgJyR1aWJNb2RhbCcsICckbG9nJywgJ1Jlc3VsdFNlcnZpY2UnLCAnJGh0dHAnLCBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsICRsb2csIFJlc3VsdFNlcnZpY2UsICRodHRwKSB7XG5cdC8vc2VuZHMgdGhlIGFkdWx0cyBhbmQga2lkcyBhZnRlciB0aGUgcmVzdWx0cyBoYXZlIGJlZW4gb3JnYW5pemVkXG5cdCRzY29wZS5hZHVsdHMgPSBSZXN1bHRTZXJ2aWNlLmFkdWx0cztcblx0JHNjb3BlLmtpZHMgPSBSZXN1bHRTZXJ2aWNlLmtpZHM7XG5cdCRzY29wZS5mYW1pbHkgPSB7XG5cdFx0YWR1bHRPbmU6IHt9LFxuXHRcdGFkdWx0VHdvOiB7fSxcblx0XHRlbWVyZ2VuY3k6IHt9LFxuXHRcdGNoaWxkcmVuOiBbXSxcblx0XHRkb25hdGlvbnM6IFtdXG5cdH07XG5cdCRzY29wZS5uZXdDaGlsZCA9IHt9O1xuXHQkc2NvcGUubmV3RG9uYXRpb24gPSB7fTtcblxuXHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuXHQkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplLCBpZCkge1xuXHRcdGNvbnNvbGUubG9nKCdmYW1pbHkgY2FsbCcsIGlkKTtcblx0XHRyZXR1cm4gJGh0dHAoe1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHVybDogJy4uL2ZhbWlseScsXG5cdFx0XHRwYXJhbXM6IHtpZDogaWR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuXHRcdFx0JHNjb3BlLmZhbWlseSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcblx0XHRcdFx0YW5pbWF0aW9uOiAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncHJpdmF0ZS9lZGl0ZmFtaWx5Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0XHRzaXplOiBzaXplLFxuXHRcdFx0XHRzY29wZTogJHNjb3BlLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aXRlbXM6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmFtaWx5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChzZWxlY3RlZEl0ZW0pIHtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWRJdGVtO1xuXHRcdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkbG9nLmluZm8oJ01vZGFsIGRpc21pc3NlZCBhdDogJyArIG5ldyBEYXRlKCkpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZUFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSAhJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkO1xuXHR9O1xuXG5cdC8vIHNhdmUgZmFtaWx5XG5cdCRzY29wZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHRcdGNvbnNvbGUubG9nKFwiU2F2ZSBzdWJtaXR0ZWRcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0Ly9hbGVydChcIlN1Ym1pdHRlZFwiKTtcblx0XHQvLyBpZiBoYXMgaWQsIHRoZW4gcHV0XG5cdFx0aWYoISRzY29wZS5mYW1pbHkuaWQpIHtcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUG9zdGVkIGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdH0pO1xuXHRcdH1lbHNlIHtcblx0XHQvLyBpbnNlcnQgZmFtaWx5IC0gaGFzIG5vIGlkXG5cdFx0XHRjb25zb2xlLmxvZyhcImluc2VydCBmYW1pbHlcIiwgJHNjb3BlLmZhbWlseSk7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BVVCcsXG5cdFx0XHRcdHVybDogJy9mYW1pbHknLFxuXHRcdFx0XHRkYXRhOiB7ZmFtaWx5OiAkc2NvcGUuZmFtaWx5fVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUHV0IGZhbWlseSwgZ290IGlkIFwiLCByZXMuZGF0YSk7XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuaWQgPSByZXMuZGF0YS5pZDtcblx0XHRcdFx0JHNjb3BlLmZhbWlseS5hZHVsdE9uZSA9IChyZXMuZGF0YS5hZHVsdE9uZSkgPyByZXMuZGF0YS5hZHVsdE9uZSA6IHt9O1xuXHRcdFx0XHQkc2NvcGUuZmFtaWx5LmFkdWx0VHdvID0gKHJlcy5kYXRhLmFkdWx0VHdvKSA/IHJlcy5kYXRhLmFkdWx0VHdvIDoge307XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZW1lcmdlbmN5ID0gKHJlcy5kYXRhLmVtZXJnZW5jeSkgPyByZXMuZGF0YS5lbWVyZ2VuY3kgOiB7fTtcblx0XHRcdFx0aWYoJHNjb3BlLmZhbWlseS5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbiA9IChyZXMuZGF0YS5jaGlsZHJlbikgPyByZXMuZGF0YS5jaGlsZHJlbiA6IFtdO1xuXHRcdFx0XHRpZigkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0XHQkc2NvcGUuZmFtaWx5LmRvbmF0aW9ucyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zID0gKHJlcy5kYXRhLmRvbmF0aW9ucykgPyByZXMuZGF0YS5kb25hdGlvbnMgOiBbXTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblxuXHQvLyBmb3IgYXBwZW5kaW5nIGNoaWxkcmVuIHRvIG1vZGVsIGJlZm9yZSBzYXZpbmcgbmV3IGZhbWlseVxuXHQkc2NvcGUuYWRkQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJjaGlsZCBhZGRlZFwiLCAkc2NvcGUubmV3Q2hpbGQsICRzY29wZS5mYW1pbHkuY2hpbGRyZW4pO1xuXHRcdC8vIGlmIHRydWUsIHRoZW4gdXBkYXRlIHRoYXQgaW5kZXhcblx0XHRpZigkc2NvcGUuZWRpdGluZ0NoaWxkKSB7XG5cdFx0XHQkc2NvcGUuZmFtaWx5LmNoaWxkcmVuWyRzY29wZS5lZGl0aW5nQ2hpbGRdID0gJHNjb3BlLm5ld0NoaWxkO1xuXHRcdFx0JHNjb3BlLmVkaXRpbmdDaGlsZCA9IGZhbHNlO1xuXHRcdH1lbHNlIHtcblx0XHQvLyBlbHNlIHB1c2ggdG8gYXJyYXlcblx0XHRcdCRzY29wZS5mYW1pbHkuY2hpbGRyZW4ucHVzaCgkc2NvcGUubmV3Q2hpbGQpO1xuXHRcdH1cblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7fTtcblx0fTtcblxuXHQvLyBlZGl0IGNoaWxkIG9uIHRoZSBhZGQgY2hpbGRyZW4gdGFiIG9mIGFkZCBmYW1pbHlcblx0JHNjb3BlLmVkaXRDaGlsZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHRcdC8vIHNhdmUgaW5kZXggb2YgY2hpbGQgZWRpdGluZ1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBpbmRleDtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSAkc2NvcGUuZmFtaWx5LmNoaWxkcmVuW2luZGV4XTtcblx0fTtcblxuXHQkc2NvcGUucmVtb3ZlQ2hpbGQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblx0XHRjb25zb2xlLmxvZyhcImluIHJlbW92ZSBjaGlsZCBpbmRleFwiLCBpbmRleCwgXCIgZWRpdCBcIiwgJHNjb3BlLmVkaXRpbmdDaGlsZCk7XG5cdFx0JHNjb3BlLmZhbWlseS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdGlmKGluZGV4ID09ICRzY29wZS5lZGl0aW5nQ2hpbGQpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiZWRpdCBtYXRjaFwiKTtcblx0XHRcdCRzY29wZS5jbGVhckNoaWxkKCk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXCJubyBlZGl0IG1hdGNoXCIpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBjbGVhcnMgdGV4dCBib3hlcyBpbiBhZGQgZmFtaWx5LT5jaGlsZHJlbiB0YWJcblx0JHNjb3BlLmNsZWFyQ2hpbGQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJpbiBjbGVhciBjaGlsZFwiKTtcblx0XHQkc2NvcGUubmV3Q2hpbGQgPSB7XG5cdFx0XHRmaXJzdE5hbWU6ICcnLFxuXHRcdFx0bGFzdE5hbWU6ICcnLFxuXHRcdFx0YmlydGhkYXRlOiAnJyxcblx0XHRcdHNjaG9vbDogJycsXG5cdFx0XHRub3RlczogJydcblx0XHR9O1xuXHRcdCRzY29wZS5lZGl0aW5nQ2hpbGQgPSBmYWxzZTtcblx0fTtcblxuXHRcdC8vIGFkZHMgZG9uYXRpb24gdG8gZmFtaWx5IG9iamVjdFxuXHRcdCRzY29wZS5hZGREb25hdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdCRzY29wZS5mYW1pbHkuZG9uYXRpb25zLnB1c2goJHNjb3BlLm5ld0RvbmF0aW9uKTtcblx0XHRcdCRzY29wZS5uZXdEb25hdGlvbiA9IHt9O1xuXHRcdH07XG5cblx0Ly8vLyBwcmV2ZW50IGFjY2lkZW50YWwgYmFja3Ncblx0Ly8kc2NvcGUuJG9uKCckbG9jYXRpb25DaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oIGV2ZW50LCBvbGRVcmwgKSB7XG5cdC8vXHRjb25zb2xlLmxvZyhcIm9sZCB1cmw6IFwiLCBvbGRVcmwpO1xuXHQvL1x0aWYoLyhhZGRmYW1pbHkpLy50ZXN0KG9sZFVybCkpIHtcblx0Ly9cdFx0dmFyIGFuc3dlciA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gbGVhdmUgdGhpcyBwYWdlP1wiKTtcblx0Ly9cdFx0aWYgKCFhbnN3ZXIpIHtcblx0Ly9cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQvL1x0XHR9XG5cdC8vXHR9XG5cdC8vfSk7XG5cbn1dKTsiLCIvL2NvbnRyb2xsZXJzIGZvciBsb2dpblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJ2F1dGhTZXJ2aWNlJywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgYXV0aFNlcnZpY2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSl7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnZpY2Uuc2F2ZVRva2VuKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUudXNlciA9IGF1dGhTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9zZWFyY2hcIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufV0pO1xuIiwiXG4vL1RoaXMgc2hvdWxkIGdldCB0aGUgc2VhcmNoIGl0ZW1cbmFwcC5jb250cm9sbGVyKCdzZWFyY2hGdW5jdGlvbicsIFsnJHNjb3BlJywgJyRodHRwJywgJ1Jlc3VsdFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgUmVzdWx0U2VydmljZSkge1xuICAgICRzY29wZS5mb3JtSW5wdXQ9e307XG5cbiAgICAkc2NvcGUuc2VhcmNoQnRuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL3Bhc3NlcyBpbiBzZWFyY2ggdGV4dCB0byBzZXJ2aWNlXG4gICAgICAgUmVzdWx0U2VydmljZS5tYWtlRGF0YUNhbGwoJHNjb3BlLmZvcm1JbnB1dC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMgaXMgdGhlIGlucHV0IHRleHQnLCAkc2NvcGUuZm9ybUlucHV0KTtcbiAgICAgICAgLy9lbXB0eXMgdGhlIHNlYXJjaCBib3hcbiAgICAgICAgJHNjb3BlLmZvcm1JbnB1dD17fTtcbiAgICB9O1xuXG59XSk7XG4iLCIvL1RoaXMgc2VydmljZSBzaG91bGQgcGFzcyBkYXRhIGJldHdlZW4gY29udHJvbGxlcnNcbmFwcC5mYWN0b3J5KCdSZXN1bHRTZXJ2aWNlJywgWyckaHR0cCcsZnVuY3Rpb24oJGh0dHApIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHZhciBhZHVsdHMgPSBbXTtcbiAgICB2YXIgY29tcGFuaWVzID0gW107XG4gICAgdmFyIGtpZHMgPSBbXTtcblxuICAgIHZhciBtYWtlRGF0YUNhbGwgPSBmdW5jdGlvbihwYXNzZWREYXRhKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiAnLi4vc2VhcmNoJyxcbiAgICAgICAgICAgIHBhcmFtczp7c2VhcmNoOnBhc3NlZERhdGF9XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIGdldENvbXBhbmllcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGdldEtpZHMocmVzdWx0cyk7XG4gICAgICAgICAgICBnZXRBZHVsdHMocmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdmFyIGdldENvbXBhbmllcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgIHZhciBnZXRFbGVtZW50MSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgICAgICAgICBjb21wYW5pZXMuc3BsaWNlKDAsY29tcGFuaWVzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NvbXBhbnknKVxuICAgICAgICAgICAgICAgIGNvbXBhbmllcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuICAgICAgICBnZXRFbGVtZW50MShhcnJheSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIGdldEVsZW1lbnQxJyxjb21wYW5pZXMpO1xuICAgICAgICByZXR1cm4gY29tcGFuaWVzXG4gICAgfTtcblxuICAgIHZhciBnZXRBZHVsdHMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDIgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAgYWR1bHRzLnNwbGljZSgwLGFkdWx0cy5sZW5ndGgpO1xuICAgICAgICAgICAgYXJyYXkuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC50eXBlID09ICdhZHVsdCcpXG4gICAgICAgICAgICAgICAgICAgIGFkdWx0cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgZ2V0RWxlbWVudDIoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBpbiBnZXRFbGVtZW50MicsIGFkdWx0cyk7XG4gICAgICAgIHJldHVybiBhZHVsdHNcbiAgICB9O1xuXG4gICAgdmFyIGdldEtpZHMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICB2YXIgZ2V0RWxlbWVudDMgPSBmdW5jdGlvbihhcnJheSkge1xuICAgICAgICAgICAga2lkcy5zcGxpY2UoMCxraWRzLmxlbmd0aCk7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpe1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT0gJ2NoaWxkJylcbiAgICAgICAgICAgICAgICAgICAga2lkcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgZ2V0RWxlbWVudDMoYXJyYXkpO1xuICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBnZXRFbGVtZW50czMnLCBraWRzKTtcbiAgICAgICAgcmV0dXJuIGtpZHNcbiAgICB9O1xuXG4gICAgLy9wdWJsaWNcbiAgICB2YXIgcHVibGljQXBpID0ge1xuICAgICAgICBnZXRLaWRzOiBnZXRLaWRzLFxuICAgICAgICBnZXRBZHVsdHM6IGdldEFkdWx0cyxcbiAgICAgICAgZ2V0Q29tcGFuaWVzOiBnZXRDb21wYW5pZXMsXG4gICAgICAgIG1ha2VEYXRhQ2FsbDogbWFrZURhdGFDYWxsLFxuICAgICAgICByZXN1bHRzOiByZXN1bHRzLFxuICAgICAgICBjb21wYW5pZXM6IGNvbXBhbmllcyxcbiAgICAgICAgYWR1bHRzOiBhZHVsdHMsXG4gICAgICAgIGtpZHM6IGtpZHNcbiAgICB9O1xuICAgIHJldHVybiBwdWJsaWNBcGk7XG59XSk7IiwiLy8gUGxlYXNlIG5vdGUgdGhhdCAkbW9kYWxJbnN0YW5jZSByZXByZXNlbnRzIGEgbW9kYWwgd2luZG93IChpbnN0YW5jZSkgZGVwZW5kZW5jeS5cbi8vIEl0IGlzIG5vdCB0aGUgc2FtZSBhcyB0aGUgJHVpYk1vZGFsIHNlcnZpY2UgdXNlZCBhYm92ZS5cblxuLy9uZWVkZWQgZm9yIG1vZGFsPz8gcHJldHR5IHN1cmVcbmFwcC5jb250cm9sbGVyKCdNb2RhbEluc3RhbmNlQ3RybCcsWyckc2NvcGUnLCckbW9kYWxJbnN0YW5jZScsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XG5cbiAgICAkc2NvcGUub2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCRzY29wZS5zZWxlY3RlZC5pdGVtKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG4gICAgfTtcbn1dKTsiLCJhcHAuY29udHJvbGxlcignbmF2Q3RybCcsIFsnYXV0aFNlcnZpY2UnLCckc2NvcGUnLCckcm9vdFNjb3BlJywnJGxvY2F0aW9uJywgZnVuY3Rpb24oYXV0aFNlcnZpY2UsICRzY29wZSwgJHJvb3RTY29wZSwgJGxvY2F0aW9uKXtcbiAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG5cbiAgICBpZigkcm9vdFNjb3BlLnVzZXIgJiYgJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lKXtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ob21lJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpO1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSBhdXRoU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcbiAgICB9XG59XSk7XG4iLCIvLyBBamF4IGZvciBjcmVhdGluZyB0aGUgY29udGFjdCBsaXN0IGluIGNvbnN0YW50IGNvbnRhY3RcbmFwcC5jb250cm9sbGVyKCduZXdDb250YWN0TGlzdENvbnRyb2xsZXInLFsnbmV3Q29udGFjdExpc3REYXRhJywnJHNjb3BlJywgZnVuY3Rpb24obmV3Q29udGFjdExpc3REYXRhLCAkc2NvcGUpIHtcbiAgICAvL2RhdGEgdG8gY3JlYXRlIGEgbmV3IGNvbnRhY3QgbGlzdFxuXG5cbiAgICAkc2NvcGUubGlzdG5hbWUgPSB7fTtcblxuICAgICRzY29wZS5jcmVhdGVMaXN0ICA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjcmVhdGUgbGlzdDogXCIgKyAkc2NvcGUubGlzdG5hbWUuaW5wdXQpO1xuICAgICAgICAvL3Bhc3NlcyBsaXN0IG5hbWUgc2VydmljZVxuICAgICAgICBuZXdDb250YWN0TGlzdERhdGEucG9zdExpc3QoJHNjb3BlLmxpc3RuYW1lLmlucHV0KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnbGlzdCAjJyxuZXdDb250YWN0TGlzdERhdGEubGlzdE51bSk7XG5cbiAgICAgICAgJHNjb3BlLmxpc3RuYW1lPXt9O1xuICAgIH07XG59XSk7XG5cblxuIiwiYXBwLnNlcnZpY2UoJ25ld0NvbnRhY3RMaXN0RGF0YScsIFsnQ29udGFjdExpc3REYXRhU2VydmljZScsICckaHR0cCcsXG4gICAgZnVuY3Rpb24gKENvbnRhY3RMaXN0RGF0YVNlcnZpY2UsICRodHRwKSB7XG4gICAgICAgIHRoaXMubmV3Q29udGFjdExpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0TnVtID0gXCIwXCI7XG4gICAgICAgIHRoaXMucG9zdExpc3QgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkaWQgdGhlIG5hbWUgbWFrZSBpdCB0byB0aGUgc2VydmljZT8gXCIgKyBuYW1lICk7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL25ld0NvbnRhY3RMaXN0Jywge25hbWU6IG5hbWV9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGxpc3ROdW0gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSWQ/IFwiLCBsaXN0TnVtKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOyAvL2Vycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbXBvcnREYXRhQXJyYXkgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJlbWFpbF9hZGRyZXNzZXNcIjogW1xuICAgICAgICAgICAgICAgICAgICBcInVzZXIxQGV4YW1wbGUuY29tXCJcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFwiZmlyc3RfbmFtZVwiOiBcIkpvaG5cIixcbiAgICAgICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBcIlNtaXRoXCIsXG4gICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogXCJDb21wYW55IFhcIixcbiAgICAgICAgICAgICAgICBcImFkZHJlc3Nlc1wiOiBbe1xuICAgICAgICAgICAgICAgICAgICBjaXR5OiBcImFueXRvd25cIlxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJ1c2VyMkBleGFtcGxlLmNvbVwiXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBcImZpcnN0X25hbWVcIjogXCJKYW5lXCIsXG4gICAgICAgICAgICAgICAgXCJsYXN0X25hbWVcIjogXCJTbWl0aHlcIixcbiAgICAgICAgICAgICAgICBcImNvbXBhbnlfbmFtZVwiOiBcIkNvbXBhbnkgWVwiLFxuICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IFwic29tZXRvd25cIlxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMucG9wTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGdldENoZWNrZWQoKTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoJy9wb3B1bGF0ZUNvbnRhY3RMaXN0LmpzJywgaW1wb3J0RGF0YUFycmF5LCBsaXN0TnVtKS50aGVuKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhvcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy9nZXQgYWxsIHRoZSBjaGVja2VkIGVsZW1lbnRzIGFuZCBzdHVmZiB0aGVtIGluIGFuIGFycmF5XG4gICAgICAgIHZhciBnZXRDaGVja2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIjpjaGVja2VkLnR5cGUtZWxlbWVudFwiKS5lYWNoKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09IENvbnRhY3RMaXN0RGF0YVNlcnZpY2UucmVzdWx0cy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhY3RPYmplY3QgPVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1haWxfYWRkcmVzc2VzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6ICQodGhpcykuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6ICQodGhpcykubGFzdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb21wYW55X25hbWVcIjogJCh0aGlzKS5jb21wYW55LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6ICQodGhpcykuY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2goY29udGFjdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfV0pO1xuLy8gc2VydmljZSBmb3IgYWpheCBjYWxscyB0byBjb25zdGFudCBjb250YWN0XG4vL1xuLy9hcHAuc2VydmljZSgnbmV3Q29udGFjdExpc3REYXRhJywgWydDb250YWN0TGlzdERhdGFTZXJ2aWNlJywgJyRodHRwJyxcbi8vICAgIGZ1bmN0aW9uIChDb250YWN0TGlzdERhdGFTZXJ2aWNlLCAkaHR0cCkge1xuLy9cbi8vICAgIHZhciBuZXdDb250YWN0TGlzdCA9IFtdO1xuLy8gICAgdmFyIGxpc3ROdW0gPSBcIjE0OTk1MjM2MTBcIjtcbi8vXG4vLyAgICB0aGlzLnBvc3RMaXN0ID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICRodHRwLnBvc3QoJy9uZXdDb250YWN0TGlzdCcpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbi8vICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4vLyAgICAgICAgICAgIGxpc3ROdW0gPSBkYXRhLmlkXG4vL1xuLy8gICAgICAgIH0sIGZ1bmN0aW9uKGRhdGEpe1xuLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy9lcnJvclxuLy8gICAgICAgIH0pO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpXG4vLyAgICB9O1xuLy9cbi8vICAgIHZhciBpbXBvcnREYXRhQXJyYXkgPSBbXG4vLyAgICAgICAge1xuLy8gICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4vLyAgICAgICAgICAgICAgICBcInVzZXIxQGV4YW1wbGUuY29tXCJcbi8vICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6IFwiSm9oblwiLFxuLy8gICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBcIlNtaXRoXCIsXG4vLyAgICAgICAgICAgIFwiY29tcGFueV9uYW1lXCI6IFwiQ29tcGFueSBYXCIsXG4vLyAgICAgICAgICAgIFwiYWRkcmVzc2VzXCI6IFt7XG4vLyAgICAgICAgICAgICAgICBjaXR5OiBcImFueXRvd25cIlxuLy8gICAgICAgICAgICB9XVxuLy8gICAgICAgIH0sXG4vLyAgICAgICAge1xuLy8gICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4vLyAgICAgICAgICAgICAgICBcInVzZXIyQGV4YW1wbGUuY29tXCJcbi8vICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICAgXCJmaXJzdF9uYW1lXCI6IFwiSmFuZVwiLFxuLy8gICAgICAgICAgICBcImxhc3RfbmFtZVwiOiBcIlNtaXRoeVwiLFxuLy8gICAgICAgICAgICBcImNvbXBhbnlfbmFtZVwiOiBcIkNvbXBhbnkgWVwiLFxuLy8gICAgICAgICAgICBcImFkZHJlc3Nlc1wiOiBbe1xuLy8gICAgICAgICAgICAgICAgY2l0eTogXCJzb21ldG93blwiXG4vLyAgICAgICAgICAgIH1dXG4vLyAgICAgICAgfVxuLy8gICAgXTtcbi8vXG4vLyAgICAvL3ZhciBjb250YWN0TGlzdE9iamVjdCA9KHtcbi8vICAgIC8vICAgIFwiSW1wb3J0IERhdGFcIiA6IGltcG9ydERhdGFBcnJheSxcbi8vICAgIC8vICAgIFwibGlzdFwiOiBbbGlzdE51bV0sXG4vLyAgICAvLyAgICBcImNvbHVtbl9uYW1lc1wiOltcIkVNQUlMXCIsXCJGSVJTVCBOQU1FXCIsIFwiTEFTVCBOQU1FXCIsIFwiQ0lUWVwiLFwiQ09NUEFOWSBOQU1FXCJdfSk7XG4vL1xuLy9cbi8vICAgIHRoaXMucG9wTGlzdCA9IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICBnZXRDaGVja2VkKCk7XG4vLyAgICAgICAgJGh0dHAucG9zdCgnL3BvcHVsYXRlQ29udGFjdExpc3QuanMnLCBpbXBvcnREYXRhQXJyYXksIGxpc3ROdW0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuLy8gICAgICAgIH0pO1xuLy8gICAgICAgIGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuLy9cbi8vICAgIH07XG4vL1xuLy8gICAgLy9nZXQgYWxsIHRoZSBjaGVja2VkIGVsZW1lbnRzIGFuZCBzdHVmZiB0aGVtIGluIGFuIGFycmF5XG4vLyAgICB2YXIgZ2V0Q2hlY2tlZCA9IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgICAgJChcIjpjaGVja2VkLnR5cGUtZWxlbWVudFwiKS5lYWNoKFxuLy8gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PSBDb250YWN0TGlzdERhdGFTZXJ2aWNlLnJlc3VsdHMuaWQpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhY3RPYmplY3QgPVxuLy8gICAgICAgICAgICAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVtYWlsX2FkZHJlc3Nlc1wiOiBbXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5lbWFpbFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZmlyc3RfbmFtZVwiOiAkKHRoaXMpLmZpcnN0TmFtZSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFzdF9uYW1lXCI6ICQodGhpcykubGFzdE5hbWUsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbXBhbnlfbmFtZVwiOiAkKHRoaXMpLmNvbXBhbnksXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZHJlc3Nlc1wiOiBbe1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6ICQodGhpcykuY2l0eVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbi8vICAgICAgICAgICAgICAgICAgICAgICAgfTtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0RGF0YUFycmF5LnB1c2goY29udGFjdE9iamVjdCk7XG4vLyAgICAgICAgICAgICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgKTtcbi8vICAgICAgICB9XG4vL31dKTsiLCJhcHAuY29udHJvbGxlcigncG9wTGlzdENvbnRyb2xsZXInLFsnbmV3Q29udGFjdExpc3REYXRhJywnJHNjb3BlJywnJGh0dHAnLCBmdW5jdGlvbihuZXdDb250YWN0TGlzdERhdGEsICRzY29wZSwgJGh0dHApIHtcbiAgICAvL2RhdGEgdG8gY3JlYXRlIGEgbmV3IGNvbnRhY3QgbGlzdFxuXG5cbiAgICAkc2NvcGUubGlzdE5hbWUgPSB7fTtcblxuICAgICRzY29wZS5wb3B1bGF0ZUxpc3QgID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNyZWF0ZSBsaXN0OiBcIiArIHNjb3BlLmxpc3ROYW1lLmlucHV0KTtcbiAgICAgICAgLy9wYXNzZXMgaW4gc2VhcmNoIHRleHQgdG8gc2VydmljZVxuICAgICAgICBuZXdDb250YWN0TGlzdERhdGEucG9wTGlzdCgpO1xuICAgICAgICAvL3ZhciBsaXN0RW5kID0ge1xuICAgICAgICAvLyAgICBcImxpc3RzXCI6IFtsaXN0TnVtXSxcbiAgICAgICAgLy8gICAgXCJjb2x1bW5fbmFtZXNcIjogW1xuICAgICAgICAvLyAgICBcIkVNQUlMXCIsXG4gICAgICAgIC8vICAgIFwiRklSU1QgTkFNRVwiLFxuICAgICAgICAvLyAgICBcIkxBU1QgTkFNRVwiLFxuICAgICAgICAvLyAgICBcIkNJVFlcIixcbiAgICAgICAgLy8gICAgXCJDT01QQU5ZIE5BTUVcIlxuICAgICAgICAvL119XG5cblxuICAgICAgICAkc2NvcGUubGlzdE5hbWU9e307XG4gICAgfTtcbn1dKTtcblxuIiwiXG4vL3JlZ2lzdGVyIGNvbnRyb2xsZXJcbmFwcC5jb250cm9sbGVyKCdyZWdpc3RlckN0cmwnLCBbICckc2NvcGUnLCAnJGh0dHAnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwLCAkbG9jYXRpb24pIHtcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlZ2lzdGVyQ3RybFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyQ29udHJvbGxlciBzdWJtaXQ6JywgJHNjb3BlLmZvcm0pO1xuICAgICAgICAkaHR0cC5wb3N0KCcvcmVnaXN0ZXInLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9pbmRleFwiKVxuICAgICAgICAgICAgfSk7XG4gICAgfVxufV0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ3Jlc2V0Q3RybCcsIFsgJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbikge1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlZGl0IHBhc3N3b3JkOicsICRzY29wZS5mb3JtKTtcbiAgICAgICAgJGh0dHAucHV0KCcvYWRtaW4nLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9pbmRleFwiKVxuICAgICAgICAgICAgfSk7XG4gICAgfVxufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
